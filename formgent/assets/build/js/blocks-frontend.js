import{getContext as e,getElement as t,store as i,withScope as s}from"@wordpress/interactivity";var n={385(e){e.exports=function(){var e={d:function(t,i){for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};e.d(t,{default:function(){return H}});var i={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},s={classes:"",inline:!1,locale:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:i.days,minView:i.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,fixedHeight:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof e?t.querySelector(e):e}function r(){let{tagName:e="div",className:t="",innerHtml:i="",id:s="",attrs:n={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=document.createElement(e);return t&&r.classList.add(...t.split(" ")),s&&(r.id=s),i&&(r.innerHTML=i),n&&o(r,n),r}function o(e,t){for(let[i,s]of Object.entries(t))void 0!==s&&e.setAttribute(i,s);return e}function a(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function l(e){let t=e.getHours(),{hours:i,dayPeriod:s}=c(t);return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:t,fullHours:d(t),hours12:i,dayPeriod:s,fullHours12:d(i),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}}function c(e){return{dayPeriod:e>11?"pm":"am",hours:e%12==0?12:e%12}}function d(e){return e<10?"0"+e:e}function u(e){let t=10*Math.floor(e.getFullYear()/10);return[t,t+9]}function h(){let e=[];for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return i.forEach(t=>{if("object"==typeof t)for(let i in t)t[i]&&e.push(i);else t&&e.push(t)}),e.join(" ")}function p(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.days;if(!e||!t)return!1;let n=l(e),r=l(t);return{[i.days]:n.date===r.date&&n.month===r.month&&n.year===r.year,[i.months]:n.month===r.month&&n.year===r.year,[i.years]:n.year===r.year}[s]}function m(e,t,i){let s=g(e,!1).getTime(),n=g(t,!1).getTime();return i?s>=n:s>n}function f(e,t){return!m(e,t,!0)}function g(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new Date(e.getTime());return"boolean"!=typeof t||t||function(e){e.setHours(0,0,0,0)}(i),i}function y(e,t,i){e.length?e.forEach(e=>{e.addEventListener(t,i)}):e.addEventListener(t,i)}function v(e,t){return!(!e||e===document||e instanceof DocumentFragment)&&(e.matches(t)?e:v(e.parentNode,t))}function b(e,t,i){return e>i?i:e<t?t:e}function _(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return i.filter(e=>e).forEach(t=>{for(let[i,s]of Object.entries(t))if(void 0!==s&&"[object Object]"===s.toString()){let t=void 0!==e[i]?e[i].toString():void 0,n=s.toString(),r=Array.isArray(s)?[]:{};e[i]=e[i]?t!==n?r:e[i]:r,_(e[i],s)}else e[i]=s}),e}function w(e){let t=e;return e instanceof Date||("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)&&(e+="T00:00:00"),t=new Date(e)),isNaN(t.getTime())&&(console.log(`Unable to convert value "${e}" to Date object`),t=!1),t}function C(e){let t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")}function k(e,t,i){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class S{constructor(){let{type:e,date:t,dp:i,opts:s,body:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),k(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),k(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),k(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),k(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),k(this,"onChangeFocusDate",e=>{if(!e)return void(this.focused&&this.removeFocus());let t=p(e,this.date,this.type);t?this.focus():!t&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),k(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this._handleClasses(),this.$cell)),this.type=e,this.singleType=this.type.slice(0,-1),this.date=t,this.dp=i,this.opts=s,this.body=n,this.customData=!1,this.init()}init(){var e,t;let{onRenderCell:i}=this.opts;i&&(this.customData=i({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),null!==(e=this.customData)&&void 0!==e&&e.disabled?this.dp.disableDate(this.date):!1===(null===(t=this.customData)||void 0===t?void 0:t.disabled)&&this.dp.enableDate(this.date)}_bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var e;let{year:t,month:i,fullMonth:s,date:n,fullDate:o}=l(this.date),a=(null===(e=this.customData)||void 0===e?void 0:e.attrs)||{};this.$cell=r({attrs:{"data-year":t,"data-month":i,"data-date":n,"data-iso-date":`${t}-${s}-${o}`,...a}}),this.$cell.adpCell=this}_getClassName(){var e;let t=new Date,{selectOtherMonths:s,selectOtherYears:n}=this.opts,{minDate:r,maxDate:o,isDateDisabled:a}=this.dp,{day:c}=l(this.date),d=this._isOutOfMinMaxRange(),u=a(this.date),m=h("air-datepicker-cell",`-${this.singleType}-`,{"-current-":p(t,this.date,this.type),"-min-date-":r&&p(r,this.date,this.type),"-max-date-":o&&p(o,this.date,this.type)}),f="";switch(this.type){case i.days:f=h({"-weekend-":this.dp.isWeekend(c),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!s||d||u});break;case i.months:f=h({"-disabled-":d});break;case i.years:f=h({"-other-decade-":this.isOtherDecade,"-disabled-":d||this.isOtherDecade&&!n})}return h(m,f,null===(e=this.customData)||void 0===e?void 0:e.classes).split(" ")}_getHtml(){var e;let{year:t,month:s,date:n}=l(this.date),{showOtherMonths:r,showOtherYears:o}=this.opts;if(null!==(e=this.customData)&&void 0!==e&&e.html)return this.customData.html;switch(this.type){case i.days:return!r&&this.isOtherMonth?"":n;case i.months:return this.dp.locale[this.opts.monthsField][s];case i.years:return!o&&this.isOtherDecade?"":t}}_isOutOfMinMaxRange(){let{minDate:e,maxDate:t}=this.dp,{type:s,date:n}=this,{month:r,year:o,date:a}=l(n),c=s===i.days,d=s===i.years,u=!!e&&new Date(o,d?e.getMonth():r,c?a:e.getDate()),h=!!t&&new Date(o,d?t.getMonth():r,c?a:t.getDate());return e&&t?f(u,e)||m(h,t):e?f(u,e):t?m(h,t):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){const{selectedDates:e,focusDate:t,rangeDateTo:i,rangeDateFrom:s}=this.dp,n=e.length;if(this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),!n)return;let r=s,o=i;if(1===n&&t){const i=m(t,e[0]);r=i?e[0]:t,o=i?t:e[0]}let a=h({"-in-range-":r&&o&&(l=this.date,c=r,d=o,m(l,c)&&f(l,d)),"-range-from-":r&&p(this.date,r,this.type),"-range-to-":o&&p(this.date,o,this.type)});var l,c,d;a&&this.$cell.classList.add(...a.split(" "))}_handleSelectedStatus(){let e=this.dp._checkIfDateIsSelected(this.date,this.type);e?this.select():!e&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){p(this.dp.focusDate,this.date,this.type)&&this.focus()}_handleClasses(){this.$cell.setAttribute("class",""),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),this.dp.opts.range&&this._handleRangeStatus()),this.$cell.classList.add(...this._getClassName())}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function D(e,t,i){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let I={[i.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${i.days}-"></div>`,[i.months]:`<div class="air-datepicker-body--cells -${i.months}-"></div>`,[i.years]:`<div class="air-datepicker-body--cells -${i.years}-"></div>`};const L=".air-datepicker-cell";class x{constructor(e){let{dp:t,type:s,opts:n}=e;D(this,"handleClick",e=>{let t=e.target.closest(L).adpCell;if(t.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let i=this.dp._checkIfDateIsSelected(t.date,t.type);i?this.dp._handleAlreadySelectedDates(i,t.date):this.dp.selectDate(t.date)}),D(this,"handleDayNameClick",e=>{let t=e.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(t),datepicker:this.dp})}),D(this,"onChangeCurrentView",e=>{e!==this.type?this.hide():(this.show(),this.render())}),D(this,"onMouseOverCell",e=>{let t=v(e.target,L);this.dp.setFocusDate(!!t&&t.adpCell.date)}),D(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),D(this,"onClickBody",e=>{let{onClickDayName:t}=this.opts,i=e.target;i.closest(L)&&this.handleClick(e),t&&i.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(e)}),D(this,"onMouseDown",e=>{this.pressed=!0;let t=v(e.target,L),i=t&&t.adpCell;p(i.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),p(i.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),D(this,"onMouseMove",e=>{if(!this.pressed||!this.dp.isMinViewReached)return;e.preventDefault();let t=v(e.target,L),i=t&&t.adpCell,{selectedDates:s,rangeDateTo:n,rangeDateFrom:r}=this.dp;if(!i||i.isDisabled)return;let{date:o}=i;if(2===s.length){if(this.rangeFromFocused&&!m(o,n)){let{hours:e,minutes:t}=l(r);o.setHours(e),o.setMinutes(t),this.dp.rangeDateFrom=o,this.dp.replaceDate(r,o)}if(this.rangeToFocused&&!f(o,r)){let{hours:e,minutes:t}=l(n);o.setHours(e),o.setMinutes(t),this.dp.rangeDateTo=o,this.dp.replaceDate(n,o)}}}),D(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),D(this,"onChangeViewDate",(e,t)=>{if(!this.isVisible)return;let s=u(e),n=u(t);switch(this.dp.currentView){case i.days:if(p(e,t,i.months))return;break;case i.months:if(p(e,t,i.years))return;break;case i.years:if(s[0]===n[0]&&s[1]===n[1])return}this.render()}),D(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(e=>{this.$cells.appendChild(e.render())})}),this.dp=t,this.type=s,this.opts=n,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===i.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:e,dynamicRange:t}=this.opts;y(this.$el,"mouseover",this.onMouseOverCell),y(this.$el,"mouseout",this.onMouseOutCell),y(this.$el,"click",this.onClickBody),e&&t&&(y(this.$el,"mousedown",this.onMouseDown),y(this.$el,"mousemove",this.onMouseMove),y(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=r({className:`air-datepicker-body -${this.type}-`,innerHtml:I[this.type]}),this.$names=n(".air-datepicker-body--day-names",this.$el),this.$cells=n(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dp.locale.firstDay,t="",s=this.dp.isWeekend,{onClickDayName:n}=this.opts,r=e,o=0;for(;o<7;){let e=r%7;t+=`<div class="${h("air-datepicker-body--day-name",{[i.cssClassWeekend]:s(e),"-clickable-":!!n})}" data-day-index='${e}'>${this.dp.locale.daysMin[e]}</div>`,o++,r++}return t}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(e){let{type:t,dp:i,opts:s}=this;return new S({type:t,dp:i,opts:s,date:e,body:this})}_generateCells(){x.getDatesFunction(this.type)(this.dp,e=>{this.cells.push(this._generateCell(e))})}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(e=>e.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView)}static getDaysDates(e,t){let{viewDate:i,opts:{fixedHeight:s},locale:{firstDay:n}}=e,r=a(i),{year:o,month:c}=l(i),d=new Date(o,c,1),u=new Date(o,c,r),h=d.getDay()-n,p=6-u.getDay()+n;h=h<0?h+7:h,p=p>6?p-7:p;let m=function(e,t){let{year:i,month:s,date:n}=l(e);return new Date(i,s,n-t)}(d,h),f=r+h+p,g=m.getDate(),{year:y,month:v}=l(m),b=0;s&&(f=42);const _=[];for(;b<f;){let e=new Date(y,v,g+b);t&&t(e),_.push(e),b++}return _}static getMonthsDates(e,t){let{year:i}=e.parsedViewDate,s=0,n=[];for(;s<12;){const e=new Date(i,s);n.push(e),t&&t(e),s++}return n}static getYearsDates(e,t){let i=u(e.viewDate),s=i[0]-1,n=i[1]+1,r=s,o=[];for(;r<=n;){const e=new Date(r,0);o.push(e),t&&t(e),r++}return o}static getDatesFunction(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.days;return{[i.days]:x.getDaysDates,[i.months]:x.getMonthsDates,[i.years]:x.getYearsDates}[e]}}function F(e,t,i){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class A{constructor(e){let{dp:t,opts:i}=e;F(this,"onClickNav",e=>{let t=v(e.target,".air-datepicker-nav--action");if(!t)return;let i=t.dataset.action;this.dp[i]()}),F(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),F(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),F(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),F(this,"update",()=>{let{prevHtml:e,nextHtml:t}=this.opts;this.$prev.innerHTML=e,this.$next.innerHTML=t,this._resetNavStatus(),this.render(),this.handleNavStatus()}),F(this,"renderDelay",()=>{setTimeout(this.render)}),F(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(e,t){for(let i in t)t[i]?e.classList.add(i):e.classList.remove(i)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=t,this.opts=i,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=n(".air-datepicker-nav--title",this.$el),this.$prev=n('[data-action="prev"]',this.$el),this.$next=n('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(i.eventChangeTime,this.render))}destroy(){this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(i.eventChangeTime,this.render))}_createElement(){this.$el=r({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:e,opts:t}=this,i=t.navTitles[e.currentView];return"function"==typeof i?i(e):e.formatDate(e.viewDate,i)}handleNavStatus(){let{disableNavWhenOutOfRange:e}=this.opts,{minDate:t,maxDate:s}=this.dp;if(!t&&!s||!e)return;let{year:n,month:r}=this.dp.parsedViewDate,o=!!t&&l(t),a=!!s&&l(s);switch(this.dp.currentView){case i.days:t&&o.month>=r&&o.year>=n&&this._disableNav("prev"),s&&a.month<=r&&a.year<=n&&this._disableNav("next");break;case i.months:t&&o.year>=n&&this._disableNav("prev"),s&&a.year<=n&&this._disableNav("next");break;case i.years:{let e=u(this.dp.viewDate);t&&o.year>=e[0]&&this._disableNav("prev"),s&&a.year<=e[1]&&this._disableNav("next");break}}}_disableNav(e){n('[data-action="'+e+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){!function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];e.length?e.forEach(e=>{e.classList.remove(...i)}):e.classList.remove(...i)}(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:e,nextHtml:t}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${e}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${t}</div>`}get isNavIsFunction(){let{navTitles:e}=this.opts;return Object.keys(e).find(t=>"function"==typeof e[t])}}var E={today:{content:e=>e.locale.today,onClick:e=>e.setViewDate(new Date)},clear:{content:e=>e.locale.clear,onClick:e=>e.clear()}};class O{constructor(e){let{dp:t,opts:i}=e;this.dp=t,this.opts=i,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=r({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:e}=this.opts;Array.isArray(e)||(e=[e]),e.forEach(e=>{let t=e;"string"==typeof e&&E[e]&&(t=E[e]);let i=this.createButton(t);t.onClick&&this.attachEventToButton(i,t.onClick),this.$el.appendChild(i)})}attachEventToButton(e,t){e.addEventListener("click",()=>{t(this.dp)})}createButton(e){let{content:t,className:i,tagName:s="button",attrs:n={}}=e;return r({tagName:s,innerHtml:`<span tabindex='-1'>${"function"==typeof t?t(this.dp):t}</span>`,className:h("air-datepicker-button",i),attrs:n})}render(){this.generateButtons()}}function $(e,t,i){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class M{constructor(){let{opts:e,dp:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$(this,"toggleTimepickerIsActive",e=>{this.dp.timepickerIsActive=e}),$(this,"onChangeSelectedDate",e=>{let{date:t,updateTime:i=!1}=e;t&&(this.setMinMaxTime(t),this.setCurrentTime(!!i&&t),this.addTimeToDate(t))}),$(this,"onChangeLastSelectedDate",e=>{e&&(this.setTime(e),this.render())}),$(this,"onChangeInputRange",e=>{let t=e.target;this[t.getAttribute("name")]=t.value,this.updateText(),this.dp.trigger(i.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),$(this,"onMouseEnterLeave",e=>{let t=e.target.getAttribute("name"),i=this.$minutesText;"hours"===t&&(i=this.$hoursText),i.classList.toggle("-focus-")}),$(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),$(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=e,this.dp=t;let{timeFormat:s}=this.dp.locale;s&&(s.match(C("h"))||s.match(C("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let e="input";navigator.userAgent.match(/trident/gi)&&(e="change"),y(this.$ranges,e,this.onChangeInputRange),y(this.$ranges,"mouseenter",this.onMouseEnterLeave),y(this.$ranges,"mouseleave",this.onMouseEnterLeave),y(this.$ranges,"focus",this.onFocus),y(this.$ranges,"mousedown",this.onFocus),y(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=r({className:h("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:e,hours:t,displayHours:i,minutes:s,minHours:n,minMinutes:r,maxHours:o,maxMinutes:a,dayPeriod:l,opts:{hoursStep:c,minutesStep:u}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${d(i)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${d(s)}</span>   `+(e?`<span class='air-datepicker-time--current-ampm'>${l}</span>`:"")+'</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">'+`      <input type="range" name="hours" value="${t}" min="${n}" max="${o}" step="${c}"/>   </div>   <div class="air-datepicker-time--row">`+`      <input type="range" name="minutes" value="${s}" min="${r}" max="${a}" step="${u}"/>   </div></div>`}defineDOM(){let e=e=>n(e,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=e('[name="hours"]'),this.$minutes=e('[name="minutes"]'),this.$hoursText=e(".air-datepicker-time--current-hours"),this.$minutesText=e(".air-datepicker-time--current-minutes"),this.$ampm=e(".air-datepicker-time--current-ampm")}setTime(e){this.setMinMaxTime(e),this.setCurrentTime(e)}addTimeToDate(e){e&&(e.setHours(this.hours),e.setMinutes(this.minutes))}setMinMaxTime(e){if(this.setMinMaxTimeFromOptions(),e){let{minDate:t,maxDate:i}=this.dp;t&&p(e,t)&&this.setMinTimeFromMinDate(t),i&&p(e,i)&&this.setMaxTimeFromMaxDate(i)}}setCurrentTime(e){let{hours:t,minutes:i}=e?l(e):this;this.hours=b(t,this.minHours,this.maxHours),this.minutes=b(i,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:e,minMinutes:t,maxHours:i,maxMinutes:s}=this.opts;this.minHours=b(e,0,23),this.minMinutes=b(t,0,59),this.maxHours=b(i,0,23),this.maxMinutes=b(s,0,59)}setMinTimeFromMinDate(e){let{lastSelectedDate:t}=this.dp;this.minHours=e.getHours(),t&&t.getHours()>e.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=e.getMinutes()}setMaxTimeFromMaxDate(e){let{lastSelectedDate:t}=this.dp;this.maxHours=e.getHours(),t&&t.getHours()<e.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=e.getMinutes()}updateSliders(){o(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,o(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=d(this.displayHours),this.$minutesText.innerHTML=d(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(e){this._hours=e;let{hours:t,dayPeriod:i}=c(e);this.displayHours=this.ampm?t:e,this.dayPeriod=i}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function T(e,t,i){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class N{constructor(e){let{dp:t,opts:i}=e;T(this,"pressedKeys",new Set),T(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],e=>e.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],e=>e.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],e=>e.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],e=>e.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],e=>e.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],e=>e.year-=10],[["Control","Shift","ArrowUp"],(e,t)=>t.up()]])),T(this,"handleHotKey",e=>{let t=this.hotKeys.get(e),i=l(this.getInitialFocusDate());t(i,this.dp);let{year:s,month:n,date:r}=i,o=a(new Date(s,n));o<r&&(r=o);let c=this.dp.getClampedDate(new Date(s,n,r));this.dp.setFocusDate(c,{viewDateTransition:!0})}),T(this,"isHotKeyPressed",()=>{let e=!1,t=this.pressedKeys.size,i=e=>this.pressedKeys.has(e);for(let[s]of this.hotKeys){if(e)break;if(Array.isArray(s[0]))s.forEach(n=>{e||t!==n.length||(e=n.every(i)&&s)});else{if(t!==s.length)continue;e=s.every(i)&&s}}return e}),T(this,"isArrow",e=>e>=37&&e<=40),T(this,"onKeyDown",e=>{if(!this.dp.visible&&!this.dp.treatAsInline)return;let{key:t,which:i}=e,{dp:s,dp:{focusDate:n},opts:r}=this;this.registerKey(t);let o=this.isHotKeyPressed();if(o)return e.preventDefault(),void this.handleHotKey(o);if(this.isArrow(i))return e.preventDefault(),void this.focusNextCell(t);if("Enter"===t){if(s.currentView!==r.minView)return void s.down();if(n){let e=s._checkIfDateIsSelected(n);return void(e?s._handleAlreadySelectedDates(e,n):s.selectDate(n))}}"Escape"===t&&this.dp.hide()}),T(this,"onKeyUp",e=>{this.removeKey(e.key)}),this.dp=t,this.opts=i,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:e}=this.dp;e.addEventListener("keydown",this.onKeyDown),e.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:e}=this.dp;e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:e,currentView:t,selectedDates:s,parsedViewDate:{year:n,month:r}}=this.dp,o=e||s[s.length-1];if(!o)switch(t){case i.days:o=new Date(n,r,(new Date).getDate());break;case i.months:o=new Date(n,r,1);break;case i.years:o=new Date(n,0,1)}return o}focusNextCell(e){let t=this.getInitialFocusDate(),{currentView:s}=this.dp,{days:n,months:r,years:o}=i,a=l(t),c=a.year,d=a.month,u=a.date;switch(e){case"ArrowLeft":s===n&&(u-=1),s===r&&(d-=1),s===o&&(c-=1);break;case"ArrowUp":s===n&&(u-=7),s===r&&(d-=3),s===o&&(c-=4);break;case"ArrowRight":s===n&&(u+=1),s===r&&(d+=1),s===o&&(c+=1);break;case"ArrowDown":s===n&&(u+=7),s===r&&(d+=3),s===o&&(c+=4)}let h=this.dp.getClampedDate(new Date(c,d,u));this.dp.setFocusDate(h,{viewDateTransition:!0})}registerKey(e){this.pressedKeys.add(e)}removeKey(e){this.pressedKeys.delete(e)}}let P={on(e,t){this.__events||(this.__events={}),this.__events[e]?this.__events[e].push(t):this.__events[e]=[t]},off(e,t){this.__events&&this.__events[e]&&(this.__events[e]=this.__events[e].filter(e=>e!==t))},removeAllEvents(){this.__events={}},trigger(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];this.__events&&this.__events[e]&&this.__events[e].forEach(e=>{e(...i)})}};function V(e,t,i){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let j="",q="",R=!1;class H{static buildGlobalContainer(e){R=!0,j=r({className:e,id:e}),n("body").appendChild(j)}constructor(e,t){var o=this;if(V(this,"viewIndexes",[i.days,i.months,i.years]),V(this,"next",()=>{let{year:e,month:t}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(e,t+1,1));break;case i.months:this.setViewDate(new Date(e+1,t,1));break;case i.years:this.setViewDate(new Date(e+10,0,1))}}),V(this,"prev",()=>{let{year:e,month:t}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(e,t-1,1));break;case i.months:this.setViewDate(new Date(e-1,t,1));break;case i.years:this.setViewDate(new Date(e-10,0,1))}}),V(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),V(this,"setPosition",function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("function"==typeof(e=e||o.opts.position))return void(o.customHide=e({$datepicker:o.$datepicker,$target:o.$el,$pointer:o.$pointer,isViewChange:t,done:o._finishHide}));let i,s,{isMobile:n}=o.opts,r=o.$el.getBoundingClientRect(),a=o.$el.getBoundingClientRect(),l=o.$datepicker.offsetParent,c=o.$el.offsetParent,d=o.$datepicker.getBoundingClientRect(),u=e.split(" "),h=window.scrollY,p=window.scrollX,m=o.opts.offset,f=u[0],g=u[1];if(n)o.$datepicker.style.cssText="left: 50%; top: 50%";else{if(l===c&&l!==document.body&&(a={top:o.$el.offsetTop,left:o.$el.offsetLeft,width:r.width,height:o.$el.offsetHeight},h=0,p=0),l!==c&&l!==document.body){let e=l.getBoundingClientRect();a={top:r.top-e.top,left:r.left-e.left,width:r.width,height:r.height},h=0,p=0}switch(f){case"top":i=a.top-d.height-m;break;case"right":s=a.left+a.width+m;break;case"bottom":i=a.top+a.height+m;break;case"left":s=a.left-d.width-m}switch(g){case"top":i=a.top;break;case"right":s=a.left+a.width-d.width;break;case"bottom":i=a.top+a.height-d.height;break;case"left":s=a.left;break;case"center":/left|right/.test(f)?i=a.top+a.height/2-d.height/2:s=a.left+a.width/2-d.width/2}o.$datepicker.style.cssText=`left: ${s+p}px; top: ${i+h}px`}}),V(this,"_setInputValue",()=>{let{opts:e,$altField:t,locale:{dateFormat:i}}=this,{altFieldDateFormat:s,altField:n}=e;n&&t&&(t.value=this._getInputValue(s)),this.$el.value=this._getInputValue(i),this.$el.dispatchEvent(new Event("change"))}),V(this,"_getInputValue",e=>{let{selectedDates:t,opts:i}=this,{multipleDates:s,multipleDatesSeparator:n}=i;if(!t.length)return"";let r="function"==typeof e,o=r?e(s?t:t[0]):t.map(t=>this.formatDate(t,e));return o=r?o:o.join(n),o}),V(this,"_checkIfDateIsSelected",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.days,s=!1;return o.selectedDates.some(i=>{let n=p(e,i,t);return s=n&&i,n}),s}),V(this,"_scheduleCallAfterTransition",e=>{this._cancelScheduledCall(),e&&e(!1),this._onTransitionEnd=()=>{e&&e(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),V(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),V(this,"setViewDate",e=>{if(!((e=w(e))instanceof Date))return;if(p(e,this.viewDate))return;let t=this.viewDate;this.viewDate=e;let{onChangeViewDate:s}=this.opts;if(s){let{month:e,year:t}=this.parsedViewDate;s({month:e,year:t,decade:this.curDecade})}this.trigger(i.eventChangeViewDate,e,t)}),V(this,"setFocusDate",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!e||(e=w(e))instanceof Date)&&(o.focusDate=e,o.trigger(i.eventChangeFocusDate,e,t))}),V(this,"setCurrentView",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o.viewIndexes.includes(e)){if(o.currentView=e,o.elIsInput&&o.visible&&o.setPosition(void 0,!0),o.trigger(i.eventChangeCurrentView,e),!o.views[e]){let t=o.views[e]=new x({dp:o,opts:o.opts,type:e});o.shouldUpdateDOM&&o.$content.appendChild(t.$el)}o.opts.onChangeView&&!t.silent&&o.opts.onChangeView(e)}}),V(this,"_updateLastSelectedDate",e=>{this.lastSelectedDate=e,this.trigger(i.eventChangeLastSelectedDate,e)}),V(this,"destroy",()=>{if(this.isDestroyed)return;let{showEvent:e,isMobile:t}=this.opts,i=this.$datepicker.parentNode;i&&i.removeChild(this.$datepicker),this.$el.removeEventListener(e,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),t&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts={},this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=[],this.rangeDateFrom=null,this.rangeDateTo=null,this.isDestroyed=!0}),V(this,"update",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=_({},o.opts),{silent:n}=t;_(o.opts,e);let{timepicker:r,buttons:a,range:l,selectedDates:c,isMobile:d}=o.opts,u=o.visible||o.treatAsInline;o._createMinMaxDates(),o._limitViewDateByMaxMinDates(),o._handleLocale(),c&&(o.selectedDates=[],o.selectDate(c,{silent:n})),e.view&&o.setCurrentView(e.view,{silent:n}),o._setInputValue(),s.range&&!l?(o.rangeDateTo=!1,o.rangeDateFrom=!1):!s.range&&l&&o.selectedDates.length&&(o.rangeDateFrom=o.selectedDates[0],o.rangeDateTo=o.selectedDates[1]),s.timepicker&&!r?(u&&o.timepicker.destroy(),o.timepicker=!1,o.$timepicker.parentNode.removeChild(o.$timepicker)):!s.timepicker&&r&&o._addTimepicker(),!s.buttons&&a?o._addButtons():s.buttons&&!a?(o.buttons.destroy(),o.$buttons.parentNode.removeChild(o.$buttons)):u&&s.buttons&&a&&o.buttons.clearHtml().render(),!s.isMobile&&d?(o.treatAsInline||q||o._createMobileOverlay(),o._addMobileAttributes(),o.visible&&o._showMobileOverlay()):s.isMobile&&!d&&(o._removeMobileAttributes(),o.visible&&(q.classList.remove("-active-"),"function"!=typeof o.opts.position&&o.setPosition())),u&&(o.nav.update(),o.views[o.currentView].render(),o.currentView===i.days&&o.views[o.currentView].renderDayNames())}),V(this,"disableDate",(e,t)=>{(Array.isArray(e)?e:[e]).forEach(e=>{let i=w(e);if(!i)return;let s=t?"delete":"add";this.disabledDates[s](this.formatDate(i,"yyyy-MM-dd"));let n=this.getCell(i,this.currentViewSingular);n&&n.adpCell.render()},[])}),V(this,"enableDate",e=>{this.disableDate(e,!0)}),V(this,"isDateDisabled",e=>{let t=w(e);return this.disabledDates.has(this.formatDate(t,"yyyy-MM-dd"))}),V(this,"isOtherMonth",e=>{let{month:t}=l(e);return t!==this.parsedViewDate.month}),V(this,"isOtherYear",e=>{let{year:t}=l(e);return t!==this.parsedViewDate.year}),V(this,"isOtherDecade",e=>{let{year:t}=l(e),[i,s]=u(this.viewDate);return t<i||t>s}),V(this,"_onChangeSelectedDate",e=>{let{silent:t}=e;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!t&&this._triggerOnSelect()})}),V(this,"_onChangeFocusedDate",function(e){let{viewDateTransition:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;let i=!1;t&&(i=o.isOtherMonth(e)||o.isOtherYear(e)||o.isOtherDecade(e)),i&&o.setViewDate(e),o.opts.onFocus&&o.opts.onFocus({datepicker:o,date:e})}),V(this,"_onChangeTime",e=>{let{hours:t,minutes:i}=e,s=new Date,{lastSelectedDate:n,opts:{onSelect:r}}=this,o=n;n||(o=s);let a=this.getCell(o,this.currentViewSingular),l=a&&a.adpCell;l&&l.isDisabled||(o.setHours(t),o.setMinutes(i),n?(this._setInputValue(),r&&this._triggerOnSelect()):this.selectDate(o))}),V(this,"_onFocus",e=>{this.visible||this.show()}),V(this,"_onBlur",e=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),V(this,"_onMouseDown",e=>{this.inFocus=!0}),V(this,"_onMouseUp",e=>{this.inFocus=!1,this.$el.focus()}),V(this,"_onResize",()=>{this.visible&&"function"!=typeof this.opts.position&&this.setPosition()}),V(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),V(this,"getViewDates",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.days;return x.getDatesFunction(e)(o)}),V(this,"isWeekend",e=>this.opts.weekends.includes(e)),V(this,"getClampedDate",e=>{let{minDate:t,maxDate:i}=this,s=e;return i&&m(e,i)?s=i:t&&f(e,t)&&(s=t),s}),this.$el=n(e),!this.$el)return;this.$datepicker=r({className:"air-datepicker"}),this.opts=_({},s,t),this.$customContainer=!!this.opts.container&&n(this.opts.container),this.$altField=n(this.opts.altField||!1);let{view:a,startDate:c}=this.opts;c||(this.opts.startDate=new Date),"INPUT"===this.$el.nodeName&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=w(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=a,this.selectedDates=[],this.disabledDates=new Set,this.isDestroyed=!1,this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:e,treatAsInline:t,opts:{inline:i,isMobile:s,selectedDates:r,keyboardNav:o,onlyTimepicker:a}}=this,l=n("body");(!R||R&&j&&!l.contains(j))&&!i&&this.elIsInput&&!this.$customContainer&&H.buildGlobalContainer(H.defaultGlobalContainerId),!s||q||t||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(i||this._bindEvents(),o&&!a&&(this.keyboardNav=new N({dp:this,opts:e}))),r&&this.selectDate(r,{silent:!0}),this.opts.visible&&!t&&this.show(),s&&!t&&this.$el.setAttribute("readonly",!0),t&&this._createComponents()}_createMobileOverlay(){q=r({className:"air-datepicker-overlay"}),j.appendChild(q)}_createComponents(){let{opts:e,treatAsInline:t,opts:{inline:i,buttons:s,timepicker:n,position:r,classes:o,onlyTimepicker:a,isMobile:l}}=this;this._buildBaseHtml(),this.elIsInput&&(i||this._setPositionClasses(r)),!i&&this.elIsInput||this.$datepicker.classList.add("-inline-"),o&&this.$datepicker.classList.add(...o.split(" ")),a&&this.$datepicker.classList.add("-only-timepicker-"),l&&!t&&this._addMobileAttributes(),this.views[this.currentView]=new x({dp:this,type:this.currentView,opts:e}),this.nav=new A({dp:this,opts:e}),n&&this._addTimepicker(),s&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let e in this.views)this.views[e].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){q.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){q.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||""===this.initialReadonly||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:e,maxDate:t}=this.opts;this.minDate=!!e&&w(e),this.maxDate=!!t&&w(t)}_addTimepicker(){this.$timepicker=r({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new M({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=r({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new O({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(i.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(i.eventChangeFocusDate,this._onChangeFocusedDate),this.on(i.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:e}=this.opts;var t,i;this.elIsInput?e?(t=this.$datepicker,(i=this.$el).parentNode.insertBefore(t,i.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=n(".air-datepicker--content",this.$datepicker),this.$pointer=n(".air-datepicker--pointer",this.$datepicker),this.$nav=n(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:e,dateFormat:t,firstDay:i,timepicker:s,onlyTimepicker:n,timeFormat:r,dateTimeSeparator:o}=this.opts;var a;this.locale=(a=e,JSON.parse(JSON.stringify(a))),t&&(this.locale.dateFormat=t),void 0!==r&&""!==r&&(this.locale.timeFormat=r);let{timeFormat:l}=this.locale;if(""!==i&&(this.locale.firstDay=i),s&&"function"!=typeof t){let e=l?o:"";this.locale.dateFormat=[this.locale.dateFormat,l||""].join(e)}n&&"function"!=typeof t&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(e){if("function"==typeof e)return void this.$datepicker.classList.add("-custom-position-");let t=(e=e.split(" "))[0],i=`air-datepicker -${t}-${e[1]}- -from-${t}-`;this.$datepicker.classList.add(...i.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:e,minDate:t,maxDate:i}=this;i&&m(e,i)&&this.setViewDate(i),t&&f(e,t)&&this.setViewDate(t)}formatDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewDate,t=arguments.length>1?arguments[1]:void 0;if(e=w(e),!(e instanceof Date))return;let i=t,s=this.locale,n=l(e),r=n.dayPeriod,o=u(e),a=H.replacer,c={T:e.getTime(),m:n.minutes,mm:n.fullMinutes,h:n.hours12,hh:n.fullHours12,H:n.hours,HH:n.fullHours,aa:r,AA:r.toUpperCase(),E:s.daysShort[n.day],EEEE:s.days[n.day],d:n.date,dd:n.fullDate,M:n.month+1,MM:n.fullMonth,MMM:s.monthsShort[n.month],MMMM:s.months[n.month],yy:n.year.toString().slice(-2),yyyy:n.year,yyyy1:o[0],yyyy2:o[1]};for(let[e,t]of Object.entries(c))i=a(i,C(e),t);return i}down(e){this._handleUpDownActions(e,"down")}up(e){this._handleUpDownActions(e,"up")}selectDate(e){let t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{currentView:n,parsedViewDate:r,selectedDates:o}=this,{updateTime:a,silent:l}=s,{moveToOtherMonthsOnSelect:c,moveToOtherYearsOnSelect:d,multipleDates:u,range:h,autoClose:p,onBeforeSelect:f}=this.opts,g=o.length;if(Array.isArray(e))return e.forEach(e=>{this.selectDate(e,s)}),new Promise(e=>{setTimeout(e)});if((e=w(e))instanceof Date){if(f&&!l&&!f({date:e,datepicker:this}))return Promise.resolve();if(n===i.days&&e.getMonth()!==r.month&&c&&(t=new Date(e.getFullYear(),e.getMonth(),1)),n===i.years&&e.getFullYear()!==r.year&&d&&(t=new Date(e.getFullYear(),0,1)),t&&this.setViewDate(t),u&&!h){if(g===u)return;this._checkIfDateIsSelected(e)||o.push(e)}else if(h)switch(g){case 1:o.push(e),this.rangeDateTo||(this.rangeDateTo=e),m(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=e),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[e],this.rangeDateFrom=e,this.rangeDateTo="";break;default:this.selectedDates=[e],this.rangeDateFrom=e}else this.selectedDates=[e];return this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,silent:null==s?void 0:s.silent,date:e,updateTime:a}),this._updateLastSelectedDate(e),p&&!this.timepickerIsActive&&this.visible&&(u||h?h&&1===g&&this.hide():this.hide()),new Promise(e=>{setTimeout(e)})}}unselectDate(e){let t=this.selectedDates,s=this;if((e=w(e))instanceof Date)return t.some((n,r)=>{if(p(n,e))return t.splice(r,1),s.selectedDates.length?(s.rangeDateTo="",s.rangeDateFrom=t[0],s._updateLastSelectedDate(s.selectedDates[s.selectedDates.length-1])):(s.rangeDateFrom="",s.rangeDateTo="",s._updateLastSelectedDate(!1)),this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,date:e}),!0})}replaceDate(e,t){let s=this.selectedDates.find(t=>p(t,e,this.currentView)),n=this.selectedDates.indexOf(s);n<0||p(this.selectedDates[n],t,this.currentView)||(this.selectedDates[n]=t,this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,date:t,updateTime:!0}),this._updateLastSelectedDate(t))}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.lastSelectedDate=!1,this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,silent:e.silent}),new Promise(e=>{setTimeout(e)})}show(){let{onShow:e,isMobile:t}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,e&&this._scheduleCallAfterTransition(e),t&&this._showMobileOverlay()}hide(){let{onHide:e,isMobile:t}=this.opts,i=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(t=>{!this.customHide&&(t&&i||!t&&!i)&&this._finishHide(),e&&e(t)}),t&&q.classList.remove("-active-")}_triggerOnSelect(){let e=[],t=[],{selectedDates:i,locale:s,opts:{onSelect:n,multipleDates:r,range:o}}=this,a=r||o,l="function"==typeof s.dateFormat;i.length&&(e=i.map(g),t=l?r?s.dateFormat(e):e.map(e=>s.dateFormat(e)):e.map(e=>this.formatDate(e,s.dateFormat))),n({date:a?e:e[0],formattedDate:a?t:t[0],datepicker:this})}_handleAlreadySelectedDates(e,t){let{selectedDates:i,rangeDateFrom:s,rangeDateTo:n}=this,{range:r,toggleSelected:o}=this.opts,a=i.length,l="function"==typeof o?o({datepicker:this,date:t}):o,c=Boolean(r&&1===a&&e),d=c?g(t):t;r&&!l&&(2!==a&&this.selectDate(d),2===a&&p(s,n))||(l?this.unselectDate(d):this._updateLastSelectedDate(c?d:e))}_handleUpDownActions(e,t){if(!((e=w(e||this.focusDate||this.viewDate))instanceof Date))return;let i="up"===t?this.viewIndex+1:this.viewIndex-1;i>2&&(i=2),i<0&&(i=0),this.setViewDate(new Date(e.getFullYear(),e.getMonth(),1)),this.setCurrentView(this.viewIndexes[i])}getCell(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.day;if(!((e=w(e))instanceof Date))return;let{year:s,month:n,date:r}=l(e),o=`[data-year="${s}"]`,a=`[data-month="${n}"]`,c={[i.day]:`${o}${a}[data-date="${r}"]`,[i.month]:`${o}${a}`,[i.year]:`${o}`};return this.views[this.currentView]?this.views[this.currentView].$el.querySelector(c[t]):void 0}_showMobileOverlay(){q.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((e,t)=>parseFloat(t)+e,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return l(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return u(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===i.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===i.days}get $container(){return this.$customContainer||j}static replacer(e,t,i){return e.replace(t,function(e,t,s,n){return t+i+n})}}var B;return V(H,"defaults",s),V(H,"version","3.6.0"),V(H,"defaultGlobalContainerId","air-datepicker-global-container"),B=H.prototype,Object.assign(B,P),t.default}()},654(e,t){t.A=void 0,t.A={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"MM/dd/yyyy",timeFormat:"hh:mm aa",firstDay:0}},931(e){var t;t=()=>{var e=(()=>{var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,n={};((t,i)=>{for(var s in i)e(t,s,{get:i[s],enumerable:!0})})(n,{Iti:()=>R,default:()=>z});var r=[];for(const e of[["af","93",0,null,"0"],["ax","358",1,["18","4"],"0"],["al","355",0,null,"0"],["dz","213",0,null,"0"],["as","1",5,["684"],"1"],["ad","376"],["ao","244"],["ai","1",6,["264"],"1"],["ag","1",7,["268"],"1"],["ar","54",0,null,"0"],["am","374",0,null,"0"],["aw","297"],["ac","247"],["au","61",0,["4"],"0"],["at","43",0,null,"0"],["az","994",0,null,"0"],["bs","1",8,["242"],"1"],["bh","973"],["bd","880",0,null,"0"],["bb","1",9,["246"],"1"],["by","375",0,null,"8"],["be","32",0,null,"0"],["bz","501"],["bj","229"],["bm","1",10,["441"],"1"],["bt","975"],["bo","591",0,null,"0"],["ba","387",0,null,"0"],["bw","267"],["br","55",0,null,"0"],["io","246"],["vg","1",11,["284"],"1"],["bn","673"],["bg","359",0,null,"0"],["bf","226"],["bi","257"],["kh","855",0,null,"0"],["cm","237"],["ca","1",1,["204","226","236","249","250","257","263","289","306","343","354","365","367","368","382","403","416","418","428","431","437","438","450","468","474","506","514","519","548","579","581","584","587","604","613","639","647","672","683","705","709","742","753","778","780","782","807","819","825","867","873","879","902","905","942"],"1"],["cv","238"],["bq","599",1,["3","4","7"]],["ky","1",12,["345"],"1"],["cf","236"],["td","235"],["cl","56"],["cn","86",0,null,"0"],["cx","61",2,["4","89164"],"0"],["cc","61",1,["4","89162"],"0"],["co","57",0,null,"0"],["km","269"],["cg","242"],["cd","243",0,null,"0"],["ck","682"],["cr","506"],["ci","225"],["hr","385",0,null,"0"],["cu","53",0,null,"0"],["cw","599",0],["cy","357"],["cz","420"],["dk","45"],["dj","253"],["dm","1",13,["767"],"1"],["do","1",2,["809","829","849"],"1"],["ec","593",0,null,"0"],["eg","20",0,null,"0"],["sv","503"],["gq","240"],["er","291",0,null,"0"],["ee","372"],["sz","268"],["et","251",0,null,"0"],["fk","500"],["fo","298"],["fj","679"],["fi","358",0,["4"],"0"],["fr","33",0,null,"0"],["gf","594",0,null,"0"],["pf","689"],["ga","241"],["gm","220"],["ge","995",0,null,"0"],["de","49",0,null,"0"],["gh","233",0,null,"0"],["gi","350"],["gr","30"],["gl","299"],["gd","1",14,["473"],"1"],["gp","590",0,null,"0"],["gu","1",15,["671"],"1"],["gt","502"],["gg","44",1,["1481","7781","7839","7911"],"0"],["gn","224"],["gw","245"],["gy","592"],["ht","509"],["hn","504"],["hk","852"],["hu","36",0,null,"06"],["is","354"],["in","91",0,null,"0"],["id","62",0,null,"0"],["ir","98",0,null,"0"],["iq","964",0,null,"0"],["ie","353",0,null,"0"],["im","44",2,["1624","74576","7524","7624","7924"],"0"],["il","972",0,null,"0"],["it","39",0,["3"]],["jm","1",4,["658","876"],"1"],["jp","81",0,null,"0"],["je","44",3,["1534","7509","7700","7797","7829","7937"],"0"],["jo","962",0,null,"0"],["kz","7",1,["33","7"],"8"],["ke","254",0,null,"0"],["ki","686",0,null,"0"],["xk","383",0,null,"0"],["kw","965"],["kg","996",0,null,"0"],["la","856",0,null,"0"],["lv","371"],["lb","961",0,null,"0"],["ls","266"],["lr","231",0,null,"0"],["ly","218",0,null,"0"],["li","423",0,null,"0"],["lt","370",0,null,"0"],["lu","352"],["mo","853"],["mg","261",0,null,"0"],["mw","265",0,null,"0"],["my","60",0,null,"0"],["mv","960"],["ml","223"],["mt","356"],["mh","692",0,null,"1"],["mq","596",0,null,"0"],["mr","222"],["mu","230"],["yt","262",1,["269","639"],"0"],["mx","52"],["fm","691"],["md","373",0,null,"0"],["mc","377",0,null,"0"],["mn","976",0,null,"0"],["me","382",0,null,"0"],["ms","1",16,["664"],"1"],["ma","212",0,["6","7"],"0"],["mz","258"],["mm","95",0,null,"0"],["na","264",0,null,"0"],["nr","674"],["np","977",0,null,"0"],["nl","31",0,null,"0"],["nc","687"],["nz","64",0,null,"0"],["ni","505"],["ne","227"],["ng","234",0,null,"0"],["nu","683"],["nf","672"],["kp","850",0,null,"0"],["mk","389",0,null,"0"],["mp","1",17,["670"],"1"],["no","47",0,["4","9"]],["om","968"],["pk","92",0,null,"0"],["pw","680"],["ps","970",0,null,"0"],["pa","507"],["pg","675"],["py","595",0,null,"0"],["pe","51",0,null,"0"],["ph","63",0,null,"0"],["pl","48"],["pt","351"],["pr","1",3,["787","939"],"1"],["qa","974"],["re","262",0,null,"0"],["ro","40",0,null,"0"],["ru","7",0,["33"],"8"],["rw","250",0,null,"0"],["ws","685"],["sm","378"],["st","239"],["sa","966",0,null,"0"],["sn","221"],["rs","381",0,null,"0"],["sc","248"],["sl","232",0,null,"0"],["sg","65"],["sx","1",21,["721"],"1"],["sk","421",0,null,"0"],["si","386",0,null,"0"],["sb","677"],["so","252",0,null,"0"],["za","27",0,null,"0"],["kr","82",0,null,"0"],["ss","211",0,null,"0"],["es","34"],["lk","94",0,null,"0"],["bl","590",1,null,"0"],["sh","290"],["kn","1",18,["869"],"1"],["lc","1",19,["758"],"1"],["mf","590",2,null,"0"],["pm","508",0,null,"0"],["vc","1",20,["784"],"1"],["sd","249",0,null,"0"],["sr","597"],["sj","47",1,["4","79","9"]],["se","46",0,null,"0"],["ch","41",0,null,"0"],["sy","963",0,null,"0"],["tw","886",0,null,"0"],["tj","992"],["tz","255",0,null,"0"],["th","66",0,null,"0"],["tl","670"],["tg","228"],["tk","690"],["to","676"],["tt","1",22,["868"],"1"],["tn","216"],["tr","90",0,null,"0"],["tm","993",0,null,"8"],["tc","1",23,["649"],"1"],["tv","688"],["vi","1",24,["340"],"1"],["ug","256",0,null,"0"],["ua","380",0,null,"0"],["ae","971",0,null,"0"],["gb","44",0,null,"0"],["us","1",0,null,"1"],["uy","598",0,null,"0"],["uz","998"],["vu","678"],["va","39",1,["06698","3"]],["ve","58",0,null,"0"],["vn","84",0,null,"0"],["wf","681"],["eh","212",1,["5288","5289","6","7"],"0"],["ye","967",0,null,"0"],["zm","260",0,null,"0"],["zw","263",0,null,"0"]])r.push({name:"",iso2:e[0],dialCode:e[1],priority:e[2]||0,areaCodes:e[3]||null,nodeById:{},nationalPrefix:e[4]||null,normalisedName:"",initials:"",dialCodePlus:""});var o=r,a={ad:"Andorra",ae:"United Arab Emirates",af:"Afghanistan",ag:"Antigua & Barbuda",ai:"Anguilla",al:"Albania",am:"Armenia",ao:"Angola",ar:"Argentina",as:"American Samoa",at:"Austria",au:"Australia",aw:"Aruba",ax:"Åland Islands",az:"Azerbaijan",ba:"Bosnia & Herzegovina",bb:"Barbados",bd:"Bangladesh",be:"Belgium",bf:"Burkina Faso",bg:"Bulgaria",bh:"Bahrain",bi:"Burundi",bj:"Benin",bl:"St. Barthélemy",bm:"Bermuda",bn:"Brunei",bo:"Bolivia",bq:"Caribbean Netherlands",br:"Brazil",bs:"Bahamas",bt:"Bhutan",bw:"Botswana",by:"Belarus",bz:"Belize",ca:"Canada",cc:"Cocos (Keeling) Islands",cd:"Congo - Kinshasa",cf:"Central African Republic",cg:"Congo - Brazzaville",ch:"Switzerland",ci:"Côte d’Ivoire",ck:"Cook Islands",cl:"Chile",cm:"Cameroon",cn:"China",co:"Colombia",cr:"Costa Rica",cu:"Cuba",cv:"Cape Verde",cw:"Curaçao",cx:"Christmas Island",cy:"Cyprus",cz:"Czechia",de:"Germany",dj:"Djibouti",dk:"Denmark",dm:"Dominica",do:"Dominican Republic",dz:"Algeria",ec:"Ecuador",ee:"Estonia",eg:"Egypt",eh:"Western Sahara",er:"Eritrea",es:"Spain",et:"Ethiopia",fi:"Finland",fj:"Fiji",fk:"Falkland Islands",fm:"Micronesia",fo:"Faroe Islands",fr:"France",ga:"Gabon",gb:"United Kingdom",gd:"Grenada",ge:"Georgia",gf:"French Guiana",gg:"Guernsey",gh:"Ghana",gi:"Gibraltar",gl:"Greenland",gm:"Gambia",gn:"Guinea",gp:"Guadeloupe",gq:"Equatorial Guinea",gr:"Greece",gt:"Guatemala",gu:"Guam",gw:"Guinea-Bissau",gy:"Guyana",hk:"Hong Kong SAR China",hn:"Honduras",hr:"Croatia",ht:"Haiti",hu:"Hungary",id:"Indonesia",ie:"Ireland",il:"Israel",im:"Isle of Man",in:"India",io:"British Indian Ocean Territory",iq:"Iraq",ir:"Iran",is:"Iceland",it:"Italy",je:"Jersey",jm:"Jamaica",jo:"Jordan",jp:"Japan",ke:"Kenya",kg:"Kyrgyzstan",kh:"Cambodia",ki:"Kiribati",km:"Comoros",kn:"St. Kitts & Nevis",kp:"North Korea",kr:"South Korea",kw:"Kuwait",ky:"Cayman Islands",kz:"Kazakhstan",la:"Laos",lb:"Lebanon",lc:"St. Lucia",li:"Liechtenstein",lk:"Sri Lanka",lr:"Liberia",ls:"Lesotho",lt:"Lithuania",lu:"Luxembourg",lv:"Latvia",ly:"Libya",ma:"Morocco",mc:"Monaco",md:"Moldova",me:"Montenegro",mf:"St. Martin",mg:"Madagascar",mh:"Marshall Islands",mk:"North Macedonia",ml:"Mali",mm:"Myanmar (Burma)",mn:"Mongolia",mo:"Macao SAR China",mp:"Northern Mariana Islands",mq:"Martinique",mr:"Mauritania",ms:"Montserrat",mt:"Malta",mu:"Mauritius",mv:"Maldives",mw:"Malawi",mx:"Mexico",my:"Malaysia",mz:"Mozambique",na:"Namibia",nc:"New Caledonia",ne:"Niger",nf:"Norfolk Island",ng:"Nigeria",ni:"Nicaragua",nl:"Netherlands",no:"Norway",np:"Nepal",nr:"Nauru",nu:"Niue",nz:"New Zealand",om:"Oman",pa:"Panama",pe:"Peru",pf:"French Polynesia",pg:"Papua New Guinea",ph:"Philippines",pk:"Pakistan",pl:"Poland",pm:"St. Pierre & Miquelon",pr:"Puerto Rico",ps:"Palestinian Territories",pt:"Portugal",pw:"Palau",py:"Paraguay",qa:"Qatar",re:"Réunion",ro:"Romania",rs:"Serbia",ru:"Russia",rw:"Rwanda",sa:"Saudi Arabia",sb:"Solomon Islands",sc:"Seychelles",sd:"Sudan",se:"Sweden",sg:"Singapore",sh:"St. Helena",si:"Slovenia",sj:"Svalbard & Jan Mayen",sk:"Slovakia",sl:"Sierra Leone",sm:"San Marino",sn:"Senegal",so:"Somalia",sr:"Suriname",ss:"South Sudan",st:"São Tomé & Príncipe",sv:"El Salvador",sx:"Sint Maarten",sy:"Syria",sz:"Eswatini",tc:"Turks & Caicos Islands",td:"Chad",tg:"Togo",th:"Thailand",tj:"Tajikistan",tk:"Tokelau",tl:"Timor-Leste",tm:"Turkmenistan",tn:"Tunisia",to:"Tonga",tr:"Turkey",tt:"Trinidad & Tobago",tv:"Tuvalu",tw:"Taiwan",tz:"Tanzania",ua:"Ukraine",ug:"Uganda",us:"United States",uy:"Uruguay",uz:"Uzbekistan",va:"Vatican City",vc:"St. Vincent & Grenadines",ve:"Venezuela",vg:"British Virgin Islands",vi:"U.S. Virgin Islands",vn:"Vietnam",vu:"Vanuatu",wf:"Wallis & Futuna",ws:"Samoa",ye:"Yemen",yt:"Mayotte",za:"South Africa",zm:"Zambia",zw:"Zimbabwe",selectedCountryAriaLabel:"Change country, selected ${countryName} (${dialCode})",noCountrySelected:"Select country",countryListAriaLabel:"List of countries",searchPlaceholder:"Search",clearSearchAriaLabel:"Clear search",zeroSearchResults:"No results found",oneSearchResult:"1 result found",multipleSearchResults:"${count} results found",ac:"Ascension Island",xk:"Kosovo"},l="iti__hide",c="iti__v-hide",d="iti__arrow--up",u="iti__globe",h="iti__flag",p="iti__country",m="iti__highlight",f={ARROW_UP:"ArrowUp",ARROW_DOWN:"ArrowDown",SPACE:" ",ENTER:"Enter",ESC:"Escape",TAB:"Tab"},g={ALPHA_UNICODE:/\p{L}/u,NON_PLUS_NUMERIC:/[^+0-9]/,NON_PLUS_NUMERIC_GLOBAL:/[^+0-9]/g,HIDDEN_SEARCH_CHAR:/^[a-zA-ZÀ-ÿа-яА-Я ]$/},y="polite",v="auto",b="aria-expanded",_="aria-label",w="aria-selected",C="aria-activedescendant",k="aria-haspopup",S="aria-controls",D="aria-hidden",I="aria-autocomplete",L="aria-modal",x=e=>"undefined"!=typeof window&&"function"==typeof window.matchMedia&&window.matchMedia(e).matches,F={allowPhonewords:!1,allowDropdown:!0,autoPlaceholder:y,containerClass:"",countryOrder:null,countrySearch:!0,customPlaceholder:null,dropdownContainer:null,excludeCountries:[],fixDropdownWidth:!0,formatAsYouType:!0,formatOnDisplay:!0,geoIpLookup:null,hiddenInput:null,i18n:{},initialCountry:"",loadUtils:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",showFlags:!0,separateDialCode:!1,strictMode:!1,useFullscreenPopup:(()=>{if("undefined"!=typeof navigator&&"undefined"!=typeof window){const e=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=x("(max-width: 500px)"),i=x("(max-height: 600px)"),s=x("(pointer: coarse)");return e||t||s&&i}return!1})(),validationNumberTypes:["MOBILE"]},A=e=>e.replace(/\D/g,""),E=(e="")=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),O=e=>Object.keys(e).filter(t=>Boolean(e[t])).join(" "),$=(e,t,i)=>{const s=document.createElement(e);return t&&Object.entries(t).forEach(([e,t])=>s.setAttribute(e,t)),i&&i.appendChild(s),s},M=class{constructor(e,t,i){this.highlightedItem=null,this.selectedItem=null,e.dataset.intlTelInputId=i.toString(),this.telInput=e,this.options=t,this.id=i,this.hadInitialPlaceholder=Boolean(e.getAttribute("placeholder")),this.isRTL=!!this.telInput.closest("[dir=rtl]"),this.options.separateDialCode&&(this.originalPaddingLeft=this.telInput.style.paddingLeft)}generateMarkup(e){this.countries=e,this._prepareTelInput();const t=this._createWrapperAndInsert();this._maybeBuildCountryContainer(t),t.appendChild(this.telInput),this._maybeUpdateInputPaddingAndReveal(),this._maybeBuildHiddenInputs(t)}_prepareTelInput(){this.telInput.classList.add("iti__tel-input"),this.telInput.hasAttribute("autocomplete")||this.telInput.form?.hasAttribute("autocomplete")||this.telInput.setAttribute("autocomplete","off")}_createWrapperAndInsert(){const{allowDropdown:e,showFlags:t,containerClass:i,useFullscreenPopup:s}=this.options,n=O({iti:!0,"iti--allow-dropdown":e,"iti--show-flags":t,"iti--inline-dropdown":!s,[i]:Boolean(i)}),r=$("div",{class:n});return this.isRTL&&r.setAttribute("dir","ltr"),this.telInput.before(r),r}_maybeBuildCountryContainer(e){const{allowDropdown:t,separateDialCode:i,showFlags:s}=this.options;if(t||s||i){this.countryContainer=$("div",{class:`iti__country-container ${c}`},e),t?(this.selectedCountry=$("button",{type:"button",class:"iti__selected-country",[b]:"false",[_]:this.options.i18n.noCountrySelected,[k]:"dialog",[S]:`iti-${this.id}__dropdown-content`},this.countryContainer),this.telInput.disabled&&this.selectedCountry.setAttribute("disabled","true")):this.selectedCountry=$("div",{class:"iti__selected-country"},this.countryContainer);const s=$("div",{class:"iti__selected-country-primary"},this.selectedCountry);this.selectedCountryInner=$("div",{class:h},s),t&&(this.dropdownArrow=$("div",{class:"iti__arrow",[D]:"true"},s)),i&&(this.selectedDialCode=$("div",{class:"iti__selected-dial-code"},this.selectedCountry)),t&&this._buildDropdownContent()}}_buildDropdownContent(){const{fixDropdownWidth:e,useFullscreenPopup:t,countrySearch:i,i18n:s,dropdownContainer:n,containerClass:r}=this.options,o=e?"":"iti--flexible-dropdown-width";if(this.dropdownContent=$("div",{id:`iti-${this.id}__dropdown-content`,class:`iti__dropdown-content ${l} ${o}`,role:"dialog",[L]:"true"}),this.isRTL&&this.dropdownContent.setAttribute("dir","rtl"),i&&this._buildSearchUI(),this.countryList=$("ul",{class:"iti__country-list",id:`iti-${this.id}__country-listbox`,role:"listbox",[_]:s.countryListAriaLabel},this.dropdownContent),this._appendListItems(),i&&this.updateSearchResultsA11yText(),n){const e=O({iti:!0,"iti--container":!0,"iti--fullscreen-popup":t,"iti--inline-dropdown":!t,[r]:Boolean(r)});this.dropdown=$("div",{class:e}),this.dropdown.appendChild(this.dropdownContent)}else this.countryContainer.appendChild(this.dropdownContent)}_buildSearchUI(){const{i18n:e}=this.options,t=$("div",{class:"iti__search-input-wrapper"},this.dropdownContent);this.searchIcon=$("span",{class:"iti__search-icon",[D]:"true"},t),this.searchIcon.innerHTML=`\n  <svg class="iti__search-icon-svg" width="14" height="14" viewBox="0 0 24 24" focusable="false" ${D}="true">\n    <circle cx="11" cy="11" r="7" />\n    <line x1="21" y1="21" x2="16.65" y2="16.65" />\n  </svg>`,this.searchInput=$("input",{id:`iti-${this.id}__search-input`,type:"search",class:"iti__search-input",placeholder:e.searchPlaceholder,role:"combobox",[b]:"true",[_]:e.searchPlaceholder,[S]:`iti-${this.id}__country-listbox`,[I]:"list",autocomplete:"off"},t),this.searchClearButton=$("button",{type:"button",class:`iti__search-clear ${l}`,[_]:e.clearSearchAriaLabel,tabindex:"-1"},t),this.searchClearButton.innerHTML=(()=>{const e=`iti-${this.id}-clear-mask`;return`\n    <svg class="iti__search-clear-svg" width="12" height="12" viewBox="0 0 16 16" ${D}="true" focusable="false">\n      <mask id="${e}" maskUnits="userSpaceOnUse">\n        <rect width="16" height="16" fill="white" />\n        <path d="M5.2 5.2 L10.8 10.8 M10.8 5.2 L5.2 10.8" stroke="black" stroke-linecap="round" class="iti__search-clear-x" />\n      </mask>\n      <circle cx="8" cy="8" r="8" class="iti__search-clear-bg" mask="url(#${e})" />\n    </svg>`})(),this.searchResultsA11yText=$("span",{class:"iti__a11y-text"},this.dropdownContent),this.searchNoResults=$("div",{class:`iti__no-results ${l}`,[D]:"true"},this.dropdownContent),this.searchNoResults.textContent=e.zeroSearchResults}_maybeUpdateInputPaddingAndReveal(){this.countryContainer&&(this.updateInputPadding(),this.countryContainer.classList.remove(c))}_maybeBuildHiddenInputs(e){const{hiddenInput:t}=this.options;if(t){const i=t(this.telInput.getAttribute("name")||"");if(i.phone){const t=this.telInput.form?.querySelector(`input[name="${i.phone}"]`);t?this.hiddenInput=t:(this.hiddenInput=$("input",{type:"hidden",name:i.phone}),e.appendChild(this.hiddenInput))}if(i.country){const t=this.telInput.form?.querySelector(`input[name="${i.country}"]`);t?this.hiddenInputCountry=t:(this.hiddenInputCountry=$("input",{type:"hidden",name:i.country}),e.appendChild(this.hiddenInputCountry))}}}_appendListItems(){const e=document.createDocumentFragment();for(let t=0;t<this.countries.length;t++){const i=this.countries[t],s=O({[p]:!0}),n=$("li",{id:`iti-${this.id}__item-${i.iso2}`,class:s,tabindex:"-1",role:"option",[w]:"false"});n.dataset.dialCode=i.dialCode,n.dataset.countryCode=i.iso2,i.nodeById[this.id]=n,this.options.showFlags&&$("div",{class:`${h} iti__${i.iso2}`},n),$("span",{class:"iti__country-name"},n).textContent=i.name;const r=$("span",{class:"iti__dial-code"},n);this.isRTL&&r.setAttribute("dir","ltr"),r.textContent=`+${i.dialCode}`,e.appendChild(n)}this.countryList.appendChild(e)}updateInputPadding(){if(this.selectedCountry){const e=this.options.separateDialCode?78:42,t=(this.selectedCountry.offsetWidth||this._getHiddenSelectedCountryWidth()||e)+6;this.telInput.style.paddingLeft=`${t}px`}}_getHiddenSelectedCountryWidth(){if(this.telInput.parentNode){let e;try{e=window.top.document.body}catch(t){e=document.body}const t=this.telInput.parentNode.cloneNode(!1);t.style.visibility="hidden",e.appendChild(t);const i=this.countryContainer.cloneNode();t.appendChild(i);const s=this.selectedCountry.cloneNode(!0);i.appendChild(s);const n=s.offsetWidth;return e.removeChild(t),n}return 0}updateSearchResultsA11yText(){const{i18n:e}=this.options,t=this.countryList.childElementCount;let i;i=0===t?e.zeroSearchResults:e.searchResultsText?e.searchResultsText(t):1===t?e.oneSearchResult:e.multipleSearchResults.replace("${count}",t.toString()),this.searchResultsA11yText.textContent=i}scrollTo(e){const t=this.countryList,i=document.documentElement.scrollTop,s=t.offsetHeight,n=t.getBoundingClientRect().top+i,r=n+s,o=e.offsetHeight,a=e.getBoundingClientRect().top+i,l=a+o,c=a-n+t.scrollTop;if(a<n)t.scrollTop=c;else if(l>r){const e=s-o;t.scrollTop=c-e}}highlightListItem(e,t){const i=this.highlightedItem;if(i&&i.classList.remove(m),this.highlightedItem=e,this.highlightedItem&&(this.highlightedItem.classList.add(m),this.options.countrySearch)){const e=this.highlightedItem.getAttribute("id")||"";this.searchInput.setAttribute(C,e)}t&&this.highlightedItem.focus()}updateSelectedItem(e){if(this.selectedItem&&this.selectedItem.dataset.countryCode!==e&&(this.selectedItem.setAttribute(w,"false"),this.selectedItem=null),e&&!this.selectedItem){const t=this.countryList.querySelector(`[data-country-code="${e}"]`);t&&(t.setAttribute(w,"true"),this.selectedItem=t)}}filterCountries(e){this.countryList.innerHTML="";let t=!0;for(const i of e){const e=i.nodeById[this.id];e&&(this.countryList.appendChild(e),t&&(this.highlightListItem(e,!1),t=!1))}t?(this.highlightListItem(null,!1),this.searchNoResults&&this.searchNoResults.classList.remove(l)):this.searchNoResults&&this.searchNoResults.classList.add(l),this.countryList.scrollTop=0,this.updateSearchResultsA11yText()}destroy(){this.telInput.iti=void 0,delete this.telInput.dataset.intlTelInputId,this.options.separateDialCode&&(this.telInput.style.paddingLeft=this.originalPaddingLeft);const e=this.telInput.parentNode;e.before(this.telInput),e.remove(),this.telInput=null,this.countryContainer=null,this.selectedCountry=null,this.selectedCountryInner=null,this.selectedDialCode=null,this.dropdownArrow=null,this.dropdownContent=null,this.searchInput=null,this.searchIcon=null,this.searchClearButton=null,this.searchNoResults=null,this.searchResultsA11yText=null,this.countryList=null,this.dropdown=null,this.hiddenInput=null,this.hiddenInputCountry=null,this.highlightedItem=null,this.selectedItem=null;for(const e of this.countries)delete e.nodeById[this.id];this.countries=null}},T=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"],N=e=>{const t=A(e);if(t.startsWith("1")&&t.length>=4){const e=t.substring(1,4);return T.includes(e)}return!1};for(const e of o)e.name=a[e.iso2];var P,V=0,j=new Set(o.map(e=>e.iso2)),q=e=>j.has(e),R=class e{constructor(t,i={}){var s,n;this.id=V++,this.options={...F,...i},s=this.options,n=a,s.useFullscreenPopup&&(s.fixDropdownWidth=!1),1===s.onlyCountries.length&&(s.initialCountry=s.onlyCountries[0]),s.separateDialCode&&(s.nationalMode=!1),!s.allowDropdown||s.showFlags||s.separateDialCode||(s.nationalMode=!1),s.useFullscreenPopup&&!s.dropdownContainer&&(s.dropdownContainer=document.body),s.i18n={...n,...s.i18n},this.ui=new M(t,this.options,this.id),this.isAndroid=e._getIsAndroid(),this.promise=this._createInitPromises(),this.countries=(e=>{const{onlyCountries:t,excludeCountries:i}=e;if(t.length){const e=t.map(e=>e.toLowerCase());return o.filter(t=>e.includes(t.iso2))}if(i.length){const e=i.map(e=>e.toLowerCase());return o.filter(t=>!e.includes(t.iso2))}return o})(this.options);const{dialCodes:r,dialCodeMaxLen:l,dialCodeToIso2Map:c}=(e=>{const t=new Set;let i=0;const s={},n=(e,t)=>{if(!e||!t)return;t.length>i&&(i=t.length),s.hasOwnProperty(t)||(s[t]=[]);const n=s[t];n.includes(e)||n.push(e)},r=[...e].sort((e,t)=>e.priority-t.priority);for(const e of r){t.has(e.dialCode)||t.add(e.dialCode);for(let t=1;t<e.dialCode.length;t++){const i=e.dialCode.substring(0,t);n(e.iso2,i)}if(n(e.iso2,e.dialCode),e.areaCodes){const t=s[e.dialCode][0];for(const i of e.areaCodes){for(let s=1;s<i.length;s++){const r=i.substring(0,s),o=e.dialCode+r;n(t,o),n(e.iso2,o)}n(e.iso2,e.dialCode+i)}}}return{dialCodes:t,dialCodeMaxLen:i,dialCodeToIso2Map:s}})(this.countries);this.dialCodes=r,this.dialCodeMaxLen=l,this.dialCodeToIso2Map=c,this.countryByIso2=new Map(this.countries.map(e=>[e.iso2,e])),this._init()}static _getIsAndroid(){return"undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent)}_updateNumeralSet(e){/[\u0660-\u0669]/.test(e)?this.userNumeralSet="arabic-indic":/[\u06F0-\u06F9]/.test(e)?this.userNumeralSet="persian":this.userNumeralSet="ascii"}_mapAsciiToUserNumerals(e){if(this.userNumeralSet||this._updateNumeralSet(this.ui.telInput.value),"ascii"===this.userNumeralSet)return e;const t="arabic-indic"===this.userNumeralSet?1632:1776;return e.replace(/[0-9]/g,e=>String.fromCharCode(t+Number(e)))}_normaliseNumerals(e){if(!e)return"";if(this._updateNumeralSet(e),"ascii"===this.userNumeralSet)return e;const t="arabic-indic"===this.userNumeralSet?1632:1776,i="arabic-indic"===this.userNumeralSet?/[\u0660-\u0669]/g:/[\u06F0-\u06F9]/g;return e.replace(i,e=>String.fromCharCode(e.charCodeAt(0)-t+48))}_getTelInputValue(){const e=this.ui.telInput.value.trim();return this._normaliseNumerals(e)}_setTelInputValue(e){this.ui.telInput.value=this._mapAsciiToUserNumerals(e)}_createInitPromises(){const e=new Promise((e,t)=>{this.resolveAutoCountryPromise=e,this.rejectAutoCountryPromise=t}),t=new Promise((e,t)=>{this.resolveUtilsScriptPromise=e,this.rejectUtilsScriptPromise=t});return Promise.all([e,t])}_init(){this.selectedCountryData={},this.abortController=new AbortController,this._processCountryData(),this.ui.generateMarkup(this.countries),this._setInitialState(),this._initListeners(),this._initRequests()}_processCountryData(){var e,t;((e,t)=>{for(const i of e){const e=i.iso2.toLowerCase();t.i18n[e]&&(i.name=t.i18n[e])}})(this.countries,this.options),e=this.countries,(t=this.options).countryOrder&&(t.countryOrder=t.countryOrder.map(e=>e.toLowerCase())),e.sort((e,i)=>{const{countryOrder:s}=t;if(s){const t=s.indexOf(e.iso2),n=s.indexOf(i.iso2),r=t>-1,o=n>-1;if(r||o)return r&&o?t-n:r?-1:1}return e.name.localeCompare(i.name)}),(e=>{for(const t of e)t.normalisedName=E(t.name),t.initials=t.normalisedName.split(/[^a-z]/).map(e=>e[0]).join(""),t.dialCodePlus=`+${t.dialCode}`})(this.countries)}_setInitialState(e=!1){const t=this.ui.telInput.getAttribute("value"),i=this._normaliseNumerals(t),s=this._getTelInputValue(),n=!i||!i.startsWith("+")||s&&s.startsWith("+")?s:i,r=this._getDialCode(n),o=N(n),{initialCountry:a,geoIpLookup:l}=this.options,c=a===v&&l;if(r&&!o)this._updateCountryFromNumber(n);else if(!c||e){const e=a?a.toLowerCase():"";q(e)?this._setCountry(e):r&&o?this._setCountry("us"):this._setCountry("")}n&&this._updateValFromNumber(n)}_initListeners(){this._initTelInputListeners(),this.options.allowDropdown&&this._initDropdownListeners(),(this.ui.hiddenInput||this.ui.hiddenInputCountry)&&this.ui.telInput.form&&this._initHiddenInputListener()}_initHiddenInputListener(){this.ui.telInput.form?.addEventListener("submit",()=>{this.ui.hiddenInput&&(this.ui.hiddenInput.value=this.getNumber()),this.ui.hiddenInputCountry&&(this.ui.hiddenInputCountry.value=this.selectedCountryData.iso2||"")},{signal:this.abortController.signal})}_initDropdownListeners(){const e=this.abortController.signal,t=this.ui.telInput.closest("label");t&&t.addEventListener("click",e=>{this.ui.dropdownContent.classList.contains(l)?this.ui.telInput.focus():e.preventDefault()},{signal:e}),this.ui.selectedCountry.addEventListener("click",()=>{!this.ui.dropdownContent.classList.contains(l)||this.ui.telInput.disabled||this.ui.telInput.readOnly||this._openDropdown()},{signal:e}),this.ui.countryContainer.addEventListener("keydown",e=>{this.ui.dropdownContent.classList.contains(l)&&[f.ARROW_UP,f.ARROW_DOWN,f.SPACE,f.ENTER].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),this._openDropdown()),e.key===f.TAB&&this._closeDropdown()},{signal:e})}_initRequests(){const{loadUtils:e,initialCountry:t,geoIpLookup:i}=this.options;if(e&&!B.utils){const t=()=>{B.attachUtils(e)?.catch(()=>{})};if(B.documentReady())t();else{const e=()=>{t()};window.addEventListener("load",e,{signal:this.abortController.signal})}}else this.resolveUtilsScriptPromise();t===v&&i&&!this.selectedCountryData.iso2?this._loadAutoCountry():this.resolveAutoCountryPromise()}_loadAutoCountry(){B.autoCountry?this.handleAutoCountry():B.startedLoadingAutoCountry||(B.startedLoadingAutoCountry=!0,"function"==typeof this.options.geoIpLookup&&this.options.geoIpLookup((e="")=>{const t=e.toLowerCase();q(t)?(B.autoCountry=t,setTimeout(()=>H("handleAutoCountry"))):(this._setInitialState(!0),H("rejectAutoCountryPromise"))},()=>{this._setInitialState(!0),H("rejectAutoCountryPromise")}))}_openDropdownWithPlus(){this._openDropdown(),this.ui.searchInput.value="+",this._filterCountriesByQuery("")}_initTelInputListeners(){this._bindInputListener(),this._maybeBindKeydownListener(),this._maybeBindPasteListener()}_bindInputListener(){const{strictMode:e,formatAsYouType:t,separateDialCode:i,allowDropdown:s,countrySearch:n}=this.options;let r=!1;g.ALPHA_UNICODE.test(this._getTelInputValue())&&(r=!0),this.ui.telInput.addEventListener("input",o=>{const a=this._getTelInputValue();if(this.isAndroid&&"+"===o?.data&&i&&s&&n){const e=this.ui.telInput.selectionStart||0,t=a.substring(0,e-1),i=a.substring(e);return this._setTelInputValue(t+i),void this._openDropdownWithPlus()}this._updateCountryFromNumber(a)&&this._triggerCountryChange(),o?.data&&g.NON_PLUS_NUMERIC.test(o.data)||"insertFromPaste"===o?.inputType&&a&&!e?r=!0:g.NON_PLUS_NUMERIC.test(a)||(r=!1);const l=o?.detail&&o.detail.isSetNumber,c="ascii"===this.userNumeralSet;if(t&&!r&&!l&&c){const e=this.ui.telInput.selectionStart||0,t=a.substring(0,e).replace(g.NON_PLUS_NUMERIC_GLOBAL,"").length,i="deleteContentForward"===o?.inputType,s=((e,t,i,s,n)=>{const r=i?i.formatNumberAsYouType(e,s.iso2):e,{dialCode:o}=s;return n&&"+"!==t.charAt(0)&&r.includes(`+${o}`)?(r.split(`+${o}`)[1]||"").trim():r})(this._getFullNumber(),a,B.utils,this.selectedCountryData,this.options.separateDialCode),n=((e,t,i,s)=>{if(0===i&&!s)return 0;let n=0;for(let i=0;i<t.length;i++){if(/[+0-9]/.test(t[i])&&n++,n===e&&!s)return i+1;if(s&&n===e+1)return i}return t.length})(t,s,e,i);this._setTelInputValue(s),this.ui.telInput.setSelectionRange(n,n)}},{signal:this.abortController.signal})}_maybeBindKeydownListener(){const{strictMode:e,separateDialCode:t,allowDropdown:i,countrySearch:s}=this.options;if(e||t){const n=n=>{if(n.key&&1===n.key.length&&!n.altKey&&!n.ctrlKey&&!n.metaKey){if(t&&i&&s&&"+"===n.key)return n.preventDefault(),void this._openDropdownWithPlus();if(e){const e=this._getTelInputValue(),i=!e.startsWith("+")&&0===this.ui.telInput.selectionStart&&"+"===n.key,s=this._normaliseNumerals(n.key),r=/^[0-9]$/.test(s),o=t?r:i||r,a=this.ui.telInput,l=a.selectionStart,c=a.selectionEnd,d=e.slice(0,l),u=e.slice(c),h=d+n.key+u,p=this._getFullNumber(h),m=B.utils.getCoreNumber(p,this.selectedCountryData.iso2),f=this.maxCoreNumberLength&&m.length>this.maxCoreNumberLength,g=this._getNewCountryFromNumber(p);o&&(!f||null!==g||i)||n.preventDefault()}}};this.ui.telInput.addEventListener("keydown",n,{signal:this.abortController.signal})}}_maybeBindPasteListener(){if(this.options.strictMode){const e=e=>{e.preventDefault();const t=this.ui.telInput,i=t.selectionStart,s=t.selectionEnd,n=this._getTelInputValue(),r=n.slice(0,i),o=n.slice(s),a=this.selectedCountryData.iso2,l=e.clipboardData.getData("text"),c=this._normaliseNumerals(l),d=0===i&&s>0,u=!n.startsWith("+")||d,h=c.replace(g.NON_PLUS_NUMERIC_GLOBAL,""),p=h.startsWith("+"),m=h.replace(/\+/g,""),f=p&&u?`+${m}`:m;let y=r+f+o;if(y.length>5){let e=B.utils.getCoreNumber(y,a);for(;0===e.length&&y.length>0;)y=y.slice(0,-1),e=B.utils.getCoreNumber(y,a);if(!e)return;if(this.maxCoreNumberLength&&e.length>this.maxCoreNumberLength){if(t.selectionEnd!==n.length)return;{const t=e.length-this.maxCoreNumberLength;y=y.slice(0,y.length-t)}}}this._setTelInputValue(y);const v=i+f.length;t.setSelectionRange(v,v),t.dispatchEvent(new InputEvent("input",{bubbles:!0}))};this.ui.telInput.addEventListener("paste",e,{signal:this.abortController.signal})}}_cap(e){const t=Number(this.ui.telInput.getAttribute("maxlength"));return t&&e.length>t?e.substring(0,t):e}_trigger(e,t={}){const i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});this.ui.telInput.dispatchEvent(i)}_openDropdown(){const{fixDropdownWidth:e,countrySearch:t}=this.options;if(this.dropdownAbortController=new AbortController,e&&(this.ui.dropdownContent.style.width=`${this.ui.telInput.offsetWidth}px`),this.ui.dropdownContent.classList.remove(l),this.ui.selectedCountry.setAttribute(b,"true"),this._setDropdownPosition(),t){const e=this.ui.countryList.firstElementChild;e&&(this.ui.highlightListItem(e,!1),this.ui.countryList.scrollTop=0),this.ui.searchInput.focus()}this._bindDropdownListeners(),this.ui.dropdownArrow.classList.add(d),this._trigger("open:countrydropdown")}_setDropdownPosition(){if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.ui.dropdown),!this.options.useFullscreenPopup){const e=this.ui.telInput.getBoundingClientRect(),t=this.ui.telInput.offsetHeight;if(this.options.dropdownContainer){this.ui.dropdown.style.top=`${e.top+t}px`,this.ui.dropdown.style.left=`${e.left}px`;const i=()=>this._closeDropdown();window.addEventListener("scroll",i,{signal:this.dropdownAbortController.signal})}}}_bindDropdownListeners(){const e=this.dropdownAbortController.signal;this._bindDropdownMouseoverListener(e),this._bindDropdownCountryClickListener(e),this._bindDropdownClickOffListener(e),this._bindDropdownKeydownListener(e),this.options.countrySearch&&this._bindDropdownSearchListeners(e)}_bindDropdownMouseoverListener(e){this.ui.countryList.addEventListener("mouseover",e=>{const t=e.target?.closest(`.${p}`);t&&this.ui.highlightListItem(t,!1)},{signal:e})}_bindDropdownCountryClickListener(e){this.ui.countryList.addEventListener("click",e=>{const t=e.target?.closest(`.${p}`);t&&this._selectListItem(t)},{signal:e})}_bindDropdownClickOffListener(e){const t=e=>{e.target.closest(`#iti-${this.id}__dropdown-content`)||this._closeDropdown()};setTimeout(()=>{document.documentElement.addEventListener("click",t,{signal:e})},0)}_bindDropdownKeydownListener(e){let t="",i=null;document.addEventListener("keydown",e=>{[f.ARROW_UP,f.ARROW_DOWN,f.ENTER,f.ESC].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),e.key===f.ARROW_UP||e.key===f.ARROW_DOWN?this._handleUpDownKey(e.key):e.key===f.ENTER?this._handleEnterKey():e.key===f.ESC&&(this._closeDropdown(),this.ui.selectedCountry.focus())),!this.options.countrySearch&&g.HIDDEN_SEARCH_CHAR.test(e.key)&&(e.stopPropagation(),i&&clearTimeout(i),t+=e.key.toLowerCase(),this._searchForCountry(t),i=setTimeout(()=>{t=""},1e3))},{signal:e})}_bindDropdownSearchListeners(e){const t=()=>{const e=this.ui.searchInput.value.trim();this._filterCountriesByQuery(e),this.ui.searchInput.value?this.ui.searchClearButton.classList.remove(l):this.ui.searchClearButton.classList.add(l)};let i=null;this.ui.searchInput.addEventListener("input",()=>{i&&clearTimeout(i),i=setTimeout(()=>{t(),i=null},100)},{signal:e}),this.ui.searchClearButton.addEventListener("click",()=>{this.ui.searchInput.value="",this.ui.searchInput.focus(),t()},{signal:e})}_searchForCountry(e){const t=((e,t)=>{const i=t.toLowerCase();for(const t of e)if(t.name.toLowerCase().startsWith(i))return t;return null})(this.countries,e);if(t){const e=t.nodeById[this.id];this.ui.highlightListItem(e,!1),this.ui.scrollTo(e)}}_filterCountriesByQuery(e){let t;t=""===e?this.countries:((e,t)=>{const i=E(t),s=[],n=[],r=[],o=[],a=[],l=[];for(const t of e)t.iso2===i?s.push(t):t.normalisedName.startsWith(i)?n.push(t):t.normalisedName.includes(i)?r.push(t):i===t.dialCode||i===t.dialCodePlus?o.push(t):t.dialCodePlus.includes(i)?a.push(t):t.initials.includes(i)&&l.push(t);const c=(e,t)=>e.priority-t.priority;return[...s.sort(c),...n.sort(c),...r.sort(c),...o.sort(c),...a.sort(c),...l.sort(c)]})(this.countries,e),this.ui.filterCountries(t)}_handleUpDownKey(e){let t=e===f.ARROW_UP?this.ui.highlightedItem?.previousElementSibling:this.ui.highlightedItem?.nextElementSibling;!t&&this.ui.countryList.childElementCount>1&&(t=e===f.ARROW_UP?this.ui.countryList.lastElementChild:this.ui.countryList.firstElementChild),t&&(this.ui.scrollTo(t),this.ui.highlightListItem(t,!1))}_handleEnterKey(){this.ui.highlightedItem&&this._selectListItem(this.ui.highlightedItem)}_updateValFromNumber(e){let t=e;if(this.options.formatOnDisplay&&B.utils&&this.selectedCountryData){const e=this.options.nationalMode||!t.startsWith("+")&&!this.options.separateDialCode,{NATIONAL:i,INTERNATIONAL:s}=B.utils.numberFormat,n=e?i:s;t=B.utils.formatNumber(t,this.selectedCountryData.iso2,n)}t=this._beforeSetNumber(t),this._setTelInputValue(t)}_updateCountryFromNumber(e){const t=this._getNewCountryFromNumber(e);return null!==t&&this._setCountry(t)}_ensureHasDialCode(e){const{dialCode:t,nationalPrefix:i}=this.selectedCountryData;return e.startsWith("+")||!t?e:`+${t}${i&&e.startsWith(i)&&!this.options.separateDialCode?e.substring(1):e}`}_getNewCountryFromNumber(e){const t=e.indexOf("+");let i=t?e.substring(t):e;const s=this.selectedCountryData.iso2,n=this.selectedCountryData.dialCode;i=this._ensureHasDialCode(i);const r=this._getDialCode(i,!0),o=A(i);if(r){const e=A(r),t=this.dialCodeToIso2Map[e];if(1===t.length)return t[0]===s?null:t[0];if(!s&&this.defaultCountry&&t.includes(this.defaultCountry))return this.defaultCountry;if("1"===n&&N(o))return null;const{areaCodes:i,priority:a}=this.selectedCountryData;if(i){const e=i.map(e=>`${n}${e}`);for(const t of e)if(o.startsWith(t))return null}const l=i&&!(0===a)&&o.length>e.length,c=s&&t.includes(s)&&!l,d=s===t[0];if(!c&&!d)return t[0]}else{if(i.startsWith("+")&&o.length){const e=this.selectedCountryData.dialCode||"";return e&&e.startsWith(o)?null:""}if(!(i&&"+"!==i||s))return this.defaultCountry}return null}_setCountry(e){const{separateDialCode:t,showFlags:i,i18n:s,allowDropdown:n}=this.options,r=this.selectedCountryData.iso2||"";if(n&&this.ui.updateSelectedItem(e),this.selectedCountryData=e?this.countryByIso2.get(e):{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.ui.selectedCountry){const t=e&&i?`${h} iti__${e}`:`${h} ${u}`;let n,r;if(e){const{name:e,dialCode:t}=this.selectedCountryData;r=e,n=s.selectedCountryAriaLabel.replace("${countryName}",e).replace("${dialCode}",`+${t}`)}else r=s.noCountrySelected,n=s.noCountrySelected;this.ui.selectedCountryInner.className=t,this.ui.selectedCountry.setAttribute("title",r),this.ui.selectedCountry.setAttribute(_,n)}if(t){const e=this.selectedCountryData.dialCode?`+${this.selectedCountryData.dialCode}`:"";this.ui.selectedDialCode.textContent=e,this.ui.updateInputPadding()}return this._updatePlaceholder(),this._updateMaxLength(),r!==e}_updateMaxLength(){const{strictMode:e,placeholderNumberType:t,validationNumberTypes:i}=this.options,{iso2:s}=this.selectedCountryData;if(e&&B.utils)if(s){const e=B.utils.numberType[t];let n=B.utils.getExampleNumber(s,!1,e,!0),r=n;for(;B.utils.isPossibleNumber(n,s,i);)r=n,n+="0";const o=B.utils.getCoreNumber(r,s);this.maxCoreNumberLength=o.length,"by"===s&&(this.maxCoreNumberLength=o.length+1)}else this.maxCoreNumberLength=null}_updatePlaceholder(){const{autoPlaceholder:e,placeholderNumberType:t,nationalMode:i,customPlaceholder:s}=this.options,n="aggressive"===e||!this.ui.hadInitialPlaceholder&&e===y;if(B.utils&&n){const e=B.utils.numberType[t];let n=this.selectedCountryData.iso2?B.utils.getExampleNumber(this.selectedCountryData.iso2,i,e):"";n=this._beforeSetNumber(n),"function"==typeof s&&(n=s(n,this.selectedCountryData)),this.ui.telInput.setAttribute("placeholder",n)}}_selectListItem(e){const t=e.dataset.countryCode,i=this._setCountry(t);this._closeDropdown();const s=e.dataset.dialCode;if(this._updateDialCode(s),this.options.formatOnDisplay){const e=this._getTelInputValue();this._updateValFromNumber(e)}this.ui.telInput.focus(),i&&this._triggerCountryChange()}_closeDropdown(){this.ui.dropdownContent.classList.contains(l)||(this.ui.dropdownContent.classList.add(l),this.ui.selectedCountry.setAttribute(b,"false"),this.options.countrySearch&&(this.ui.searchInput.removeAttribute(C),this.ui.highlightedItem&&(this.ui.highlightedItem.classList.remove(m),this.ui.highlightedItem=null)),this.ui.dropdownArrow.classList.remove(d),this.dropdownAbortController.abort(),this.dropdownAbortController=null,this.options.dropdownContainer&&this.ui.dropdown.remove(),this._trigger("close:countrydropdown"))}_updateDialCode(e){const t=this._getTelInputValue(),i=`+${e}`;let s;if(t.startsWith("+")){const e=this._getDialCode(t);s=e?t.replace(e,i):i,this._setTelInputValue(s)}}_getDialCode(e,t){let i="";if(e.startsWith("+")){let s="",n=!1;for(let r=0;r<e.length;r++){const o=e.charAt(r);if(/[0-9]/.test(o)){if(s+=o,!Boolean(this.dialCodeToIso2Map[s]))break;if(this.dialCodes.has(s)){if(i=e.substring(0,r+1),n=!0,!t)break}else t&&n&&(i=e.substring(0,r+1));if(s.length===this.dialCodeMaxLen)break}}}return i}_getFullNumber(e){const t=e?this._normaliseNumerals(e):this._getTelInputValue(),{dialCode:i}=this.selectedCountryData;let s;const n=A(t);return s=this.options.separateDialCode&&!t.startsWith("+")&&i&&n?`+${i}`:"",s+t}_beforeSetNumber(e){const t=((e,t,i,s)=>{let n=e;if(i&&t){const e=" "===n[(t=`+${s.dialCode}`).length]||"-"===n[t.length]?t.length+1:t.length;n=n.substring(e)}return n})(e,this._getDialCode(e),this.options.separateDialCode,this.selectedCountryData);return this._cap(t)}_triggerCountryChange(){this._trigger("countrychange")}handleAutoCountry(){this.options.initialCountry===v&&B.autoCountry&&(this.defaultCountry=B.autoCountry,this.selectedCountryData.iso2||this.ui.selectedCountryInner.classList.contains(u)||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}handleUtils(){if(B.utils){const e=this._getTelInputValue();e&&this._updateValFromNumber(e),this.selectedCountryData.iso2&&(this._updatePlaceholder(),this._updateMaxLength())}this.resolveUtilsScriptPromise()}destroy(){this.ui.telInput&&(this.options.allowDropdown&&this._closeDropdown(),this.abortController.abort(),this.abortController=null,this.ui.destroy(),B.instances instanceof Map?B.instances.delete(this.id):delete B.instances[this.id])}getExtension(){return B.utils?B.utils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}getNumber(e){if(B.utils){const{iso2:t}=this.selectedCountryData,i=this._getFullNumber(),s=B.utils.formatNumber(i,t,e);return this._mapAsciiToUserNumerals(s)}return""}getNumberType(){return B.utils?B.utils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}getSelectedCountryData(){return this.selectedCountryData}getValidationError(){if(B.utils){const{iso2:e}=this.selectedCountryData;return B.utils.getValidationError(this._getFullNumber(),e)}return-99}isValidNumber(){const{dialCode:e,iso2:t}=this.selectedCountryData;if("44"===e&&B.utils){const e=this._getFullNumber(),i=B.utils.getCoreNumber(e,t);if("7"===i[0]&&10!==i.length)return!1}return this._validateNumber(!1)}isValidNumberPrecise(){return this._validateNumber(!0)}_utilsIsPossibleNumber(e){return B.utils?B.utils.isPossibleNumber(e,this.selectedCountryData.iso2,this.options.validationNumberTypes):null}_validateNumber(e){if(!B.utils)return null;if(!this.selectedCountryData.iso2)return!1;const t=t=>e?this._utilsIsValidNumber(t):this._utilsIsPossibleNumber(t),i=this._getFullNumber(),s=i.search(g.ALPHA_UNICODE);if(s>-1&&!this.options.allowPhonewords){const e=t(i.substring(0,s)),n=t(i);return e&&n}return t(i)}_utilsIsValidNumber(e){return B.utils?B.utils.isValidNumber(e,this.selectedCountryData.iso2,this.options.validationNumberTypes):null}setCountry(e){const t=e?.toLowerCase();if(!q(t))throw new Error(`Invalid country code: '${t}'`);const i=this.selectedCountryData.iso2;if(e&&t!==i||!e&&i){if(this._setCountry(t),this._updateDialCode(this.selectedCountryData.dialCode),this.options.formatOnDisplay){const e=this._getTelInputValue();this._updateValFromNumber(e)}this._triggerCountryChange()}}setNumber(e){const t=this._normaliseNumerals(e),i=this._updateCountryFromNumber(t);this._updateValFromNumber(t),i&&this._triggerCountryChange(),this._trigger("input",{isSetNumber:!0})}setPlaceholderNumberType(e){this.options.placeholderNumberType=e,this._updatePlaceholder()}setDisabled(e){this.ui.telInput.disabled=e,e?this.ui.selectedCountry.setAttribute("disabled","true"):this.ui.selectedCountry.removeAttribute("disabled")}},H=(e,...t)=>{Object.values(B.instances).forEach(i=>{const s=i[e];"function"==typeof s&&s.apply(i,t)})},B=Object.assign((e,t)=>{const i=new R(e,t);return B.instances[i.id]=i,e.iti=i,i},{defaults:F,documentReady:()=>"complete"===document.readyState,getCountryData:()=>o,getInstance:e=>{const t=e.dataset.intlTelInputId;return t?B.instances[t]:null},instances:{},attachUtils:e=>{if(!B.utils&&!B.startedLoadingUtilsScript){let t;if("function"!=typeof e)return Promise.reject(new TypeError("The argument passed to attachUtils must be a function that returns a promise for the utilities module, not "+typeof e));try{t=Promise.resolve(e())}catch(e){return Promise.reject(e)}return B.startedLoadingUtilsScript=!0,t.then(e=>{const t=e?.default;if(!t||"object"!=typeof t)throw new TypeError("The loader function passed to attachUtils did not resolve to a module object with utils as its default export.");return B.utils=t,H("handleUtils"),!0}).catch(e=>{throw H("rejectUtilsScriptPromise",e),e})}return null},startedLoadingUtilsScript:!1,startedLoadingAutoCountry:!1,version:"25.15.0"}),z=B;return P=n,((n,r,o,a)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let o of i(r))s.call(n,o)||undefined===o||e(n,o,{get:()=>r[o],enumerable:!(a=t(r,o))||a.enumerable});return n})(e({},"__esModule",{value:!0}),P)})();return e.default},e.exports?e.exports=t():window.intlTelInput=t()}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return n[e].call(i.exports,i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};o.r(a),o.d(a,{addOtherFieldValidation:()=>ne,apiFetch:()=>x,applyValidationRules:()=>E,base64ToFile:()=>q,conditionFunctions:()=>U,decodeHtmlEntities:()=>me,dispatchFieldInteractionEvent:()=>w,formgent_field_id_prefix:()=>O,gbToBytes:()=>V,generateFormToken:()=>y,getBlockAttributes:()=>k,getCurrentValidator:()=>ie,getNumericValue:()=>le,getObjectNextItem:()=>S,getObjectPreviousItem:()=>D,getOtherValueInRepeater:()=>ae,getPageBreaks:()=>ce,get_validation_message:()=>M,isCurrentPageLastBreak:()=>ue,isEnterOrSpace:()=>pe,isTheFinalPageBreak:()=>de,isValidDate:()=>v,isValidDateTime:()=>_,isValidTime:()=>b,kbToBytes:()=>N,lodash:()=>I,mbToBytes:()=>P,moment:()=>L,normalizeRepeaterData:()=>he,outdatedStepAnswers:()=>Q,preventDefaults:()=>g,quizReplaceEndBlockContent:()=>p,quizReplacePlaceholders:()=>h,quizResultHTML:()=>m,removeOtherFieldValidation:()=>se,removeUploadedFile:()=>ee,scrollToView:()=>oe,stepAnswersData:()=>Y,stepHistory:()=>G,stepIds:()=>$,submittedRoute:()=>Z,tbToBytes:()=>j,trackOutdatedAnswers:()=>X,trackStepAnswer:()=>J,trackStepTransition:()=>W,updateInputValue:()=>C,uploadFile:()=>te,videoActions:()=>T});var l={};o.r(l),o.d(l,{fileDragEnter:()=>je,fileDragLeave:()=>qe,fileDrop:()=>Re,handleRemoveFileKeydown:()=>We,handleUploadAreaKeydown:()=>Be,onChangeFile:()=>He,removeFile:()=>Ge});var c={};o.r(c),o.d(c,{clearRatingCache:()=>Lt,handleRatingKeydown:()=>Ct,ratingOptions:()=>xt,updateRating:()=>wt});const d='\n\t\t\t<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M20.7071 5.29289C21.0976 5.68342 21.0976 6.31658 20.7071 6.70711L9.70711 17.7071C9.31658 18.0976 8.68342 18.0976 8.29289 17.7071L3.29289 12.7071C2.90237 12.3166 2.90237 11.6834 3.29289 11.2929C3.68342 10.9024 4.31658 10.9024 4.70711 11.2929L9 15.5858L19.2929 5.29289C19.6834 4.90237 20.3166 4.90237 20.7071 5.29289Z" fill="#14B570"/>\n</svg>\n\t\t',u='\n\t<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t<path fill-rule="evenodd" clip-rule="evenodd" d="M7.34171 7.34171C7.79732 6.8861 8.53601 6.8861 8.99162 7.34171L14 12.3501L19.0084 7.34171C19.464 6.8861 20.2027 6.8861 20.6583 7.34171C21.1139 7.79732 21.1139 8.53601 20.6583 8.99162L15.6499 14L20.6583 19.0084C21.1139 19.464 21.1139 20.2027 20.6583 20.6583C20.2027 21.1139 19.464 21.1139 19.0084 20.6583L14 15.6499L8.99162 20.6583C8.53601 21.1139 7.79732 21.1139 7.34171 20.6583C6.8861 20.2027 6.8861 19.464 7.34171 19.0084L12.3501 14L7.34171 8.99162C6.8861 8.53601 6.8861 7.79732 7.34171 7.34171Z" fill="#D94A4A"/>\n\t</svg>\n';function h(e,t){return t?(/{{(points|total_points|percentage|grade)}}/g.test(e)&&(e=(e=(e=(e=e.replace(/{{points}}/g,t.total_score||"0")).replace(/{{total_points}}/g,t.total_points||"0")).replace(/{{percentage}}/g,t.percentage||"0")).replace(/{{grade}}/g,t.grade||"")),e):e}function p(e,t){if(!t)return;const i=e.querySelector(".wp-block-formgent-end");i&&i.querySelectorAll("h2, p").forEach(e=>{let i=e.innerHTML;e.innerHTML=h(i,t)})}function m(e){const t=e?.fields,i=function(e){return Object.values(e).map(e=>{let t=!1,i="";const s=e.total_points?`${e.total_score||0}/${e.total_points}`:`${e.score||0}/${e.points||0}`;if("text"===e.field_type||"textarea"===e.field_type)t=!0===e.is_correct;else if(e.options){const i=e.options.filter(e=>e.is_selected&&e.is_correct);if("multiple-choice"===e.field_type){const s=e.options.filter(e=>e.is_correct),n=e.options.filter(e=>e.is_selected&&!e.is_correct);t=i.length===s.length&&0===n.length}else t=1===i.length}const n=function(e){var t;return"text"===e.field_type||"textarea"===e.field_type?`\n\t\t\t<div class="formgent-quiz-answer formgent-quiz-answer--text ${!0===e.is_correct?"formgent-quiz-answer--correct":"formgent-quiz--wrong"}">\n\t\t\t\t<div class="formgent-quiz-answer__content">${null!==(t=e?.submitted_answer)&&void 0!==t?t:""}</div>\n\t\t\t</div>\n\t\t`:e.options?e.options.map((t,i)=>{var s;const{class:n,icon:r}=(e=>e.is_selected&&e.is_correct?{class:"formgent-selected-correct",icon:d}:e.is_selected&&!e.is_correct?{class:"formgent-selected-incorrect",icon:u}:{class:"",icon:""})(t),o=null!==(s=t?.label)&&void 0!==s?s:"",a=`option-${i}-${e.field_type}`;return t.is_selected&&t.is_correct,["multiple-choice","single-choice"].includes(e.field_type)?`\n\t\t\t\t<div class="formgent-quiz-answer formgent-quiz-answer--options ${n}">\n\t\t\t\t\t<div class='formgent-quiz-answer__content'>\n\t\t\t\t\t\t<input type="${"multiple-choice"===e.field_type?"checkbox":"radio"}" name="${a}" id="${a}" ${t.is_selected?"checked":""} disabled>\n\t\t\t\t\t\t<label for="${a}">${o}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='formgent-quiz-answer__icon'>${r}</div>\n\t\t\t\t</div>\n\t\t\t`:"dropdown"===e.field_type?`\n\t\t\t\t<div class="formgent-quiz-answer ${n}">\n\t\t\t\t\t<div class='formgent-quiz-answer__content'>\n\t\t\t\t\t\t<div class="formgent-quiz-answer__count">${i+1}.</div>\n\t\t\t\t\t\t<div class="formgent-quiz-answer__text">${o}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='formgent-quiz-answer__icon'>${r}</div>\n\t\t\t\t</div>\n\t\t\t`:""}).join(""):""}(e);if(!t)if("text"===e.field_type||"textarea"===e.field_type)i=`\n\t\t\t\t\t<div class="formgent-correct-answer-block">\n\t\t\t\t\t\t<div class="formgent-correct-answer-block__label">Correct Answer:</div>\n\t\t\t\t\t\t<div class="formgent-correct-answer__content">${e.correct_answer}</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;else if(e.options){e.field_type,e.options.filter(e=>e.is_correct);const t=function(e){return e.options.filter(e=>e.is_correct).map((t,i)=>{var s;const n=null!==(s=t?.label)&&void 0!==s?s:"",r=`option-${i}-${e.field_type}`;return t.is_selected&&t.is_correct,["multiple-choice","single-choice"].includes(e.field_type)?`\n\t\t\t\t<div class="formgent-quiz-answer formgent-quiz-answer--options">\n\t\t\t\t\t<div class='formgent-quiz-answer__content'>\n\t\t\t\t\t\t<input type="${"multiple-choice"===e.field_type?"checkbox":"radio"}" name="${r}" id="${r}" checked disabled>\n\t\t\t\t\t\t<label for="${r}">${n}</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`:"dropdown"===e.field_type?`\n\t\t\t\t<div class="formgent-quiz-answer">\n\t\t\t\t\t<div class='formgent-quiz-answer__content'>\n\t\t\t\t\t\t<div class="formgent-quiz-answer__count">${i+1}.</div>\n\t\t\t\t\t\t<div class="formgent-quiz-answer__text">${n}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`:""}).join("")}(e);i=`\n\t\t\t\t\t<div class="formgent-correct-answer-block">\n\t\t\t\t\t\t<div class="formgent-correct-answer-block__label">Correct Answer:</div>\n\t\t\t\t\t\t<div class="formgent-correct-answer__content">\n\t\t\t\t\t\t\t<div class="formgent-correct-answer__correct-options">${t}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`}return`\n\t\t\t<div class="formgent-quiz-card">\n\t\t\t\t<div class="formgent-quiz-card__header ${t?"formgent-quiz-card__header--correct":"formgent-quiz-card__header--wrong"}">\n\t\t\t\t\t<span class="formgent-quiz-card__title">\n\t\t\t\t\t\t<span class="formgent-quiz-card__title-icon">${t?d:u}</span>\n\t\t\t\t\t\t<span class="formgent-quiz-card__title-text">${e.label}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="formgent-quiz-card__score">${s}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="formgent-quiz-card__body">\n\t\t\t\t\t${n}\n\t\t\t\t\t${i}\n\t\t\t\t</div>\n\t\t\t</div>`}).join("")}(t);return`\n\t\t<div class="formgent-quiz-result__title">Your answers summary:</div>\n\t\t${i}`}const f=class{constructor(e={}){this.variables=e,this.allowedFunctions=["abs","ceil","floor","round","trunc","sin","cos","tan","asin","acos","atan","exp","log","log10","sqrt","cbrt","sinh","cosh","tanh","asinh","acosh","atanh"],this.multiArgFunctions=["max","min"],this.customFunctions={sum:(...e)=>e.reduce((e,t)=>e+t,0),average:(...e)=>e.reduce((e,t)=>e+t,0)/e.length}}setVariables(e){this.variables={...this.variables,...e}}evaluate(e,t=null){try{const i=this.replaceVariables(e),s=this.convertToJS(i);let n=new Function(...Object.keys(this.customFunctions),`return (${s});`)(...Object.values(this.customFunctions));if("number"==typeof t){const e=Math.pow(10,t);n=Math.round(n*e)/e}return n}catch(e){return console.error("MathFormula Error:",e.message),null}}replaceVariables(e){return e.replace(/\b[a-zA-Z_]\w*\b/g,e=>this.variables.hasOwnProperty(e)?this.variables[e]:e)}convertToJS(e){let t=e;t=this.convertPowerOperator(t),t=t.replace(/(\w+)\s+mod\s+(\w+)/g,"($1 % $2)"),t=t.replace(/if\s*\(([^)]+)\)\s*([^\s]+)\s*/gi,"($1) ? $2 ").replace(/elseif\s*\(([^)]+)\)\s*([^\s]+)\s*/gi,": ($1) ? $2 ").replace(/else\s*([^\s]+)/gi,": $1");for(const e of this.allowedFunctions){const i=new RegExp(`\\b${e}\\s*\\(([^)]+)\\)`,"gi");t=t.replace(i,`Math.${e}($1)`)}for(const e of this.multiArgFunctions){const i=new RegExp(`\\b${e}\\s*\\(([^()]+?)\\)`,"gi");t=t.replace(i,`Math.${e}($1)`)}for(const e in this.customFunctions){const i=new RegExp(`\\b${e}\\s*\\(([^()]+?)\\)`,"gi");t=t.replace(i,`${e}($1)`)}return t=t.replace(/\bMath\.log10\(([^)]+)\)/g,"(Math.log($1) / Math.LN10)"),t}convertPowerOperator(e){const t=(e,t,i)=>{let s=0,n=t;const r=1===i?1:-1;for(;n>=0&&n<e.length;){if("("===e[n]?s+=r:")"===e[n]&&(s-=r),0===s)return n;n+=r}return-1},i=(e,i,s)=>{let n,r;if(-1===s){let s=i-1;for(;s>=0&&/\s/.test(e[s]);)s--;if(s>=0&&")"===e[s]){const o=t(e,s,-1);if(-1!==o){let t=o-1;for(;t>=0&&/\s/.test(e[t]);)t--;for(;t>=0&&/[\w.]/.test(e[t]);)t--;t++,n=t<o?t:o,r=i}else{for(n=s;n>=0&&/[\w.]/.test(e[n]);)n--;n++,r=i}}else{for(n=s;n>=0;){const i=e[n];if(!/[\w.]/.test(i)&&!/\s/.test(i)){if(")"===i){const i=t(e,n,-1);if(-1!==i){let t=i-1;for(;t>=0&&/\s/.test(e[t]);)t--;for(;t>=0&&/[\w.]/.test(e[t]);)t--;t++,n=t<i?t:i}break}n++;break}n--}n<0&&(n=0),r=i}}else{let s=i+1;for(;s<e.length&&/\s/.test(e[s]);)s++;if(s<e.length&&"("===e[s]){const o=t(e,s,1);if(-1!==o)n=i+1,r=o+1;else for(n=i+1,r=s;r<e.length&&/[\w.]/.test(e[r]);)r++}else for(n=i+1,r=s;r<e.length;){const i=e[r];if(!/[\w.]/.test(i)&&!/\s/.test(i)){if("("===i){const i=t(e,r,1);-1!==i&&(r=i+1);break}break}r++}}for(;n<r&&/\s/.test(e[n]);)n++;for(;r>n&&/\s/.test(e[r-1]);)r--;return{start:n,end:r}};let s=e,n=0;for(;n<100;){n++;let e=-1;for(let t=s.length-1;t>=0;t--)if("^"===s[t]&&!s.substring(Math.max(0,t-8),t).endsWith("Math.pow")){e=t;break}if(-1===e)break;const t=i(s,e,-1),r=i(s,e,1),o=`Math.pow(${s.substring(t.start,t.end).trim()}, ${s.substring(r.start,r.end).trim()})`;s=s.substring(0,t.start)+o+s.substring(r.end)}return s}};function g(e){e.preventDefault(),e.stopPropagation()}async function y(e){if(!e.global.is_response_token_generating&&!e.global?.response_token){e.global.is_response_token_generating=!0;try{const t=await x({path:"formgent/responses/generate-token",method:"POST",data:{form_id:e.form_id,external_data:e.external_data}});e.global.response_token=t.response_token,e.global.is_form_started=!0}catch(e){console.log(e)}e.global.is_response_token_generating=!1}}function v(e){return/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/.test(e)&&!isNaN(new Date(e.split("/").reverse().join("/")).getTime())}function b(e){return/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|\d)$/.test(e)}function _(e){const[t,i]=e.split(" ");return!(!/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/.test(t)||!/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|\d)$/.test(i))&&!isNaN(new Date(t.split("/").reverse().join("/")).getTime())}function w(e,t){if(!t?.global)return;let i;t.global.field_interaction_state||(t.global.field_interaction_state={}),i=t?.repeater_name?t.repeater_name:t?.parent_name?t.parent_name:t.name;const s=new CustomEvent("fieldInteraction",{detail:{fieldName:i,field_interaction_state:t.global.field_interaction_state,context:t,element:e}});document.dispatchEvent(s)}function C(i=null,s=null,n=null){if(n||(n=e()),!k(n))return;s||(s=t()),null===i&&(i=s.ref.value);const{name:r,parent_name:o,repeater_name:a,repeater_item:l,field_type:c}=n;if("payment-item"===c&&i&&"object"==typeof i&&!Array.isArray(i)&&1===Object.keys(i).length&&!0===Object.values(i)[0]&&(i=Object.keys(i)[0]),a&&i&&"object"==typeof i&&!Array.isArray(i)&&1===Object.keys(i).length&&!0===Object.values(i)[0]&&(i=Object.keys(i)[0]),a&&i&&"object"==typeof i&&!Array.isArray(i)){const e={};for(const[t,s]of Object.entries(i))"formgent_other"===t&&s&&"object"==typeof s&&!0===s.checked&&"string"==typeof s.value?e[t]=s.value:e[t]=s;i=e}let d=n.data;var u,h,p,m;o&&!a&&(d=(u=d)[o]||(u[o]={})),a&&"number"==typeof l?((h=d)[a]||(h[a]=[]),(p=d[a])[l]||(p[l]={}),o?((m=d[a][l])[o]||(m[o]={}),d[a][l][o][r]=i):d[a][l][r]=i):d[r]=i,w(s,n),y(n)}function k(t){t||(t=e());const{name:i,root_parent_name:s,parent_name:n,repeater_name:r,blocks_settings:o}=t;if(!o)return null;let a=o;return s&&o[s]&&(a=o[s].children),r&&a&&a[r]&&(a=a[r].children),n&&a&&a[n]&&(a=a[n].children),a?.[i]}function S(e,t){const i=Object.keys(e),s=i.indexOf(t);return s<i.length-1?I().get(e,i[s+1],null):null}function D(e,t){const i=Object.keys(e),s=i.indexOf(t);return s>0?I().get(e,i[s-1],null):null}function I(){return window.lodash||window._}function L(){return window.moment}function x(e){return wp.apiFetch(e)}const F=["single-choice","multiple-choice"],A={"(000) 000-0000":/^\(\d{3}\) \d{3}-\d{4}$/,"(00) 0000-0000":/^\(\d{2}\) \d{4}-\d{4}$/,"00/00/0000":/^\d{2}\/\d{2}\/\d{4}$/,"00:00:00":/^\d{2}:\d{2}:\d{2}$/,"00/00/0000 00:00:00":/^\d{2}\/\d{2}\/\d{4} \d{2}:\d{2}:\d{2}$/,"00/00":/^\d{2}\/\d{2}$/,"00000":/^\d{5}$/};function E(t,i,s,n={}){if("repeater"===t.field_type){for(const e in t.children)E(t.children[e],i,s,n);return}if("name"===t.field_type||"address"===t.field_type){for(const e in t.children)E(t.children[e],i,s,n);return}let r=function(e){const{field_type:t}=e;let i=[],s={};switch(e?.required?i.push("required"):"gdpr"===t&&i.push("gdpr"),t){case"email":i.push("email");break;case"website":i.push("url");break;case"input-masking":e.mask_type&&"none"!==e.mask_type&&(s.mask=A[e.mask_type],i.push("mask"));break;case"number":e.limit&&(s.min=e.min,s.max=e.max,i.push("min_number","max_number")),i.push("number")}return e.character_limit&&(s.limit=e.limit,i.push("max_length")),function(e=[],t={}){let i={required:{rule:"required",errorMessage:M("required")},email:{rule:"email",errorMessage:M("email")},number:{rule:"number",errorMessage:M("number")},url:{rule:"customRegexp",value:/^(https?:\/\/)(www\.)?[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,})(\/\S*)?$/,errorMessage:M("url")},mask:{rule:"customRegexp",value:t?.mask,errorMessage:M("input_mask")},min_number:{rule:"minNumber",value:parseFloat(t?.min),errorMessage:M("min").replaceAll("{limit}",t?.min)},max_number:{rule:"maxNumber",value:parseFloat(t?.max),errorMessage:M("max").replaceAll("{limit}",t?.max)},max_length:{rule:"maxLength",value:parseFloat(t?.limit),errorMessage:M("character_limit").replaceAll("{limit}",t?.limit)},gdpr:{rule:"required",errorMessage:M("gdpr")}};return e.map(e=>i[e]).filter(Boolean)}(i,s)}(t);if(r.length>0)if("file-upload"===t.field_type){const n=e(),o=i.ref.querySelector(`#${O(t.id)}`),a=o?.closest(".formgent-field");if(a&&a.hasAttribute("hidden")){try{s.removeField(o)}catch(e){}return}const l=r.map(e=>"required"===e.rule?{validator:e=>{const i=n?.parent_name?n.data[n.parent_name]?.[t.name]:n.data[t.name];return Array.isArray(i)&&i.length>0},errorMessage:e.errorMessage}:e);o&&s.addField(o,l)}else if("range-slider"===t.field_type){const e=i.ref.querySelector(`#${O(t.id)}`),n=e?.closest(".formgent-field");if(n&&n.hasAttribute("hidden")){try{const t=e.closest(".formgent-field-single__wrapper")?.querySelector(".formgent-validate-field-input");t&&s.removeField(t)}catch(e){}return}const o=e?.closest(".formgent-field-single__wrapper")?.querySelector(".formgent-validate-field-input");o&&s.addField(o,r)}else{const e=function(e,t,i={}){let s;s=F.includes(t.field_type)?e.ref.querySelectorAll(`.formgent-${t.field_type}-${t.name}`):e.ref.querySelectorAll(`#${O(t.id)}`);let n=Array.from(s).filter(e=>{const t=e.closest(".formgent-field");return t&&!t.hasAttribute("hidden")});return void 0!==i?.repeater_name&&"number"==typeof i?.repeater_item&&(n=n.filter(e=>{const t=e.closest(".formgent-repeater-item");if(!t)return!1;const s=t.parentElement;return!!s&&Array.from(s.querySelectorAll(":scope > .formgent-repeater-item")).indexOf(t)===i.repeater_item})),n}(i,t,n);if(!e||0===e.length){try{const e=i.ref.querySelector(`#${O(t.id)}`);e&&s.removeField(e)}catch(e){}return}e.forEach(e=>{if("1"!==e?.dataset?.fgValidated){F.includes(t.field_type)?s.addRequiredGroup(e):s.addField(e,r);try{e.dataset.fgValidated="1"}catch(e){}}})}t.enable_confirmation_field&&function(e,t,i){const s=t.ref.querySelector(`#${O(e.id)}_confirmation`);let n=[{validator:e=>e===s.closest(".formgent-field-email").querySelector(".formgent-field-single-email-primary input").value,errorMessage:M("confirm")}];e.required&&n.push({rule:"required",errorMessage:M("required")}),i.addField(s,n)}(t,i,s)}function O(e){return`formgent-${e}`}function $(){const t=e();let i=[];for(const e in t.blocks_settings){const s=t.blocks_settings[e];["welcome","end"].includes(s.field_type)||i.push(s.id)}return i}function M(e){return formgent_data.validation_messages[e]}function T(){const i=t().ref.querySelector(".formgent-media-src__video");if(!i)return;const s=e(),n=i.querySelector("video"),r=i.querySelector(".formgent-video-control"),o=i.querySelector(".formgent-video-visualization__timer"),a=i.querySelector(".formgent-video-visualization__fullScreen"),l=e=>{const t=Math.floor(e/60),i=Math.floor(e%60);return`${String(t).padStart(2,"0")}:${String(i).padStart(2,"0")}`},c=()=>{const e=l(n.currentTime),t=l(n.duration||0);o.textContent=`${e} / ${t}`},d=()=>{n.play(),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M272 63.1l-32 0c-26.51 0-48 21.49-48 47.1v288c0 26.51 21.49 48 48 48L272 448c26.51 0 48-21.49 48-48v-288C320 85.49 298.5 63.1 272 63.1zM80 63.1l-32 0c-26.51 0-48 21.49-48 48v288C0 426.5 21.49 448 48 448l32 0c26.51 0 48-21.49 48-48v-288C128 85.49 106.5 63.1 80 63.1z"/></svg>'},u=()=>{n.pause(),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="19.54" height="24" viewBox="0 0 19.54 24">\n\t\t\t\t\t<path id="play-round" d="M20.5,7.971l-9.541-7A5,5,0,0,0,3,5.007v14a5,5,0,0,0,7.956,4.031l9.541-7a5,5,0,0,0,0-8.064Z" transform="translate(-3 -0.009)"/>\n\t\t\t\t\t</svg>\n\t\t\t\t'};r.addEventListener("click",()=>{n.paused?d():u()}),n.addEventListener("timeupdate",c),n.addEventListener("loadedmetadata",c),a.addEventListener("click",()=>{n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen&&n.msRequestFullscreen()});const h=s.root_parent_name;s.blocks_settings[h].videoPlayPause={play:d,pause:u}}function N(e){return 1024*e}function P(e){return 1024*e*1024}function V(e){return 1024*e*1024*1024}function j(e){return 1024*e*1024*1024*1024}function q(e,t){let i=atob(e),s=new Array(i.length);for(let e=0;e<i.length;e++)s[e]=i.charCodeAt(e);let n=new Uint8Array(s),r=new Blob([n],{type:"image/jpeg"});return new File([r],t,{type:"image/jpeg"})}const{findKey:R}=I();function H(e,t){return R(e,e=>e.id===t)||R(e,e=>e.children&&R(e.children,e=>e.id===t))}function B(e,t){const i=t.blocks_settings,s=(t,i)=>{const s=e.field.match(t);return s?s[1]:i},n=s(/parent\[([^\]]+)\]/,e.field),r=s(/child\[([^\]]+)\]/,e.field);let o=H(i,n);if(o&&!t.data.hasOwnProperty(o)){const e=i[o];e&&e.children&&(o=Object.keys(e.children)[0]||o)}const a=i[o]?.field_type,l=i[t.root_parent_name]?.children[o]?.field_type;if("digital-signature"===a||"file-upload"===a||"digital-signature"===l||"file-upload"===l)return t.data[o]?"1":"";let c="";if(o&&(c=function(e,t,i){const s=H(e,t),n=e[s]?.children;return R(n?.name?.children||n?.address?.children||n,e=>e.id===i)}(i,n,r)),c)return t.data[o]?.[c]||t.data[c];const d=i[o];return d&&d.is_calculation_enabled&&d.formula?function(e,t){const{formula:i,rounding:s}=t,n=[...i.matchAll(/{field:([\w-]+)}/g)],r={};let o=i;n.forEach(t=>{const i=t[1],s=/^[0-9]+$/.test(i)?`field_${i}`:i.replace(/[^a-zA-Z0-9_]/g,"_");r[s]=le(e.data[i]);const n=new RegExp(`{field:${i}}`,"g");o=o.replace(n,s)});const a=new f(r).evaluate(o,s);return null!=a?a:""}(t,d):t.data[o]}function z(e,t){if("object"==typeof e&&null!==e){for(let i in e)if(Object.hasOwnProperty.call(e,i)&&z(e[i],t))return!0;return!1}return e==t}const K=e=>null==e||""===e,U={"=":function(e,t){const i=B(e,t);return("0"===e.value||"1"===e.value||!K(i))&&("object"==typeof i?e.value.split(",").map(e=>e.trim()).every(e=>void 0!==i?.[e]):z(i,e.value))},"!=":function(e,t){const i=B(e,t);return("0"===e.value||"1"===e.value||!K(i))&&("object"==typeof i?!e.value.split(",").map(e=>e.trim()).every(e=>void 0!==i?.[e]):!z(i,e.value))},equal_length:function(e,t){const i=B(e,t);return!K(i)&&i.length==e.value},less_then_length:function(e,t){const i=B(e,t);return!K(i)&&i.length<e.value},greater_then_length:function(e,t){const i=B(e,t);return!K(i)&&i.length>e.value},less_then:function(e,t){const i=B(e,t);return!K(i)&&i<e.value},greater_then:function(e,t){const i=B(e,t);return!K(i)&&i>e.value},contains:function(e,t){const i=B(e,t);return!K(i)&&("object"==typeof i?e.value.split(",").map(e=>e.trim()).some(e=>Object.keys(i).includes(e)||Object.values(i).includes(e)):i.includes(e.value))},doesNotContain:function(e,t){const i=B(e,t);return!K(i)&&("object"==typeof i?!e.value.split(",").map(e=>e.trim()).some(e=>Object.keys(i).includes(e)||Object.values(i).includes(e)):!i.includes(e.value))},null:function(e,t){const i=B(e,t);return null===i||0===i.length},notNull:function(e,t){const i=B(e,t);return null!==i&&0!==i.length},regex:function(e,t){const i=B(e,t);return!K(i)&&new RegExp(e.value).test(i)},beginsWith:function(e,t){const i=B(e,t);return!K(i)&&i.startsWith(e.value)},doesNotBeginWith:function(e,t){const i=B(e,t);return!K(i)&&!i.startsWith(e.value)},endsWith:function(e,t){const i=B(e,t);return!K(i)&&i.endsWith(e.value)},doesNotEndWith:function(e,t){const i=B(e,t);return!K(i)&&!i.endsWith(e.value)},between:function(e,t){const i=B(e,t);if(K(i))return!1;const s=e.value.split(",").map(e=>e.trim());return i>=s[0]&&i<=s[1]}},G=[];function W(e){e&&G.push(e)}const Y=[],Z=[];function J(e,t){t&&(Z.includes(t)||Z.push(t));const i=Y.findIndex(t=>t.id===e.id);-1!==i?Y[i].answer=e.answer:Y.push(e)}const Q=[];function X(e){e&&Q.push(...e)}const ee=async e=>{if(e)try{await x({path:`formgent/responses/attachments?file_token=${e}`,method:"DELETE"})}catch(e){console.error("Error deleting file:",e)}},te=async(e,t,i)=>{const s=new FormData;s.append("form_id",e.form_id),s.append("response_token",e.global.response_token),s.append("file",t),s.append("context",i);try{return await x({path:"formgent/responses/attachments",method:"POST",body:s})}catch(e){return console.error("File upload failed:",e),null}};function ie(){const t=e(),i=t.root_parent_name;return i?t.blocks_settings[i].validator:t.validator}function se(){try{const e=re(),t=ie();if(!e||!t)return;t.removeField(e),"function"==typeof t.refresh&&t.refresh()}catch(e){console.warn("Could not remove other field validation:",e)}}function ne(){const e=re(),t=ie();e&&t&&t.addField(e,[{rule:"required",errorMessage:"Other field is required"},{rule:"maxLength",value:250}])}function re(){const e=t();if(!e?.ref)return null;const i=e.ref.closest(".formgent-field-single__box");return i&&Array.from(i.querySelectorAll('.formgent-field-other-input, input[type="text"]')).find(e=>null!==e.offsetParent)||null}function oe(e){const t=e[e.length-1];t&&t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}function ae(e){const t=Object.keys(e).filter(e=>/^\d+$/.test(e));return t.length&&!("value"in e)?t.map(t=>e[t]).join(""):e}function le(e){if(""===e||null==e)return 0;if("object"==typeof e&&!Array.isArray(e)){if(Object.values(e).every(e=>!0===e||!1===e)){const t=Object.keys(e).find(t=>!0===e[t]);return t?Number(t):0}let t=0;return Object.entries(e).forEach(([e,i])=>{if("object"==typeof i&&i.checked&&void 0!==i.value){const e=Number(i.value);isNaN(e)||(t+=e)}else{const e=Number(i);isNaN(e)||(t+=e)}}),t}if("object"==typeof e&&Array.isArray(e))return e.length?Number(e[0]):0;const t=Number(e);return isNaN(t)?0:t}const ce=e=>Object.keys(e).map((t,i)=>({key:t,index:i,field_type:e[t].field_type})).filter(e=>"page-break"===e.field_type),de=(e,t)=>{const i=ce(e);if(t===i[i.length-2].key)return!0},ue=(e,t)=>{const i=(e=>{const t=ce(e);return t[t.length-1]})(e);return i?.key===t};function he(e){const t={...e};return Object.keys(t).forEach(e=>{const i=t[e];if(i&&"object"==typeof i&&!Array.isArray(i)){const s=Object.keys(i).filter(e=>/^\d+$/.test(e));s.length>0&&(t[e]=s.sort((e,t)=>Number(e)-Number(t)).map(e=>i[e]))}}),t}function pe(e){return!!e&&("Enter"===e.key||" "===e.key||13===e.keyCode||32===e.keyCode)}function me(e){return"string"!=typeof e||"undefined"==typeof document?e:(me.el||(me.el=document.createElement("textarea")),me.el.innerHTML=e,me.el.value)}function fe(){const t=e(),{name:i,field_type:s,field_label:n}=t;if(!i)return"";const r=k(t),{is_calculation_enabled:o,formula:a,rounding:l,field_mapping:c,limit:d,min:u}=r||{};if("custom-payment-amount"===s&&function(e,t,i){const s=le(e.data[t]),n=e.global.payment.items;const r=n.find(e=>e.name===t);if(s>0)r?(r.price=s.toFixed(2),r.line_total=(s*r.quantity).toFixed(2)):n.push({label:t,name:t,options:[],price:s.toFixed(2),quantity:1,line_total:(1*s).toFixed(2),field_label:i||t});else{const e=n.findIndex(e=>e.name===t);-1!==e&&n.splice(e,1)}ge(e)}(t,i,n),c&&function(e,t,i){const s=le(e.data[t]),n=e.global.payment.items.find(e=>e.name===i);n&&(n.quantity=s,n.line_total=(s*Number(n.price||0)).toFixed(2)),ge(e)}(t,i,c),t.parent_name){var h;const{parent_name:e,repeater_name:s,repeater_item:n,data:r}=t;return r&&i?s&&"number"==typeof n?null!==(p=r[s]?.[n]?.[e]?.[i])&&void 0!==p?p:"":null!==(h=r[e]?.[i])&&void 0!==h?h:"":"";var p}return o&&a?function(e,t,i){const s=[...t.matchAll(/{field:([\w-]+)}/g)],n={};let r=t;return s.forEach(t=>{const i=t[1],s=/^[0-9]+$/.test(i)?`field_${i}`:i.replace(/[^a-zA-Z0-9_]/g,"_");n[s]=le(e.data[i]);const o=new RegExp(`{field:${i}}`,"g");r=r.replace(o,s)}),new f(n).evaluate(r,i)}(t,a,l):function(e,t,i){const{name:s,parent_name:n,repeater_name:r,repeater_item:o,data:a,field_type:l}=e,{has:c}=I();let d=a;var u,h;if(n&&(d=null!==(u=d?.[n])&&void 0!==u?u:{}),r&&"number"==typeof o)d=null!==(h=d?.[r]?.[o])&&void 0!==h?h:{};else if(r){var p;d=null!==(p=d?.[r])&&void 0!==p?p:{}}const m=c(d,s),f=m?d?.[s]:void 0,g=e=>(n?(a[n]=a[n]||{},a[n][s]=e):a[s]=e,e),y=null!=i&&""!==i;if(""===f||null==f){if("custom-quantity"===l)return g(t&&y?Number(i):1);if("number"===l&&t&&y)return g(Number(i))}return m?f:""}(t,d,u)}function ge(e){const t=e.global.payment.items.reduce((e,t)=>e+Number(t.line_total||0),0);e.global.payment.total_amount=t.toFixed(2)}const{isEmpty:ye,isObject:ve,has:be,isUndefined:_e,findIndex:we,max:Ce}=I();function ke(e){let t=e?.blocks_settings;return t?(e.root_parent_name&&t[e.root_parent_name]&&(t=t[e.root_parent_name]?.children),e.name&&e.repeater_name&&t?.[e.repeater_name]&&(t=t[e.repeater_name]?.children),e.parent_name&&t?.[e.parent_name]&&(t=t[e.parent_name]?.children),t||null):null}function Se(e,t,i){const s="and"===i;let n=s;for(const i of e)if(i.rules&&Array.isArray(i.rules)){const e=Se(i.rules,t,i.combinator||"and");if(s&&!e)return!1;if(!s&&e)return!0}else{if(!ve(i)||!be(U,i.operator))continue;const e=U[i.operator](i,t);if(s&&!e)return!1;if(!s&&e)return!0}return n}function De(e,t,i){if(!e)return!0;const s=Object.keys(e),n=we(s,e=>e===t);let r=we(s,e=>e===i);if(-1===n)return!0;if(n===r)return!0;if(-1===r&&(r=1e4),r<n)return!1;const o=Ie(e).filter(e=>e<r);return!(Ce(o)>=n)}const Ie=e=>Object.keys(e).map((t,i)=>({key:t,index:i,field_type:e[t].field_type})).filter(e=>"page-break"===e.field_type).map(e=>e.index),{has:Le}=I(),{size:xe}=I();function Fe(t=null){const i=e(),s=k();if(!s)return 0;if(t||(t=i?.option?.value),!t)return 0;let n=i.data[i.name];if(i.repeater_name){const e=i.data?.[i.repeater_name]?.[i.repeater_item];if(!e)return 0;n=e[i.name]}return"object"!=typeof n&&(n={}),s.choice_limit?xe(n)!==s.choice_limit_item||n?.[t]?0:1:0}const{values:Ae,filter:Ee,last:Oe,keys:$e}=I();function Me(){const t=e(),i=Ae(t.blocks_settings),s=Ee(i,e=>"page-break"===e.field_type).length;return"page-break"===Oe(i).field_type?s:s+1}function Te(){const t=e(),i=t.blocks_settings,s=t.global.page,n=$e(i).filter(e=>"page-break"===i[e].field_type);if(!s)return n.length+1;const r=n.indexOf(s);return-1!==r?r+1:n.length+1}const{keys:Ne}=I(),Pe=(e,t)=>{const i=ce(e),s=i.findIndex(e=>e.key===t);return s>0?i[s-1].key:null};function Ve(e,t=!0){const i=e.ref.closest(".formgent-field").querySelector(".formgent-validate-field-input");i&&(i.value=t?"1":"");const s=new CustomEvent("formgent-field-validated",{detail:{fieldElement:e.ref,fieldType:"file-upload",value:t?"1":""}}),n=e.ref.closest("form");n&&n.dispatchEvent(s)}function je(t){g(t),e().highlightFileUpload=!0}function qe(t){g(t),e().highlightFileUpload=!1}function Re(e){g(e),qe(e),He(e.dataTransfer.files)}function He(e){const t=e.target?e.target.files:e;for(let e of t)Ue(e)}const Be=i=>{if(!pe(i))return;i.preventDefault();const s=e();if(s?.maxAllowedReached)return;const n=t(),r=n?.ref;r&&r.click()},ze=e=>e<1024?`${e} bytes`:e<1048576?`${(e/1024).toFixed(1)} KB`:e<1024**3?`${(e/1048576).toFixed(1)} MB`:e<1024**4?`${(e/1024**3).toFixed(1)} GB`:`${(e/1024**4).toFixed(1)} TB`,Ke=(e,t)=>{switch(t){case"KB":return N(e);case"MB":return P(e);case"GB":return V(e);case"TB":return j(e);default:return e}};function Ue(i){const s=e(),n=t(),{uploadedFiles:r,name:o,root_parent_name:a,blocks_settings:l}=s,c=l[o]||l[a]?.children[o],{limit_size:d,is_limit_size:u,size_type:h,is_limit_files:p,allowed_types:m}=c;if(p&&r.length>=s.maxAllowed)return void(s.maxFileError=!0);const f=Ke(parseInt(d,10),h),g=i.type;if(m.length>0&&!m.includes(g))return void(s.notAllowed=!0);if(u&&i.size>f)return void(s.maxSizeError=!0);const y=URL.createObjectURL(i);r.push({id:Math.floor(1e4*Math.random()),src:y,progress:"0%",uploaded:!1,token:"",name:i.name,size:ze(i.size),isImage:i.type.startsWith("image/"),isVideo:i.type.startsWith("video/"),isOther:!i.type.startsWith("image/")&&!i.type.startsWith("video/")});const v=r[r.length-1];s.maxAllowedReached=r.length===s.maxAllowed,Ve(n);const b=new FormData;b.append("form_id",s.form_id),b.append("response_token",s.global.response_token),b.append("file",i),b.append("context","file_upload");const _=new XMLHttpRequest;_.open("POST","/wp-json/formgent/responses/attachments",!0),_.upload.onprogress=function(e){e.lengthComputable&&(v.progress=`${Math.round(100*e.loaded/e.total)}%`)},_.onload=function(){if(_.status>=200&&_.status<300){const e=JSON.parse(_.responseText);v.token=e.data.file_token,v.uploaded=!0;const t=r.map(e=>e.token);C(t,n,s),Ve(n),s.maxSizeError=!1,s.notAllowed=!1}else console.error("Error uploading file:",_.statusText),r=r.filter(e=>e.id!==v.id),alert("Failed to upload file. Please try again.")},_.onerror=function(){console.error("Request failed"),r=r.filter(e=>e.id!==v.id),alert("Failed to upload file. Please try again.")},_.send(b),wp.hooks.addAction("formgent_form_reset","formgent",()=>{r.splice(0,r.length),function(e){Ve(e,!1)}(n)})}async function Ge(i){g(i);const s=e(),n=t(),{uploadedFiles:r,item:o}=s;if(!o.token)return;const a=r.findIndex(e=>e.id===o.id);-1!==a&&r.splice(a,1),r.length<=s.maxAllowed?s.maxFileError=!1:s.maxFileError=!0,s.maxAllowedReached=r.length===s.maxAllowed,C(r.map(e=>e.token),n,s),Ve(n,r.length>0),await ee(o.token)}const We=e=>{e&&pe(e)&&(e.preventDefault(),Ge(e))},Ye=new class{constructor(){this.context=null,this.element=null,this.currentMarker=null,this.selectedIndex=-1}init(){return this.context=e(),this.element=t(),this}handlePlacePredictions(e,t){t===google.maps.places.PlacesServiceStatus.OK&&(this.context.map.suggestions=e,this.selectedIndex=-1)}updateLocationInput(){this.init();const{name:e,mapId:t}=this.context,i=this.element.ref.value;this.element.ref.hasAttribute("data-keyboard-listener")||(this.element.ref.setAttribute("data-keyboard-listener","true"),this.element.ref.addEventListener("keydown",e=>this.handleKeyNavigation(e))),this.context.map.autoComplete.getPlacePredictions({input:i},(e,t)=>this.handlePlacePredictions(e,t))}handleKeyNavigation(e){const t=this.context.map.suggestions||[];if(0===t.length)return;const i=document.querySelectorAll(`.formgent-field-single-autocomplete-dropdown-${this.context.name} .formgent-field-single-autocomplete-dropdown__item`);switch(e.key){case"ArrowDown":e.preventDefault(),this.selectedIndex=Math.min(this.selectedIndex+1,t.length-1),this.highlightSelectedItem(i);break;case"ArrowUp":e.preventDefault(),this.selectedIndex=Math.max(this.selectedIndex-1,0),this.highlightSelectedItem(i);break;case"Enter":case" ":if(e.preventDefault(),this.selectedIndex>=0&&this.selectedIndex<t.length){const e=t[this.selectedIndex].place_id;this.getPlaceDetails(e)}break;case"Escape":e.preventDefault(),this.context.map.suggestions=[],this.selectedIndex=-1}}highlightSelectedItem(e){e.forEach(e=>{e.classList.remove("selected")}),this.selectedIndex>=0&&this.selectedIndex<e.length&&e[this.selectedIndex].classList.add("selected")}resetLocationInput(){this.init(),this.context.map.suggestions=[],this.selectedIndex=-1}isValidDropdownItem(){return this.element?.ref?.classList?.contains("formgent-field-single-autocomplete-dropdown__item")||!1}removeCurrentMarker(){this.currentMarker&&(this.currentMarker.map=null,this.currentMarker=null)}createMarker(e){return this.removeCurrentMarker(),this.currentMarker=new google.maps.marker.AdvancedMarkerElement({map:this.context.map.instance,position:e}),this.currentMarker}extractCoordinates(e){return{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()}}createAddressObject(e,t){return{map:e,address:t}}handlePlaceDetails(e,t){if(t!==google.maps.places.PlacesServiceStatus.OK)return void console.log("Place details request failed due to: "+t);this.createMarker(e.geometry.location),this.context.map.instance.panTo(e.geometry.location);const i=this.extractCoordinates(e),s=this.createAddressObject(i,e.formatted_address);this.context.map.suggestions=[],this.selectedIndex=-1,C(s,this.element,this.context)}getPlaceDetails(e){const t={placeId:e,fields:["name","formatted_address","geometry"]};new google.maps.places.PlacesService(document.createElement("div")).getDetails(t,(e,t)=>this.handlePlaceDetails(e,t))}selectMapLocation(){if(this.init(),!this.isValidDropdownItem())return;const e=this.element.ref.dataset.placeid;this.getPlaceDetails(e)}},Ze=(e,t,i,s)=>{if(!e||"string"!=typeof e)return"";const n={};return Object.keys(i||{}).forEach(e=>{n[e.toLowerCase()]=i[e]}),e.replace(/{{\s*(.*?)\s*}}/g,(e,i)=>{const r=i.trim().toLowerCase();if(n[r])return Je(n[r]);let o=r;r.startsWith("field:")&&(o=r.substring(6).trim());const a=Object.keys(t||{}).find(e=>e.toLowerCase()===o),l=((e,t)=>t&&"object"==typeof t&&t[e]||null)(a||o,s);if(l?.is_calculation_enabled&&l?.formula){const e=((e,t,i)=>{const s=[...e.matchAll(/{field:([\w-]+)}/g)],n={};let r=e;s.forEach(e=>{const i=e[1],s=/^[0-9]+$/.test(i)?`field_${i}`:i.replace(/[^a-zA-Z0-9_]/g,"_");n[s]=le(t[i]);const o=new RegExp(`{field:${i}}`,"g");r=r.replace(o,s)});try{return new f(n).evaluate(r,i)}catch(e){return console.error("Formula calculation error:",e),0}})(l.formula,t,l.rounding);return Je(String(e))}if(a&&void 0!==t[a]&&null!==t[a]){const e=t[a];if(Array.isArray(e))return Je(e.join(", "));if("object"==typeof e&&null!==e){const t=Object.values(e).filter(e=>null!=e&&""!==e&&""!==String(e).trim()).map(e=>String(e).trim());return t.length>0?Je(t.join(" ")):""}return Je(String(e))}if(o.includes(".")){const e=((e,t)=>{const i=t.split(".");let s=e;for(const e of i){if(!s||"object"!=typeof s||!(e in s))return;s=s[e]}return s})(t,o);if(null!=e)return Array.isArray(e)?Je(e.join(", ")):Je(String(e))}const c=o.split(".");if(c.length>1){const e=Object.keys(t||{}).find(e=>e.toLowerCase()===c[0]);if(e&&"object"==typeof t[e]){const i=Object.keys(t[e]).find(e=>e.toLowerCase()===c[1]);if(i&&t[e][i]){const s=t[e][i];return Array.isArray(s)?Je(s.join(", ")):Je(String(s))}}}return""})},Je=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},{isEmpty:Qe}=I();async function Xe(e,t,i=!0,s){if(e.global.is_response_submitting)return;e.global.is_response_submitting=!0;const n=t.ref.closest("form"),r=n.querySelector(".formgent-field-list");var o;if("end"!==s&&r.classList.add("formgent-field-list--disabled"),await(o=e.global,new Promise(e=>{const t=setInterval(()=>{!1===o.is_response_token_generating&&(clearInterval(t),e())},25)})),e.global.is_enabled_honeypot_protection&&""!==n.querySelector(`input[name="formgent-honeypot-${e.form_id}"]`).value)return;if(!function(e,t,i){for(const s in e.data){const n=e.blocks_settings[s];if(!n||"input-masking"!==n.field_type)continue;const r=e.data[s],o=t.ref.querySelector(`input[id="${O(n.id)}"]`);function a(e){const t=document.createElement("div");t.classList.add("formgent-warning-message"),t.textContent=e,o.insertAdjacentElement("afterend",t)}function l(){o.focus(),i.classList.remove("formgent-field-list--disabled")}if("00/00/0000"===n.mask_type&&!v(r))return l(),a("Invalid date format. Please use 'dd/mm/yyyy'."),!1;if("00:00:00"===n.mask_type&&!b(r))return l(),a("Invalid time format. Please use 'hh:mm:ss'."),!1;if("00/00/0000 00:00:00"===n.mask_type&&!_(r))return l(),a("Invalid date or time format. Please use 'dd/mm/yyyy' for date and 'hh:mm:ss' for time."),!1}return!0}(e,t,r))return void(e.global.is_response_submitting=!1);const a=et(he(e.data)),l=e.blocks_settings,c=e.form_type;for(const d in a){let u=l[d];if("conversational"===c)for(const g in l){const C=l[g]?.children||{};if(C.hasOwnProperty(d)){u=C[d];break}}if(!u){console.warn(`Field definition not found for: ${d}`);continue}let f=a[d];if("repeater"===u?.field_type&&f){const k=u.children||{};if(Array.isArray(f)){a[d]=f.map(e=>{if(!e||"object"!=typeof e)return e;const t={...e};for(const i in e){const s=k[i];"email"===s?.field_type&&s?.enable_confirmation_field&&(t[`${i}_confirmation`]=e[i])}return t});continue}if("object"==typeof f){const S={};for(const D in f){const I=f[D];if(!I||"object"!=typeof I){S[D]=I;continue}const L={...I};for(const F in I){const A=k[F];"email"===A?.field_type&&A?.enable_confirmation_field&&(L[`${F}_confirmation`]=I[F])}S[D]=L}a[d]=S;continue}}if("multiple-choice"!==u.field_type){if("single-choice"===u.field_type){let E=Object.keys(f)[0];"formgent_other"===E&&(E=f.formgent_other),a[d]=E;continue}u&&u.enable_confirmation_field&&(a[d+"_confirmation"]=f)}else a[d]=tt(f)}try{if(w(t,e),!Qe(a)){await y(e);const T=await x({path:"/formgent/responses",method:"POST",data:{id:e.form_id,form_data:a,response_token:e.global.response_token}});if(x({path:"formgent/queue/dispatch",method:"POST"}),T?.payment_data?.success)return void(location.href=T?.payment_data.redirect_url);if(T?.quiz_result){e.quiz_result=T?.quiz_result;let N=m(T?.quiz_result);"general"===e.form_type?n.previousElementSibling.querySelector(".formgent-quiz-result").innerHTML=N:(p(n,T?.quiz_result),n.querySelector(".formgent-quiz-result").innerHTML=N)}}e.global.is_response_submitting=!1,r.classList.remove("formgent-field-list--disabled"),e.global.is_form_started=!1,e.global.field_interaction_state={},e.global.response_token=null;for(const P in e.data)document.querySelectorAll(`[name="${P}"]`).forEach(e=>{e.disabled=!1});const $=e.blocks_settings;function M(){Object.keys($).forEach(t=>{e.data[t]=""})}if(i){switch(e.confirmation.type){case"message":const V=t.ref.closest(".formgent-form").querySelector(".formgent-notices"),j=t.ref.closest(".formgent-form").querySelector(".formgent-confirmation-wrap");if(!V)break;const q=V?.getAttribute("data-message"),R=h(q,e.quiz_result);V.innerHTML=R,j.classList.remove("formgent-confirmation-wrap--hidden");break;case"url":location.href=e.confirmation.url;break;case"page":location.href=e.confirmation.page}switch(e.confirmation.after_submission){case"reset":n.reset(),M(),wp.hooks.doAction("formgent_form_reset",n);break;case"hide":n.remove()}document.querySelector(".formgent-form").scrollIntoView("smooth")}}catch(H){e.global.is_response_submitting=!1,r.classList.remove("formgent-field-list--disabled"),e.global.is_form_started=!1,e.global.field_interaction_state={},e.global.response_token=null,console.error("Error:",H)}}function et(e){const t={};for(const i in e){const s=e[i];if("object"==typeof s&&null!==s){const e=et(s);Object.keys(e).length>0&&(t[i]=e)}else""!==s&&(t[i]=s)}return t}function tt(e){const t={};for(const i in e)"object"==typeof e[i]&&null!==e[i]?e[i].checked&&(t[i]=e[i].value):t[i]=e[i];return t}const{isObject:it,has:st}=I();function nt(){const i=e(),s=t(),n=i.root_parent_name;let r,o,a,l=i.blocks_settings[n],c=S(i.blocks_settings,n);for(const e in l.children)l.children.hasOwnProperty(e)&&(o=l.children[e].name,a=l.children[e].field_type);const d=i?.data[o],u=Y.findIndex(e=>e.id===n),h=-1!==u?Y[u].answer:null;if((null!==h||-1!==u)&&h!==d&&l?.logics?.logicRules){const e=Z.indexOf(n);-1!==e&&Z.splice(e+1);const t=Z.length>0?Z[0]:null,s=Y.slice(u+1).map(e=>("digital-signature"!==e.fieldType&&"file-upload"!==e.fieldType||wp.hooks.doAction("formgent_remove_uploaded_file",!0),e.key||e.id)).filter(e=>e!==t);if(X(s),s.forEach(e=>{"name"!==e&&"address"!==e&&delete i.data[e]}),-1!==u&&Y.splice(u+1),t&&!i.data[t]){const e=Y.find(e=>e.id===t)?.answer||"";i.data[t]=e}i.data[o]=d}l?.logics?.logicRules&&(r=function(e,t){for(const i of e){const{queries:e,to:s}=i,{combinator:n="and",rules:r}=e;if(rt(r,t,n))return s}return null}(l.logics.logicRules,i)),!r&&l?.logics?.to&&(r=l.logics.to);let p=i.blocks_settings[r];"captcha"!==a||i.data?.[a]?l.validator.revalidate().then(e=>{if(!e)return;wp.hooks.doAction("formgent_before_go_next_step",l,p||c,s,i),W(n),J({key:o,id:n,answer:d||"",fieldType:a},n),l.show=!1;const t=p||c;t&&(t.show=!0),t&&"end"!==t.field_type||Xe(i,s,!t,"end")}):document.querySelector(`#${O(l.id)}`).querySelector(".formgent-captcha-error").classList.add("show")}function rt(e,t,i){let s="and"===i;for(const n in e){const r=e[n];if(!it(r))continue;if(!st(U,r.operator))return!1;const o=U[r.operator](r,t);if("and"===i&&!o){s=o;break}if("or"===i&&o){s=o;break}}return s}function ot(){const t=e(),{repeater_items:i}=t,s=Array.isArray(i)?i.length:0;t.repeater_items=[...i||[],s];const n=!!t.is_multi_step,r=t.root_parent_name,o=n?t.blocks_settings?.[r]?.validator:t.validator,a=n?document.getElementById(O(r)):document.querySelector('[data-wp-interactive="formgent/form"]');setTimeout(()=>{if(!a||!t.blocks_settings||!o)return;const e=t.blocks_settings?.[t.repeater_name]||Object.values(t.blocks_settings).find(e=>"repeater"===e?.field_type&&e?.name===t.repeater_name);if(!e||"repeater"!==e.field_type)return;const i={...t,repeater_item:s,repeater_name:t.repeater_name};E(e,{ref:a},o,i)},0),wp.hooks.addAction("formgent_form_reset","formgent",()=>{t.repeater_items=[0]})}function at(){const t=e(),{repeater_name:i,repeater_items:s,repeater_item:n}=t;if(s.length<=1)return;const r=Number(n);if(-1===s.indexOf(r))return;const o=s.filter(e=>e!==r),a=o.map((e,t)=>t),l=t.data?.[i]||{},c={};o.forEach((e,t)=>{c[t]=l?.[e]}),t.repeater_items=[...a],t.data={...t.data,[i]:c}}function lt(){const i=t(),s=e(),n=s.root_parent_name;let r=s.blocks_settings[n],o=D(s.blocks_settings,n),a=G.pop();const l=(a?s.blocks_settings[a]:null)||o;wp.hooks.doAction("formgent_before_go_prev_step",r,l,i,s),r.show=!1,l.show=!0}const ct=(e,t,i)=>Math.min(i,Math.max(t,e)),dt=(e,t=0)=>{const i=Number(e);return Number.isFinite(i)?i:t},ut=e=>(e.sliderState||(e.sliderState={}),e.sliderState),ht=(e,t)=>{const i=e.ref.dataset||{},s=i.sliderType||k(t)?.slider_type||"number",n=i.valuePrefix||"",r=i.valueSuffix||"",o=dt(i.sliderMin,0);let a="text"===s?(e=>{if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return[]}})(i.textOptions):[];const l="number"===s?dt(i.sliderMax,100):Math.max(a.length-1,0),c=dt(i.sliderStep,1),d=dt(i.defaultValue,o),u=dt(i.defaultIndex,0);return a=a.map((e,t)=>{var i,s,n;return{label:null!==(i=e?.label)&&void 0!==i?i:`Option ${t+1}`,value:null!==(s=null!==(n=e?.value)&&void 0!==n?n:e?.label)&&void 0!==s?s:`option_${t}`}}),{sliderType:s,min:o,max:l,step:c||1,prefix:n,suffix:r,textOptions:a,defaultValue:d,defaultIndex:ct(u,0,Math.max(a.length-1,0))}},pt=(e,t)=>{if("text"===t.sliderType){var i;const s=t.textOptions[Math.round(e)];return null!==(i=s?.label)&&void 0!==i?i:""}return`${t.prefix}${e}${t.suffix}`},mt=(e,t,i,s)=>{var n;const r=ut(i),o=((e,t)=>{const i=t.min+Math.round((e-t.min)/t.step)*t.step;return ct(i,t.min,t.max)})(e,t),a=((e,t)=>{if("text"===t.sliderType){var i;const s=t.textOptions[Math.round(e)];return null!==(i=s?.label)&&void 0!==i?i:""}return Number(e)})(o,t);r.value=o,r.valueLabel=pt(o,t),r.submitValue=a,r.min=t.min,r.max=t.max,r.step=t.step,r.sliderType=t.sliderType,r.textLength=t.textOptions.length,null!==(n=r.activePointerId)&&void 0!==n||(r.activePointerId=null),((e,t,i)=>{var s;const n=(null!==(s=t.ref.closest(".formgent-field-single__wrapper"))&&void 0!==s?s:t.ref).querySelector(".formgent-validate-field-input")||null;n&&(n.value=e,C(e,{ref:n},i))})(a,s,i)},ft=(e,t,i)=>{const s=ht(i,t),n=i.ref.getBoundingClientRect();if(!n||!n.width)return;const r=ct((e.clientX-n.left)/n.width,0,1),o=s.min+r*(s.max-s.min);mt(o,s,t,i)};function gt(e){const t=e.blocks_settings||{},i=Object.values(t).flatMap(e=>{const t=[e.field_type];return e.children&&"object"==typeof e.children&&t.push(...Object.values(e.children).map(e=>e.field_type)),t}),s=window.formgent_data?.payment_gateways;return s.filter(e=>i.includes(e)).length<=1}function yt({name:e,option:t,values:i,paymentItems:s,replace:n=!1,field_label:r}){const o={name:t.label,price:Number(t.price||0)},a=e;if(Object.keys(i).length>0){let t=s.find(e=>e.label===a);if(t){n?t.options=[o]:t.options.some(e=>e.name===o.name)||t.options.push(o);const e=t.options.reduce((e,t)=>e+Number(t.price||0),0);t.price=e.toFixed(2),t.line_total=(t.price*t.quantity).toFixed(2)}else{const t=o.price.toFixed(2),i=1;s.push({label:a,name:e,options:[o],price:t,quantity:i,line_total:(t*i).toFixed(2),field_label:r||a})}}const l=s.reduce((e,t)=>e+Number(t.line_total||0),0);return{paymentItems:s,totalAmount:l,enableSummary:s.length>0}}const vt="ArrowUp",bt="ArrowDown",_t="ArrowRight";function wt(){const i=e(),s=t();C(i.item.rating,s,i),i.ratingState.rating=i.item.rating;const n=s.ref.closest("div").closest(".formgent-field-single__wrapper").querySelector(".formgent-validate-field-input");n.value=i.item.rating;const r=ie();r&&n&&r.revalidateField(n),wp.hooks.addAction("formgent_form_reset","formgent",()=>{n.value="",i.ratingState.rating=0,i.ratingState.focusedRating=1,i.item.rating=0;const e=k(i).rating_limit||5,t=[];for(let i=1;i<=e;i++)t.push({rating:i,normal:!1,solid:!0});i.ratingOptions=t});const o=Ft();o>0&&(i.ratingState.rating=o),xt()}const Ct=i=>{const s=e(),n=t(),{focusedRating:r=1}=s.ratingState||{},o=s.rating_limit||5;if(" "===i.key||32===i.keyCode)return i.preventDefault(),void wt();if(kt(i)){i.preventDefault();const e=i.key===_t||39===i.keyCode,t=St(r,o,e);s.ratingState.focusedRating=t,requestAnimationFrame(()=>{It(t,n)})}},kt=e=>e.key===_t||39===e.keyCode||"ArrowLeft"===e.key||37===e.keyCode,St=(e,t,i)=>i?e<t?e+1:1:e>1?e-1:t;let Dt=null;const It=(e,t)=>{const i=Dt||(Dt=t.ref.closest(".formgent-field-rating"));if(!i)return;const s=i.querySelectorAll(".formgent-rating-single");if(e<1||e>s.length)return;const n=s[e-1].querySelector('span[tabindex="0"]');n&&n.focus()},Lt=()=>{Dt=null};function xt(){const t=e();let i=[];const s=k(t),n=Ft()||0;for(let e=1;e<s.rating_limit+1;e++)e<=n?i.push({rating:e,normal:!0,solid:!1}):i.push({rating:e,normal:!1,solid:!0});return t.ratingOptions=i}function Ft(){const{lodash:t}=window.formgent.utils,{has:i}=t(),s=e(),{name:n,parent_name:r,repeater_name:o,data:a,repeater_item:l}=s;return r&&!o?a[r]?.[n]||0:o?a[o]?.[l]?.[n]||0:i(a,n)?a[n]:0}var At=Object.defineProperty,Et=(e,t,i)=>(((e,t,i)=>{t in e?At(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i})(e,"symbol"!=typeof t?t+"":t,i),i);const Ot=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,$t=/^-?[0-9]\d*$/,Mt=/^(?=.*[A-Za-z])(?=.*\d).{8,}$/,Tt=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,Nt=e=>"string"!=typeof e||""===e;var Pt=(e=>(e.Required="required",e.Email="email",e.MinLength="minLength",e.MaxLength="maxLength",e.Password="password",e.Number="number",e.Integer="integer",e.MaxNumber="maxNumber",e.MinNumber="minNumber",e.StrongPassword="strongPassword",e.CustomRegexp="customRegexp",e.MinFilesCount="minFilesCount",e.MaxFilesCount="maxFilesCount",e.Files="files",e))(Pt||{}),Vt=(e=>(e.Required="required",e))(Vt||{}),jt=(e=>(e.Label="label",e.LabelArrow="labelArrow",e))(jt||{});const qt=[{key:Pt.Required,dict:{en:"The field is required"}},{key:Pt.Email,dict:{en:"Email has invalid format"}},{key:Pt.MaxLength,dict:{en:"The field must contain a maximum of :value characters"}},{key:Pt.MinLength,dict:{en:"The field must contain a minimum of :value characters"}},{key:Pt.Password,dict:{en:"Password must contain minimum eight characters, at least one letter and one number"}},{key:Pt.StrongPassword,dict:{en:"Password should contain minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"}},{key:Pt.Number,dict:{en:"Value should be a number"}},{key:Pt.MaxNumber,dict:{en:"Number should be less or equal than :value"}},{key:Pt.MinNumber,dict:{en:"Number should be more or equal than :value"}},{key:Pt.MinFilesCount,dict:{en:"Files count should be more or equal than :value"}},{key:Pt.MaxFilesCount,dict:{en:"Files count should be less or equal than :value"}},{key:Pt.Files,dict:{en:"Uploaded files have one or several invalid properties (extension/size/type etc)."}}],Rt=e=>"object"==typeof e&&null!==e&&"then"in e&&"function"==typeof e.then,Ht=e=>Array.isArray(e)?e.filter(e=>e.length>0):"string"==typeof e&&e.trim()?[...e.split(" ").filter(e=>e.length>0)]:[],Bt=e=>e instanceof Element||e instanceof HTMLDocument,zt={errorFieldStyle:{color:"#b81111",border:"1px solid #B81111"},errorFieldCssClass:"just-validate-error-field",successFieldCssClass:"just-validate-success-field",errorLabelStyle:{color:"#b81111"},errorLabelCssClass:"just-validate-error-label",successLabelCssClass:"just-validate-success-label",focusInvalidField:!0,lockForm:!0,testingMode:!1,validateBeforeSubmitting:!1,submitFormAutomatically:!1};class Kt{constructor(e,t,i){Et(this,"form",null),Et(this,"fields",{}),Et(this,"groupFields",{}),Et(this,"errors",{}),Et(this,"isValid",!1),Et(this,"isSubmitted",!1),Et(this,"globalConfig",zt),Et(this,"errorLabels",{}),Et(this,"successLabels",{}),Et(this,"eventListeners",[]),Et(this,"dictLocale",qt),Et(this,"currentLocale","en"),Et(this,"customStyleTags",{}),Et(this,"onSuccessCallback"),Et(this,"onFailCallback"),Et(this,"onValidateCallback"),Et(this,"tooltips",[]),Et(this,"lastScrollPosition"),Et(this,"isScrollTick"),Et(this,"fieldIds",new Map),Et(this,"getKeyByFieldSelector",e=>this.fieldIds.get(e)),Et(this,"getFieldSelectorByKey",e=>{for(const[t,i]of this.fieldIds)if(e===i)return t}),Et(this,"getCompatibleFields",()=>{const e={};return Object.keys(this.fields).forEach(t=>{let i=t;const s=this.getFieldSelectorByKey(t);"string"==typeof s&&(i=s),e[i]={...this.fields[t]}}),e}),Et(this,"setKeyByFieldSelector",e=>{if(this.fieldIds.has(e))return this.fieldIds.get(e);const t=String(this.fieldIds.size+1);return this.fieldIds.set(e,t),t}),Et(this,"refreshAllTooltips",()=>{this.tooltips.forEach(e=>{e.refresh()})}),Et(this,"handleDocumentScroll",()=>{this.lastScrollPosition=window.scrollY,this.isScrollTick||(window.requestAnimationFrame(()=>{this.refreshAllTooltips(),this.isScrollTick=!1}),this.isScrollTick=!0)}),Et(this,"formSubmitHandler",e=>{e.preventDefault(),this.isSubmitted=!0,this.validateHandler(e)}),Et(this,"handleFieldChange",e=>{let t;for(const i in this.fields)if(this.fields[i].elem===e){t=i;break}t&&(this.fields[t].touched=!0,this.validateField(t,!0))}),Et(this,"handleGroupChange",e=>{let t;for(const i in this.groupFields)if(this.groupFields[i].elems.find(t=>t===e)){t=i;break}t&&(this.groupFields[t].touched=!0,this.validateGroup(t,!0))}),Et(this,"handlerChange",e=>{e.target&&(this.handleFieldChange(e.target),this.handleGroupChange(e.target),this.renderErrors())}),this.initialize(e,t,i)}initialize(e,t,i){if(this.form=null,this.errors={},this.isValid=!1,this.isSubmitted=!1,this.globalConfig=zt,this.errorLabels={},this.successLabels={},this.eventListeners=[],this.customStyleTags={},this.tooltips=[],this.currentLocale="en","string"==typeof e){const t=document.querySelector(e);if(!t)throw Error(`Form with ${e} selector not found! Please check the form selector`);this.setForm(t)}else{if(!(e instanceof HTMLFormElement))throw Error("Form selector is not valid. Please specify a string selector or a DOM element.");this.setForm(e)}if(this.globalConfig={...zt,...t},i&&(this.dictLocale=[...i,...qt]),this.isTooltip()){const e=document.createElement("style");e.textContent=".just-validate-error-label[data-tooltip=true]{position:fixed;padding:4px 8px;background:#423f3f;color:#fff;white-space:nowrap;z-index:10;border-radius:4px;transform:translateY(-5px)}.just-validate-error-label[data-tooltip=true]:before{content:'';width:0;height:0;border-left:solid 5px transparent;border-right:solid 5px transparent;border-bottom:solid 5px #423f3f;position:absolute;z-index:3;display:block;bottom:-5px;transform:rotate(180deg);left:calc(50% - 5px)}.just-validate-error-label[data-tooltip=true][data-direction=left]{transform:translateX(-5px)}.just-validate-error-label[data-tooltip=true][data-direction=left]:before{right:-7px;bottom:auto;left:auto;top:calc(50% - 2px);transform:rotate(90deg)}.just-validate-error-label[data-tooltip=true][data-direction=right]{transform:translateX(5px)}.just-validate-error-label[data-tooltip=true][data-direction=right]:before{right:auto;bottom:auto;left:-7px;top:calc(50% - 2px);transform:rotate(-90deg)}.just-validate-error-label[data-tooltip=true][data-direction=bottom]{transform:translateY(5px)}.just-validate-error-label[data-tooltip=true][data-direction=bottom]:before{right:auto;bottom:auto;left:calc(50% - 5px);top:-5px;transform:rotate(0)}",this.customStyleTags[jt.Label]=document.head.appendChild(e),this.addListener("scroll",document,this.handleDocumentScroll)}}getLocalisedString(e,t,i){var s;const n=null!=i?i:e;let r=null==(s=this.dictLocale.find(e=>e.key===n))?void 0:s.dict[this.currentLocale];if(r||i&&(r=i),r&&void 0!==t)switch(e){case Pt.MaxLength:case Pt.MinLength:case Pt.MaxNumber:case Pt.MinNumber:case Pt.MinFilesCount:case Pt.MaxFilesCount:r=r.replace(":value",String(t))}return r||i||"Value is incorrect"}getFieldErrorMessage(e,t){const i="function"==typeof e.errorMessage?e.errorMessage(this.getElemValue(t),this.fields):e.errorMessage;return this.getLocalisedString(e.rule,e.value,i)}getFieldSuccessMessage(e,t){const i="function"==typeof e?e(this.getElemValue(t),this.fields):e;return this.getLocalisedString(void 0,void 0,i)}getGroupErrorMessage(e){return this.getLocalisedString(e.rule,void 0,e.errorMessage)}getGroupSuccessMessage(e){if(e.successMessage)return this.getLocalisedString(void 0,void 0,e.successMessage)}setFieldInvalid(e,t){this.fields[e].isValid=!1,this.fields[e].errorMessage=this.getFieldErrorMessage(t,this.fields[e].elem)}setFieldValid(e,t){this.fields[e].isValid=!0,void 0!==t&&(this.fields[e].successMessage=this.getFieldSuccessMessage(t,this.fields[e].elem))}setGroupInvalid(e,t){this.groupFields[e].isValid=!1,this.groupFields[e].errorMessage=this.getGroupErrorMessage(t)}setGroupValid(e,t){this.groupFields[e].isValid=!0,this.groupFields[e].successMessage=this.getGroupSuccessMessage(t)}getElemValue(e){switch(e.type){case"checkbox":return e.checked;case"file":return e.files;default:return e.value}}validateGroupRule(e,t,i){i.rule===Vt.Required&&(t.every(e=>!e.checked)?this.setGroupInvalid(e,i):this.setGroupValid(e,i))}validateFieldRule(e,t,i,s=!1){const n=i.value,r=this.getElemValue(t);var o;if(i.plugin)i.plugin(r,this.getCompatibleFields())||this.setFieldInvalid(e,i);else switch(i.rule){case Pt.Required:(e=>{let t=e;return"string"==typeof e&&(t=e.trim()),!t})(r)&&this.setFieldInvalid(e,i);break;case Pt.Email:if(Nt(r))break;o=r,Ot.test(o)||this.setFieldInvalid(e,i);break;case Pt.MaxLength:if(void 0===n){console.error(`Value for ${i.rule} rule for [${e}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(e,i);break}if("number"!=typeof n){console.error(`Value for ${i.rule} rule for [${e}] should be a number. The field will be always invalid.`),this.setFieldInvalid(e,i);break}if(Nt(r))break;((e,t)=>e.length>t)(r,n)&&this.setFieldInvalid(e,i);break;case Pt.MinLength:if(void 0===n){console.error(`Value for ${i.rule} rule for [${e}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(e,i);break}if("number"!=typeof n){console.error(`Value for ${i.rule} rule for [${e}] should be a number. The field will be always invalid.`),this.setFieldInvalid(e,i);break}if(Nt(r))break;((e,t)=>e.length<t)(r,n)&&this.setFieldInvalid(e,i);break;case Pt.Password:if(Nt(r))break;(e=>Mt.test(e))(r)||this.setFieldInvalid(e,i);break;case Pt.StrongPassword:if(Nt(r))break;(e=>Tt.test(e))(r)||this.setFieldInvalid(e,i);break;case Pt.Number:if(Nt(r))break;(e=>"string"==typeof e&&!isNaN(+e)&&!isNaN(parseFloat(e)))(r)||this.setFieldInvalid(e,i);break;case Pt.Integer:if(Nt(r))break;(e=>$t.test(e))(r)||this.setFieldInvalid(e,i);break;case Pt.MaxNumber:{if(void 0===n){console.error(`Value for ${i.rule} rule for [${e}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(e,i);break}if("number"!=typeof n){console.error(`Value for ${i.rule} rule for [${e}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(e,i);break}if(Nt(r))break;const t=+r;(Number.isNaN(t)||((e,t)=>e>t)(t,n))&&this.setFieldInvalid(e,i);break}case Pt.MinNumber:{if(void 0===n){console.error(`Value for ${i.rule} rule for [${e}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(e,i);break}if("number"!=typeof n){console.error(`Value for ${i.rule} rule for [${e}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(e,i);break}if(Nt(r))break;const t=+r;(Number.isNaN(t)||((e,t)=>e<t)(t,n))&&this.setFieldInvalid(e,i);break}case Pt.CustomRegexp:{if(void 0===n)return console.error(`Value for ${i.rule} rule for [${e}] field is not defined. This field will be always invalid.`),void this.setFieldInvalid(e,i);let t;try{t=new RegExp(n)}catch(t){console.error(`Value for ${i.rule} rule for [${e}] should be a valid regexp. This field will be always invalid.`),this.setFieldInvalid(e,i);break}const s=String(r);""===s||t.test(s)||this.setFieldInvalid(e,i);break}case Pt.MinFilesCount:if(void 0===n){console.error(`Value for ${i.rule} rule for [${e}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(e,i);break}if("number"!=typeof n){console.error(`Value for ${i.rule} rule for [${e}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(e,i);break}if(Number.isFinite(null==r?void 0:r.length)&&r.length<n){this.setFieldInvalid(e,i);break}break;case Pt.MaxFilesCount:if(void 0===n){console.error(`Value for ${i.rule} rule for [${e}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(e,i);break}if("number"!=typeof n){console.error(`Value for ${i.rule} rule for [${e}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(e,i);break}if(Number.isFinite(null==r?void 0:r.length)&&r.length>n){this.setFieldInvalid(e,i);break}break;case Pt.Files:{if(void 0===n)return console.error(`Value for ${i.rule} rule for [${e}] field is not defined. This field will be always invalid.`),void this.setFieldInvalid(e,i);if("object"!=typeof n)return console.error(`Value for ${i.rule} rule for [${e}] field should be an object. This field will be always invalid.`),void this.setFieldInvalid(e,i);const t=n.files;if("object"!=typeof t)return console.error(`Value for ${i.rule} rule for [${e}] field should be an object with files array. This field will be always invalid.`),void this.setFieldInvalid(e,i);const s=(e,t)=>{const i=Number.isFinite(t.minSize)&&e.size<t.minSize,s=Number.isFinite(t.maxSize)&&e.size>t.maxSize,n=Array.isArray(t.names)&&!t.names.includes(e.name),r=Array.isArray(t.extensions)&&!t.extensions.includes(e.name.split(".")[e.name.split(".").length-1]),o=Array.isArray(t.types)&&!t.types.includes(e.type);return i||s||n||r||o};if("object"==typeof r&&null!==r)for(let n=0,o=r.length;n<o;++n){const o=r.item(n);if(!o){this.setFieldInvalid(e,i);break}if(s(o,t)){this.setFieldInvalid(e,i);break}}break}default:{if("function"!=typeof i.validator)return console.error(`Validator for custom rule for [${e}] field should be a function. This field will be always invalid.`),void this.setFieldInvalid(e,i);const t=i.validator(r,this.getCompatibleFields());if("boolean"!=typeof t&&"function"!=typeof t&&console.error(`Validator return value for [${e}] field should be boolean or function. It will be cast to boolean.`),"function"==typeof t){if(!s){this.fields[e].asyncCheckPending=!1;const s=t();return Rt(s)?s.then(t=>{t||this.setFieldInvalid(e,i)}).catch(()=>{this.setFieldInvalid(e,i)}):(console.error(`Validator function for custom rule for [${e}] field should return a Promise. This field will be always invalid.`),void this.setFieldInvalid(e,i))}this.fields[e].asyncCheckPending=!0}t||this.setFieldInvalid(e,i)}}}isFormValid(){let e=!0;for(let t=0,i=Object.values(this.fields).length;t<i;++t){const i=Object.values(this.fields)[t];if(void 0===i.isValid){e=void 0;break}if(!1===i.isValid){e=!1;break}}for(let t=0,i=Object.values(this.groupFields).length;t<i;++t){const i=Object.values(this.groupFields)[t];if(void 0===i.isValid){e=void 0;break}if(!1===i.isValid){e=!1;break}}return e}validateField(e,t=!1){var i;const s=this.fields[e];s.isValid=!0;const n=[];return[...s.rules].reverse().forEach(i=>{const r=this.validateFieldRule(e,s.elem,i,t);Rt(r)&&n.push(r)}),s.isValid&&this.setFieldValid(e,null==(i=s.config)?void 0:i.successMessage),Promise.allSettled(n).finally(()=>{var e;t&&(null==(e=this.onValidateCallback)||e.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}))})}revalidateField(e){if("string"!=typeof e&&!Bt(e))throw Error("Field selector is not valid. Please specify a string selector or a valid DOM element.");const t=this.getKeyByFieldSelector(e);return t&&this.fields[t]?new Promise(e=>{this.validateField(t,!0).finally(()=>{this.clearFieldStyle(t),this.clearFieldLabel(t),this.renderFieldError(t,!0),e(!!this.fields[t].isValid)})}):(console.error("Field not found. Check the field selector."),Promise.reject())}revalidateGroup(e){if("string"!=typeof e&&!Bt(e))throw Error("Group selector is not valid. Please specify a string selector or a valid DOM element.");const t=this.getKeyByFieldSelector(e);return t&&this.groupFields[t]?new Promise(e=>{this.validateGroup(t).finally(()=>{this.clearFieldLabel(t),this.renderGroupError(t,!0),e(!!this.groupFields[t].isValid)})}):(console.error("Group not found. Check the group selector."),Promise.reject())}validateGroup(e,t=!1){const i=this.groupFields[e],s=[];return[...i.rules].reverse().forEach(t=>{const n=this.validateGroupRule(e,i.elems,t);Rt(n)&&s.push(n)}),Promise.allSettled(s).finally(()=>{var e;t&&(null==(e=this.onValidateCallback)||e.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}))})}focusInvalidField(){for(const e in this.fields){const t=this.fields[e];if(!t.isValid){setTimeout(()=>t.elem.focus(),0);break}}}afterSubmitValidation(e=!1){this.renderErrors(e),this.globalConfig.focusInvalidField&&!e&&this.focusInvalidField()}validate(e=!1){return new Promise(t=>{const i=[];Object.keys(this.fields).forEach(e=>{const t=this.validateField(e);Rt(t)&&i.push(t)}),Object.keys(this.groupFields).forEach(e=>{const t=this.validateGroup(e);Rt(t)&&i.push(t)}),Promise.allSettled(i).then(()=>{var s;this.afterSubmitValidation(e),null==(s=this.onValidateCallback)||s.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}),t(!!i.length)})})}revalidate(){return new Promise(e=>{this.validateHandler(void 0,!0).finally(()=>{this.globalConfig.focusInvalidField&&this.focusInvalidField(),e(this.isValid)})})}validateHandler(e,t=!1){return this.globalConfig.lockForm&&this.lockForm(),this.validate(t).finally(()=>{var t,i,s;this.globalConfig.lockForm&&this.unlockForm(),this.isValid?(null==(t=this.onSuccessCallback)||t.call(this,e),this.globalConfig.submitFormAutomatically&&(null==(i=null==e?void 0:e.currentTarget)||i.submit())):null==(s=this.onFailCallback)||s.call(this,this.getCompatibleFields(),this.groupFields)})}setForm(e){this.form=e,this.form.setAttribute("novalidate","novalidate"),this.removeListener("submit",this.form,this.formSubmitHandler),this.addListener("submit",this.form,this.formSubmitHandler)}addListener(e,t,i){t.addEventListener(e,i),this.eventListeners.push({type:e,elem:t,func:i})}removeListener(e,t,i){t.removeEventListener(e,i),this.eventListeners=this.eventListeners.filter(i=>i.type!==e||i.elem!==t)}addField(e,t,i){if("string"!=typeof e&&!Bt(e))throw Error("Field selector is not valid. Please specify a string selector or a valid DOM element.");let s;if(s="string"==typeof e?this.form.querySelector(e):e,!s)throw Error("Field doesn't exist in the DOM! Please check the field selector.");if(!Array.isArray(t)||!t.length)throw Error("Rules argument should be an array and should contain at least 1 element.");t.forEach(e=>{if(!("rule"in e||"validator"in e||"plugin"in e))throw Error("Rules argument must contain at least one rule or validator property.");if(!(e.validator||e.plugin||e.rule&&Object.values(Pt).includes(e.rule)))throw Error(`Rule should be one of these types: ${Object.values(Pt).join(", ")}. Provided value: ${e.rule}`)});const n=this.setKeyByFieldSelector(e);return this.fields[n]={elem:s,rules:t,isValid:void 0,touched:!1,config:i},this.setListeners(s),(this.isSubmitted||this.globalConfig.validateBeforeSubmitting)&&this.validateField(n),this}removeField(e){if("string"!=typeof e&&!Bt(e))throw Error("Field selector is not valid. Please specify a string selector or a valid DOM element.");const t=this.getKeyByFieldSelector(e);if(!t||!this.fields[t])return console.error("Field not found. Check the field selector."),this;const i=this.getListenerType(this.fields[t].elem.type);return this.removeListener(i,this.fields[t].elem,this.handlerChange),this.clearErrors(),delete this.fields[t],this}removeGroup(e){if("string"!=typeof e)throw Error("Group selector is not valid. Please specify a string selector.");const t=this.getKeyByFieldSelector(e);return t&&this.groupFields[t]?(this.groupFields[t].elems.forEach(e=>{const t=this.getListenerType(e.type);this.removeListener(t,e,this.handlerChange)}),this.clearErrors(),delete this.groupFields[t],this):(console.error("Group not found. Check the group selector."),this)}addRequiredGroup(e,t,i,s){if("string"!=typeof e&&!Bt(e))throw Error("Group selector is not valid. Please specify a string selector or a valid DOM element.");let n;if(n="string"==typeof e?this.form.querySelector(e):e,!n)throw Error("Group selector not found! Please check the group selector.");const r=n.querySelectorAll("input"),o=Array.from(r).filter(e=>{const t=((e,t)=>{const i=[...t].reverse();for(let t=0,s=i.length;t<s;++t){const s=i[t];for(const t in e){const i=e[t];if(i.groupElem===s)return[t,i]}}return null})(this.groupFields,(e=>{let t=e;const i=[];for(;t;)i.unshift(t),t=t.parentNode;return i})(e));return!t||t[1].elems.find(t=>t!==e)}),a=this.setKeyByFieldSelector(e);return this.groupFields[a]={rules:[{rule:Vt.Required,errorMessage:t,successMessage:s}],groupElem:n,elems:o,touched:!1,isValid:void 0,config:i},r.forEach(e=>{this.setListeners(e)}),this}getListenerType(e){switch(e){case"checkbox":case"select-one":case"file":case"radio":return"change";default:return"input"}}setListeners(e){const t=this.getListenerType(e.type);this.removeListener(t,e,this.handlerChange),this.addListener(t,e,this.handlerChange)}clearFieldLabel(e){var t,i;null==(t=this.errorLabels[e])||t.remove(),null==(i=this.successLabels[e])||i.remove()}clearFieldStyle(e){var t,i,s,n;const r=this.fields[e],o=(null==(t=r.config)?void 0:t.errorFieldStyle)||this.globalConfig.errorFieldStyle;Object.keys(o).forEach(e=>{r.elem.style[e]=""});const a=(null==(i=r.config)?void 0:i.successFieldStyle)||this.globalConfig.successFieldStyle||{};Object.keys(a).forEach(e=>{r.elem.style[e]=""}),r.elem.classList.remove(...Ht((null==(s=r.config)?void 0:s.errorFieldCssClass)||this.globalConfig.errorFieldCssClass),...Ht((null==(n=r.config)?void 0:n.successFieldCssClass)||this.globalConfig.successFieldCssClass))}clearErrors(){var e,t;Object.keys(this.errorLabels).forEach(e=>this.errorLabels[e].remove()),Object.keys(this.successLabels).forEach(e=>this.successLabels[e].remove());for(const e in this.fields)this.clearFieldStyle(e);for(const i in this.groupFields){const s=this.groupFields[i],n=(null==(e=s.config)?void 0:e.errorFieldStyle)||this.globalConfig.errorFieldStyle;Object.keys(n).forEach(e=>{s.elems.forEach(t=>{var i;t.style[e]="",t.classList.remove(...Ht((null==(i=s.config)?void 0:i.errorFieldCssClass)||this.globalConfig.errorFieldCssClass))})});const r=(null==(t=s.config)?void 0:t.successFieldStyle)||this.globalConfig.successFieldStyle||{};Object.keys(r).forEach(e=>{s.elems.forEach(t=>{var i;t.style[e]="",t.classList.remove(...Ht((null==(i=s.config)?void 0:i.successFieldCssClass)||this.globalConfig.successFieldCssClass))})})}this.tooltips=[]}isTooltip(){return!!this.globalConfig.tooltip}lockForm(){const e=this.form.querySelectorAll("input, textarea, button, select");for(let t=0,i=e.length;t<i;++t)e[t].setAttribute("data-just-validate-fallback-disabled",e[t].disabled?"true":"false"),e[t].setAttribute("disabled","disabled"),e[t].style.pointerEvents="none",e[t].style.webkitFilter="grayscale(100%)",e[t].style.filter="grayscale(100%)"}unlockForm(){const e=this.form.querySelectorAll("input, textarea, button, select");for(let t=0,i=e.length;t<i;++t)"true"!==e[t].getAttribute("data-just-validate-fallback-disabled")&&e[t].removeAttribute("disabled"),e[t].style.pointerEvents="",e[t].style.webkitFilter="",e[t].style.filter=""}renderTooltip(e,t,i){var s;const{top:n,left:r,width:o,height:a}=e.getBoundingClientRect(),l=t.getBoundingClientRect(),c=i||(null==(s=this.globalConfig.tooltip)?void 0:s.position);switch(c){case"left":t.style.top=n+a/2-l.height/2+"px",t.style.left=r-l.width-5+"px";break;case"top":t.style.top=n-l.height-5+"px",t.style.left=r+o/2-l.width/2+"px";break;case"right":t.style.top=n+a/2-l.height/2+"px",t.style.left=`${r+o+5}px`;break;case"bottom":t.style.top=`${n+a+5}px`,t.style.left=r+o/2-l.width/2+"px"}return t.dataset.direction=c,{refresh:()=>{this.renderTooltip(e,t,i)}}}createErrorLabelElem(e,t,i){const s=document.createElement("div");s.innerHTML=t;const n=this.isTooltip()?null==i?void 0:i.errorLabelStyle:(null==i?void 0:i.errorLabelStyle)||this.globalConfig.errorLabelStyle;return Object.assign(s.style,n),s.classList.add(...Ht((null==i?void 0:i.errorLabelCssClass)||this.globalConfig.errorLabelCssClass),"just-validate-error-label"),this.isTooltip()&&(s.dataset.tooltip="true"),this.globalConfig.testingMode&&(s.dataset.testId=`error-label-${e}`),this.errorLabels[e]=s,s}createSuccessLabelElem(e,t,i){if(void 0===t)return null;const s=document.createElement("div");s.innerHTML=t;const n=(null==i?void 0:i.successLabelStyle)||this.globalConfig.successLabelStyle;return Object.assign(s.style,n),s.classList.add(...Ht((null==i?void 0:i.successLabelCssClass)||this.globalConfig.successLabelCssClass),"just-validate-success-label"),this.globalConfig.testingMode&&(s.dataset.testId=`success-label-${e}`),this.successLabels[e]=s,s}renderErrorsContainer(e,t){const i=t||this.globalConfig.errorsContainer;if("string"==typeof i){const t=this.form.querySelector(i);if(t)return t.appendChild(e),!0;console.error(`Error container with ${i} selector not found. Errors will be rendered as usual`)}return i instanceof Element?(i.appendChild(e),!0):(void 0!==i&&console.error("Error container not found. It should be a string or existing Element. Errors will be rendered as usual"),!1)}renderGroupLabel(e,t,i,s){!s&&this.renderErrorsContainer(t,i)||e.appendChild(t)}renderFieldLabel(e,t,i,s){var n,r,o,a,l,c,d;if(s||!this.renderErrorsContainer(t,i))if("checkbox"===e.type||"radio"===e.type){const i=document.querySelector(`label[for="${e.getAttribute("id")}"]`);"label"===(null==(r=null==(n=e.parentElement)?void 0:n.tagName)?void 0:r.toLowerCase())?null==(a=null==(o=e.parentElement)?void 0:o.parentElement)||a.appendChild(t):i?null==(l=i.parentElement)||l.appendChild(t):null==(c=e.parentElement)||c.appendChild(t)}else null==(d=e.parentElement)||d.appendChild(t)}showLabels(e,t){Object.keys(e).forEach((i,s)=>{const n=e[i],r=this.getKeyByFieldSelector(i);if(!r||!this.fields[r])return void console.error("Field not found. Check the field selector.");const o=this.fields[r];o.isValid=!t,this.clearFieldStyle(r),this.clearFieldLabel(r),this.renderFieldError(r,!1,n),0===s&&this.globalConfig.focusInvalidField&&setTimeout(()=>o.elem.focus(),0)})}showErrors(e){if("object"!=typeof e)throw Error("[showErrors]: Errors should be an object with key: value format");this.showLabels(e,!0)}showSuccessLabels(e){if("object"!=typeof e)throw Error("[showSuccessLabels]: Labels should be an object with key: value format");this.showLabels(e,!1)}renderFieldError(e,t=!1,i){var s,n,r,o,a,l;const c=this.fields[e];if(!1===c.isValid&&(this.isValid=!1),void 0===c.isValid||!t&&!this.isSubmitted&&!c.touched&&void 0===i)return;if(c.isValid){if(!c.asyncCheckPending){const t=this.createSuccessLabelElem(e,void 0!==i?i:c.successMessage,c.config);t&&this.renderFieldLabel(c.elem,t,null==(s=c.config)?void 0:s.errorsContainer,!0),c.elem.classList.add(...Ht((null==(n=c.config)?void 0:n.successFieldCssClass)||this.globalConfig.successFieldCssClass))}return}c.elem.classList.add(...Ht((null==(r=c.config)?void 0:r.errorFieldCssClass)||this.globalConfig.errorFieldCssClass));const d=this.createErrorLabelElem(e,void 0!==i?i:c.errorMessage,c.config);this.renderFieldLabel(c.elem,d,null==(o=c.config)?void 0:o.errorsContainer),this.isTooltip()&&this.tooltips.push(this.renderTooltip(c.elem,d,null==(l=null==(a=c.config)?void 0:a.tooltip)?void 0:l.position))}renderGroupError(e,t=!0){var i,s,n,r;const o=this.groupFields[e];if(!1===o.isValid&&(this.isValid=!1),void 0===o.isValid||!t&&!this.isSubmitted&&!o.touched)return;if(o.isValid){o.elems.forEach(e=>{var t,i;Object.assign(e.style,(null==(t=o.config)?void 0:t.successFieldStyle)||this.globalConfig.successFieldStyle),e.classList.add(...Ht((null==(i=o.config)?void 0:i.successFieldCssClass)||this.globalConfig.successFieldCssClass))});const t=this.createSuccessLabelElem(e,o.successMessage,o.config);return void(t&&this.renderGroupLabel(o.groupElem,t,null==(i=o.config)?void 0:i.errorsContainer,!0))}this.isValid=!1,o.elems.forEach(e=>{var t,i;Object.assign(e.style,(null==(t=o.config)?void 0:t.errorFieldStyle)||this.globalConfig.errorFieldStyle),e.classList.add(...Ht((null==(i=o.config)?void 0:i.errorFieldCssClass)||this.globalConfig.errorFieldCssClass))});const a=this.createErrorLabelElem(e,o.errorMessage,o.config);this.renderGroupLabel(o.groupElem,a,null==(s=o.config)?void 0:s.errorsContainer),this.isTooltip()&&this.tooltips.push(this.renderTooltip(o.groupElem,a,null==(r=null==(n=o.config)?void 0:n.tooltip)?void 0:r.position))}renderErrors(e=!1){if(this.isSubmitted||e||this.globalConfig.validateBeforeSubmitting){this.clearErrors(),this.isValid=!0;for(const t in this.groupFields)this.renderGroupError(t,e);for(const t in this.fields)this.renderFieldError(t,e)}}destroy(){this.eventListeners.forEach(e=>{this.removeListener(e.type,e.elem,e.func)}),Object.keys(this.customStyleTags).forEach(e=>{this.customStyleTags[e].remove()}),this.clearErrors(),this.globalConfig.lockForm&&this.unlockForm()}refresh(){this.destroy(),this.form?(this.initialize(this.form,this.globalConfig),Object.keys(this.fields).forEach(e=>{const t=this.getFieldSelectorByKey(e);t&&this.addField(t,[...this.fields[e].rules],this.fields[e].config)})):console.error("Cannot initialize the library! Form is not defined")}setCurrentLocale(e){"string"==typeof e||void 0===e?(this.currentLocale=e,this.isSubmitted&&this.validate()):console.error("Current locale should be a string")}onSuccess(e){return this.onSuccessCallback=e,this}onFail(e){return this.onFailCallback=e,this}onValidate(e){return this.onValidateCallback=e,this}}function Ut(e){const t=document.querySelector(`#${e}`);if(!t)return!0;const i=t.closest(".formgent-field");return!(null===t.offsetParent&&i&&null!==i.offsetParent||i&&null!==i.offsetParent&&null!==t.offsetParent)}var Gt=o(385);const Wt=o.n(Gt)();var Yt=o(654);function Zt(e,t){e.split(/\s+/).forEach(e=>{t(e)})}class Jt{constructor(){this._events={}}on(e,t){Zt(e,e=>{const i=this._events[e]||[];i.push(t),this._events[e]=i})}off(e,t){var i=arguments.length;0!==i?Zt(e,e=>{if(1===i)return void delete this._events[e];const s=this._events[e];void 0!==s&&(s.splice(s.indexOf(t),1),this._events[e]=s)}):this._events={}}trigger(e,...t){var i=this;Zt(e,e=>{const s=i._events[e];void 0!==s&&s.forEach(e=>{e.apply(i,t)})})}}const Qt=e=>(e=e.filter(Boolean)).length<2?e[0]||"":1==si(e)?"["+e.join("")+"]":"(?:"+e.join("|")+")",Xt=e=>{if(!ti(e))return e.join("");let t="",i=0;const s=()=>{i>1&&(t+="{"+i+"}")};return e.forEach((n,r)=>{n!==e[r-1]?(s(),t+=n,i=1):i++}),s(),t},ei=e=>{let t=Array.from(e);return Qt(t)},ti=e=>new Set(e).size!==e.length,ii=e=>(e+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),si=e=>e.reduce((e,t)=>Math.max(e,ni(t)),0),ni=e=>Array.from(e).length,ri=e=>{if(1===e.length)return[[e]];let t=[];const i=e.substring(1);return ri(i).forEach(function(i){let s=i.slice(0);s[0]=e.charAt(0)+s[0],t.push(s),s=i.slice(0),s.unshift(e.charAt(0)),t.push(s)}),t},oi=[[0,65535]];let ai,li;const ci={},di={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let e in di){let t=di[e]||"";for(let i=0;i<t.length;i++){let s=t.substring(i,i+1);ci[s]=e}}const ui=new RegExp(Object.keys(ci).join("|")+"|[̀-ͯ·ʾʼ]","gu"),hi=(e,t="NFKD")=>e.normalize(t),pi=e=>Array.from(e).reduce((e,t)=>e+mi(t),""),mi=e=>(e=hi(e).toLowerCase().replace(ui,e=>ci[e]||""),hi(e,"NFC")),fi=e=>{const t=(e=>{const t={},i=(e,i)=>{const s=t[e]||new Set,n=new RegExp("^"+ei(s)+"$","iu");i.match(n)||(s.add(ii(i)),t[e]=s)};for(let t of function*(e){for(const[t,i]of e)for(let e=t;e<=i;e++){let t=String.fromCharCode(e),i=pi(t);i!=t.toLowerCase()&&(i.length>3||0!=i.length&&(yield{folded:i,composed:t,code_point:e}))}}(e))i(t.folded,t.folded),i(t.folded,t.composed);return t})(e),i={};let s=[];for(let e in t){let n=t[e];n&&(i[e]=ei(n)),e.length>1&&s.push(ii(e))}s.sort((e,t)=>t.length-e.length);const n=Qt(s);return li=new RegExp("^"+n,"u"),i},gi=(e,t=1)=>(t=Math.max(t,e.length-1),Qt(ri(e).map(e=>((e,t=1)=>{let i=0;return e=e.map(e=>(ai[e]&&(i+=e.length),ai[e]||e)),i>=t?Xt(e):""})(e,t)))),yi=(e,t=!0)=>{let i=e.length>1?1:0;return Qt(e.map(e=>{let s=[];const n=t?e.length():e.length()-1;for(let t=0;t<n;t++)s.push(gi(e.substrs[t]||"",i));return Xt(s)}))},vi=(e,t)=>{for(const i of t){if(i.start!=e.start||i.end!=e.end)continue;if(i.substrs.join("")!==e.substrs.join(""))continue;let t=e.parts;const s=e=>{for(const i of t){if(i.start===e.start&&i.substr===e.substr)return!1;if(1!=e.length&&1!=i.length){if(e.start<i.start&&e.end>i.start)return!0;if(i.start<e.start&&i.end>e.start)return!0}}return!1};if(!(i.parts.filter(s).length>0))return!0}return!1};class bi{parts;substrs;start;end;constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(e){e&&(this.parts.push(e),this.substrs.push(e.substr),this.start=Math.min(e.start,this.start),this.end=Math.max(e.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(e,t){let i=new bi,s=JSON.parse(JSON.stringify(this.parts)),n=s.pop();for(const e of s)i.add(e);let r=t.substr.substring(0,e-n.start),o=r.length;return i.add({start:n.start,end:n.start+o,length:o,substr:r}),i}}const _i=(e,t)=>{if(e)return e[t]},wi=(e,t)=>{if(e){for(var i,s=t.split(".");(i=s.shift())&&(e=e[i]););return e}},Ci=(e,t,i)=>{var s,n;return e?(e+="",null==t.regex||-1===(n=e.search(t.regex))?0:(s=t.string.length/e.length,0===n&&(s+=.5),s*i)):0},ki=(e,t)=>{var i=e[t];if("function"==typeof i)return i;i&&!Array.isArray(i)&&(e[t]=[i])},Si=(e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)},Di=(e,t)=>"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=pi(e+"").toLowerCase())>(t=pi(t+"").toLowerCase())?1:t>e?-1:0;class Ii{items;settings;constructor(e,t){this.items=e,this.settings=t||{diacritics:!0}}tokenize(e,t,i){if(!e||!e.length)return[];const s=[],n=e.split(/\s+/);var r;return i&&(r=new RegExp("^("+Object.keys(i).map(ii).join("|")+"):(.*)$")),n.forEach(e=>{let i,n=null,o=null;r&&(i=e.match(r))&&(n=i[1],e=i[2]),e.length>0&&(o=this.settings.diacritics?(e=>{void 0===ai&&(ai=fi(oi)),e=pi(e);let t="",i=[new bi];for(let s=0;s<e.length;s++){let n=e.substring(s).match(li);const r=e.substring(s,s+1),o=n?n[0]:null;let a=[],l=new Set;for(const e of i){const t=e.last();if(!t||1==t.length||t.end<=s)if(o){const t=o.length;e.add({start:s,end:s+t,length:t,substr:o}),l.add("1")}else e.add({start:s,end:s+1,length:1,substr:r}),l.add("2");else if(o){let i=e.clone(s,t);const n=o.length;i.add({start:s,end:s+n,length:n,substr:o}),a.push(i)}else l.add("3")}if(a.length>0){a=a.sort((e,t)=>e.length()-t.length());for(let e of a)vi(e,i)||i.push(e)}else if(s>0&&1==l.size&&!l.has("3")){t+=yi(i,!1);let e=new bi;const s=i[0];s&&e.add(s.last()),i=[e]}}return t+=yi(i,!0),t})(e)||null:ii(e),o&&t&&(o="\\b"+o)),s.push({string:e,regex:o?new RegExp(o,"iu"):null,field:n})}),s}getScoreFunction(e,t){var i=this.prepareSearch(e,t);return this._getScoreFunction(i)}_getScoreFunction(e){const t=e.tokens,i=t.length;if(!i)return function(){return 0};const s=e.options.fields,n=e.weights,r=s.length,o=e.getAttrFn;if(!r)return function(){return 1};const a=1===r?function(e,t){const i=s[0].field;return Ci(o(t,i),e,n[i]||1)}:function(e,t){var i=0;if(e.field){const s=o(t,e.field);!e.regex&&s?i+=1/r:i+=Ci(s,e,1)}else Si(n,(s,n)=>{i+=Ci(o(t,n),e,s)});return i/r};return 1===i?function(e){return a(t[0],e)}:"and"===e.options.conjunction?function(e){var s,n=0;for(let i of t){if((s=a(i,e))<=0)return 0;n+=s}return n/i}:function(e){var s=0;return Si(t,t=>{s+=a(t,e)}),s/i}}getSortFunction(e,t){var i=this.prepareSearch(e,t);return this._getSortFunction(i)}_getSortFunction(e){var t,i=[];const s=this,n=e.options,r=!e.query&&n.sort_empty?n.sort_empty:n.sort;if("function"==typeof r)return r.bind(this);const o=function(t,i){return"$score"===t?i.score:e.getAttrFn(s.items[i.id],t)};if(r)for(let t of r)(e.query||"$score"!==t.field)&&i.push(t);if(e.query){t=!0;for(let e of i)if("$score"===e.field){t=!1;break}t&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(e=>"$score"!==e.field);return i.length?function(e,t){var s,n;for(let r of i)if(n=r.field,s=("desc"===r.direction?-1:1)*Di(o(n,e),o(n,t)))return s;return 0}:null}prepareSearch(e,t){const i={};var s=Object.assign({},t);if(ki(s,"sort"),ki(s,"sort_empty"),s.fields){ki(s,"fields");const e=[];s.fields.forEach(t=>{"string"==typeof t&&(t={field:t,weight:1}),e.push(t),i[t.field]="weight"in t?t.weight:1}),s.fields=e}return{options:s,query:e.toLowerCase().trim(),tokens:this.tokenize(e,s.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:s.nesting?wi:_i}}search(e,t){var i,s,n=this;s=this.prepareSearch(e,t),t=s.options,e=s.query;const r=t.score||n._getScoreFunction(s);e.length?Si(n.items,(e,n)=>{i=r(e),(!1===t.filter||i>0)&&s.items.push({score:i,id:n})}):Si(n.items,(e,t)=>{s.items.push({score:1,id:t})});const o=n._getSortFunction(s);return o&&s.items.sort(o),s.total=s.items.length,"number"==typeof t.limit&&(s.items=s.items.slice(0,t.limit)),s}}const Li=e=>null==e?null:xi(e),xi=e=>"boolean"==typeof e?e?"1":"0":e+"",Fi=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Ai=(e,t)=>{var i;return function(s,n){var r=this;i&&(r.loading=Math.max(r.loading-1,0),clearTimeout(i)),i=setTimeout(function(){i=null,r.loadedSearches[s]=!0,e.call(r,s,n)},t)}},Ei=(e,t,i)=>{var s,n=e.trigger,r={};for(s of(e.trigger=function(){var i=arguments[0];if(-1===t.indexOf(i))return n.apply(e,arguments);r[i]=arguments},i.apply(e,[]),e.trigger=n,t))s in r&&n.apply(e,r[s])},Oi=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())},$i=(e,t,i,s)=>{e.addEventListener(t,i,s)},Mi=(e,t)=>!!t&&!!t[e]&&1==(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0),Ti=(e,t)=>e.getAttribute("id")||(e.setAttribute("id",t),t),Ni=e=>e.replace(/[\\"']/g,"\\$&"),Pi=(e,t)=>{t&&e.append(t)},Vi=(e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)},ji=e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(qi(e)){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return document.querySelector(e)},qi=e=>"string"==typeof e&&e.indexOf("<")>-1,Ri=(e,t)=>{var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!1),e.dispatchEvent(i)},Hi=(e,t)=>{Object.assign(e.style,t)},Bi=(e,...t)=>{var i=Ki(t);(e=Ui(e)).map(e=>{i.map(t=>{e.classList.add(t)})})},zi=(e,...t)=>{var i=Ki(t);(e=Ui(e)).map(e=>{i.map(t=>{e.classList.remove(t)})})},Ki=e=>{var t=[];return Vi(e,e=>{"string"==typeof e&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Ui=e=>(Array.isArray(e)||(e=[e]),e),Gi=(e,t,i)=>{if(!i||i.contains(e))for(;e&&e.matches;){if(e.matches(t))return e;e=e.parentNode}},Wi=(e,t=0)=>t>0?e[e.length-1]:e[0],Yi=(e,t)=>{if(!e)return-1;t=t||e.nodeName;for(var i=0;e=e.previousElementSibling;)e.matches(t)&&i++;return i},Zi=(e,t)=>{Vi(t,(t,i)=>{null==t?e.removeAttribute(i):e.setAttribute(i,""+t)})},Ji=(e,t)=>{e.parentNode&&e.parentNode.replaceChild(t,e)},Qi="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey",Xi={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(e){return e.length>0},render:{}};function es(e,t){var i=Object.assign({},Xi,t),s=i.dataAttr,n=i.labelField,r=i.valueField,o=i.disabledField,a=i.optgroupField,l=i.optgroupLabelField,c=i.optgroupValueField,d=e.tagName.toLowerCase(),u=e.getAttribute("placeholder")||e.getAttribute("data-placeholder");if(!u&&!i.allowEmptyOption){let t=e.querySelector('option[value=""]');t&&(u=t.textContent)}var h={placeholder:u,options:[],optgroups:[],items:[],maxItems:null};return"select"===d?(()=>{var t,d=h.options,u={},p=1;let m=0;var f=e=>{var t=Object.assign({},e.dataset),i=s&&t[s];return"string"==typeof i&&i.length&&(t=Object.assign(t,JSON.parse(i))),t},g=(e,t)=>{var s=Li(e.value);if(null!=s&&(s||i.allowEmptyOption)){if(u.hasOwnProperty(s)){if(t){var l=u[s][a];l?Array.isArray(l)?l.push(t):u[s][a]=[l,t]:u[s][a]=t}}else{var c=f(e);c[n]=c[n]||e.textContent,c[r]=c[r]||s,c[o]=c[o]||e.disabled,c[a]=c[a]||t,c.$option=e,c.$order=c.$order||++m,u[s]=c,d.push(c)}e.selected&&h.items.push(s)}};h.maxItems=e.hasAttribute("multiple")?null:1,Vi(e.children,e=>{var i,s,n;"optgroup"===(t=e.tagName.toLowerCase())?((n=f(i=e))[l]=n[l]||i.getAttribute("label")||"",n[c]=n[c]||p++,n[o]=n[o]||i.disabled,n.$order=n.$order||++m,h.optgroups.push(n),s=n[c],Vi(i.children,e=>{g(e,s)})):"option"===t&&g(e)})})():(()=>{const t=e.getAttribute(s);if(t)h.options=JSON.parse(t),Vi(h.options,e=>{h.items.push(e[r])});else{var o=e.value.trim()||"";if(!i.allowEmptyOption&&!o.length)return;const t=o.split(i.delimiter);Vi(t,e=>{const t={};t[n]=e,t[r]=e,h.options.push(t)}),h.items=t}})(),Object.assign({},Xi,h,t)}var ts=0;class is extends(function(e){return e.plugins={},class extends e{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,i){e.plugins[t]={name:t,fn:i}}initializePlugins(e){var t,i;const s=this,n=[];if(Array.isArray(e))e.forEach(e=>{"string"==typeof e?n.push(e):(s.plugins.settings[e.name]=e.options,n.push(e.name))});else if(e)for(t in e)e.hasOwnProperty(t)&&(s.plugins.settings[t]=e[t],n.push(t));for(;i=n.shift();)s.require(i)}loadPlugin(t){var i=this,s=i.plugins,n=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');s.requested[t]=!0,s.loaded[t]=n.fn.apply(i,[i.plugins.settings[t]||{}]),s.names.push(t)}require(e){var t=this,i=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(i.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return i.loaded[e]}}}(Jt)){constructor(e,t){var i;super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,ts++;var s=ji(e);if(s.tomselect)throw new Error("Tom Select already initialized on this element");s.tomselect=this,i=(window.getComputedStyle&&window.getComputedStyle(s,null)).getPropertyValue("direction");const n=es(s,t);this.settings=n,this.input=s,this.tabIndex=s.tabIndex||0,this.is_select_tag="select"===s.tagName.toLowerCase(),this.rtl=/rtl/i.test(i),this.inputId=Ti(s,"tomselect-"+ts),this.isRequired=s.required,this.sifter=new Ii(this.options,{diacritics:n.diacritics}),n.mode=n.mode||(1===n.maxItems?"single":"multi"),"boolean"!=typeof n.hideSelected&&(n.hideSelected="multi"===n.mode),"boolean"!=typeof n.hidePlaceholder&&(n.hidePlaceholder="multi"!==n.mode);var r=n.createFilter;"function"!=typeof r&&("string"==typeof r&&(r=new RegExp(r)),r instanceof RegExp?n.createFilter=e=>r.test(e):n.createFilter=e=>this.settings.duplicates||!this.options[e]),this.initializePlugins(n.plugins),this.setupCallbacks(),this.setupTemplates();const o=ji("<div>"),a=ji("<div>"),l=this._render("dropdown"),c=ji('<div role="listbox" tabindex="-1">'),d=this.input.getAttribute("class")||"",u=n.mode;var h;Bi(o,n.wrapperClass,d,u),Bi(a,n.controlClass),Pi(o,a),Bi(l,n.dropdownClass,u),n.copyClassesToDropdown&&Bi(l,d),Bi(c,n.dropdownContentClass),Pi(l,c),ji(n.dropdownParent||o).appendChild(l),qi(n.controlInput)?(h=ji(n.controlInput),Vi(["autocorrect","autocapitalize","autocomplete","spellcheck"],e=>{s.getAttribute(e)&&Zi(h,{[e]:s.getAttribute(e)})}),h.tabIndex=-1,a.appendChild(h),this.focus_node=h):n.controlInput?(h=ji(n.controlInput),this.focus_node=h):(h=ji("<input/>"),this.focus_node=a),this.wrapper=o,this.dropdown=l,this.dropdown_content=c,this.control=a,this.control_input=h,this.setup()}setup(){const e=this,t=e.settings,i=e.control_input,s=e.dropdown,n=e.dropdown_content,r=e.wrapper,o=e.control,a=e.input,l=e.focus_node,c={passive:!0},d=e.inputId+"-ts-dropdown";Zi(n,{id:d}),Zi(l,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":d});const u=Ti(l,e.inputId+"-ts-control"),h="label[for='"+(e=>e.replace(/['"\\]/g,"\\$&"))(e.inputId)+"']",p=document.querySelector(h),m=e.focus.bind(e);if(p){$i(p,"click",m),Zi(p,{for:u});const t=Ti(p,e.inputId+"-ts-label");Zi(l,{"aria-labelledby":t}),Zi(n,{"aria-labelledby":t})}if(r.style.width=a.style.width,e.plugins.names.length){const t="plugin-"+e.plugins.names.join(" plugin-");Bi([r,s],t)}(null===t.maxItems||t.maxItems>1)&&e.is_select_tag&&Zi(a,{multiple:"multiple"}),t.placeholder&&Zi(i,{placeholder:t.placeholder}),!t.splitOn&&t.delimiter&&(t.splitOn=new RegExp("\\s*"+ii(t.delimiter)+"+\\s*")),t.load&&t.loadThrottle&&(t.load=Ai(t.load,t.loadThrottle)),$i(s,"mousemove",()=>{e.ignoreHover=!1}),$i(s,"mouseenter",t=>{var i=Gi(t.target,"[data-selectable]",s);i&&e.onOptionHover(t,i)},{capture:!0}),$i(s,"click",t=>{const i=Gi(t.target,"[data-selectable]");i&&(e.onOptionSelect(t,i),Oi(t,!0))}),$i(o,"click",t=>{var s=Gi(t.target,"[data-ts-item]",o);s&&e.onItemSelect(t,s)?Oi(t,!0):""==i.value&&(e.onClick(),Oi(t,!0))}),$i(l,"keydown",t=>e.onKeyDown(t)),$i(i,"keypress",t=>e.onKeyPress(t)),$i(i,"input",t=>e.onInput(t)),$i(l,"blur",t=>e.onBlur(t)),$i(l,"focus",t=>e.onFocus(t)),$i(i,"paste",t=>e.onPaste(t));const f=t=>{const n=t.composedPath()[0];if(!r.contains(n)&&!s.contains(n))return e.isFocused&&e.blur(),void e.inputState();n==i&&e.isOpen?t.stopPropagation():Oi(t,!0)},g=()=>{e.isOpen&&e.positionDropdown()};$i(document,"mousedown",f),$i(window,"scroll",g,c),$i(window,"resize",g,c),this._destroy=()=>{document.removeEventListener("mousedown",f),window.removeEventListener("scroll",g),window.removeEventListener("resize",g),p&&p.removeEventListener("click",m)},this.revertSettings={innerHTML:a.innerHTML,tabIndex:a.tabIndex},a.tabIndex=-1,a.insertAdjacentElement("afterend",e.wrapper),e.sync(!1),t.items=[],delete t.optgroups,delete t.options,$i(a,"invalid",()=>{e.isValid&&(e.isValid=!1,e.isInvalid=!0,e.refreshState())}),e.updateOriginalInput(),e.refreshItems(),e.close(!1),e.inputState(),e.isSetup=!0,a.disabled?e.disable():a.readOnly?e.setReadOnly(!0):e.enable(),e.on("change",this.onChange),Bi(a,"tomselected","ts-hidden-accessible"),e.trigger("initialize"),!0===t.preload&&e.preload()}setupOptions(e=[],t=[]){this.addOptions(e),Vi(t,e=>{this.registerOptionGroup(e)})}setupTemplates(){var e=this,t=e.settings.labelField,i=e.settings.optgroupLabelField,s={optgroup:e=>{let t=document.createElement("div");return t.className="optgroup",t.appendChild(e.options),t},optgroup_header:(e,t)=>'<div class="optgroup-header">'+t(e[i])+"</div>",option:(e,i)=>"<div>"+i(e[t])+"</div>",item:(e,i)=>"<div>"+i(e[t])+"</div>",option_create:(e,t)=>'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};e.settings.render=Object.assign({},s,e.settings.render)}setupCallbacks(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)(t=this.settings[i[e]])&&this.on(e,t)}sync(e=!0){const t=this,i=e?es(t.input,{delimiter:t.settings.delimiter}):t.settings;t.setupOptions(i.options,i.optgroups),t.setValue(i.items||[],!0),t.lastQuery=null}onClick(){var e=this;if(e.activeItems.length>0)return e.clearActiveItems(),void e.focus();e.isFocused&&e.isOpen?e.blur():e.focus()}onMouseDown(){}onChange(){Ri(this.input,"input"),Ri(this.input,"change")}onPaste(e){var t=this;t.isInputHidden||t.isLocked?Oi(e):t.settings.splitOn&&setTimeout(()=>{var e=t.inputValue();if(e.match(t.settings.splitOn)){var i=e.trim().split(t.settings.splitOn);Vi(i,e=>{Li(e)&&(this.options[e]?t.addItem(e):t.createItem(e))})}},0)}onKeyPress(e){var t=this;if(!t.isLocked){var i=String.fromCharCode(e.keyCode||e.which);return t.settings.create&&"multi"===t.settings.mode&&i===t.settings.delimiter?(t.createItem(),void Oi(e)):void 0}Oi(e)}onKeyDown(e){var t=this;if(t.ignoreHover=!0,t.isLocked)9!==e.keyCode&&Oi(e);else{switch(e.keyCode){case 65:if(Mi(Qi,e)&&""==t.control_input.value)return Oi(e),void t.selectAll();break;case 27:return t.isOpen&&(Oi(e,!0),t.close()),void t.clearActiveItems();case 40:if(!t.isOpen&&t.hasOptions)t.open();else if(t.activeOption){let e=t.getAdjacent(t.activeOption,1);e&&t.setActiveOption(e)}return void Oi(e);case 38:if(t.activeOption){let e=t.getAdjacent(t.activeOption,-1);e&&t.setActiveOption(e)}return void Oi(e);case 13:return void(t.canSelect(t.activeOption)?(t.onOptionSelect(e,t.activeOption),Oi(e)):(t.settings.create&&t.createItem()||document.activeElement==t.control_input&&t.isOpen)&&Oi(e));case 37:return void t.advanceSelection(-1,e);case 39:return void t.advanceSelection(1,e);case 9:return void(t.settings.selectOnTab&&(t.canSelect(t.activeOption)&&(t.onOptionSelect(e,t.activeOption),Oi(e)),t.settings.create&&t.createItem()&&Oi(e)));case 8:case 46:return void t.deleteSelection(e)}t.isInputHidden&&!Mi(Qi,e)&&Oi(e)}}onInput(e){if(this.isLocked)return;const t=this.inputValue();var i,s;this.lastValue!==t&&(this.lastValue=t,""!=t?(this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=(i=()=>{this.refreshTimeout=null,this._onInput()},(s=this.settings.refreshThrottle)>0?window.setTimeout(i,s):(i.call(null),null))):this._onInput())}_onInput(){const e=this.lastValue;this.settings.shouldLoad.call(this,e)&&this.load(e),this.refreshOptions(),this.trigger("type",e)}onOptionHover(e,t){this.ignoreHover||this.setActiveOption(t,!1)}onFocus(e){var t=this,i=t.isFocused;if(t.isDisabled||t.isReadOnly)return t.blur(),void Oi(e);t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.preload(),i||t.trigger("focus"),t.activeItems.length||(t.inputState(),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())}onBlur(e){if(!1!==document.hasFocus()){var t=this;if(t.isFocused){t.isFocused=!1,t.ignoreFocus=!1;var i=()=>{t.close(),t.setActiveItem(),t.setCaret(t.items.length),t.trigger("blur")};t.settings.create&&t.settings.createOnBlur?t.createItem(null,i):i()}}}onOptionSelect(e,t){var i,s=this;t.parentElement&&t.parentElement.matches("[data-disabled]")||(t.classList.contains("create")?s.createItem(null,()=>{s.settings.closeAfterSelect&&s.close()}):void 0!==(i=t.dataset.value)&&(s.lastQuery=null,s.addItem(i),s.settings.closeAfterSelect&&s.close(),!s.settings.hideSelected&&e.type&&/click/.test(e.type)&&s.setActiveOption(t)))}canSelect(e){return!!(this.isOpen&&e&&this.dropdown_content.contains(e))}onItemSelect(e,t){var i=this;return!i.isLocked&&"multi"===i.settings.mode&&(Oi(e),i.setActiveItem(t,e),!0)}canLoad(e){return!!this.settings.load&&!this.loadedSearches.hasOwnProperty(e)}load(e){const t=this;if(!t.canLoad(e))return;Bi(t.wrapper,t.settings.loadingClass),t.loading++;const i=t.loadCallback.bind(t);t.settings.load.call(t,e,i)}loadCallback(e,t){const i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(e,t),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||zi(i.wrapper,i.settings.loadingClass),i.trigger("load",e,t)}preload(){var e=this.wrapper.classList;e.contains("preloaded")||(e.add("preloaded"),this.load(""))}setTextboxValue(e=""){var t=this.control_input;t.value!==e&&(t.value=e,Ri(t,"update"),this.lastValue=e)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(e,t){Ei(this,t?[]:["change"],()=>{this.clear(t),this.addItems(e,t)})}setMaxItems(e){0===e&&(e=null),this.settings.maxItems=e,this.refreshState()}setActiveItem(e,t){var i,s,n,r,o,a,l=this;if("single"!==l.settings.mode){if(!e)return l.clearActiveItems(),void(l.isFocused&&l.inputState());if("click"===(i=t&&t.type.toLowerCase())&&Mi("shiftKey",t)&&l.activeItems.length){for(a=l.getLastActive(),(n=Array.prototype.indexOf.call(l.control.children,a))>(r=Array.prototype.indexOf.call(l.control.children,e))&&(o=n,n=r,r=o),s=n;s<=r;s++)e=l.control.children[s],-1===l.activeItems.indexOf(e)&&l.setActiveItemClass(e);Oi(t)}else"click"===i&&Mi(Qi,t)||"keydown"===i&&Mi("shiftKey",t)?e.classList.contains("active")?l.removeActiveItem(e):l.setActiveItemClass(e):(l.clearActiveItems(),l.setActiveItemClass(e));l.inputState(),l.isFocused||l.focus()}}setActiveItemClass(e){const t=this,i=t.control.querySelector(".last-active");i&&zi(i,"last-active"),Bi(e,"active last-active"),t.trigger("item_select",e),-1==t.activeItems.indexOf(e)&&t.activeItems.push(e)}removeActiveItem(e){var t=this.activeItems.indexOf(e);this.activeItems.splice(t,1),zi(e,"active")}clearActiveItems(){zi(this.activeItems,"active"),this.activeItems=[]}setActiveOption(e,t=!0){e!==this.activeOption&&(this.clearActiveOption(),e&&(this.activeOption=e,Zi(this.focus_node,{"aria-activedescendant":e.getAttribute("id")}),Zi(e,{"aria-selected":"true"}),Bi(e,"active"),t&&this.scrollToOption(e)))}scrollToOption(e,t){if(!e)return;const i=this.dropdown_content,s=i.clientHeight,n=i.scrollTop||0,r=e.offsetHeight,o=e.getBoundingClientRect().top-i.getBoundingClientRect().top+n;o+r>s+n?this.scroll(o-s+r,t):o<n&&this.scroll(o,t)}scroll(e,t){const i=this.dropdown_content;t&&(i.style.scrollBehavior=t),i.scrollTop=e,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(zi(this.activeOption,"active"),Zi(this.activeOption,{"aria-selected":null})),this.activeOption=null,Zi(this.focus_node,{"aria-activedescendant":null})}selectAll(){const e=this;if("single"===e.settings.mode)return;const t=e.controlChildren();t.length&&(e.inputState(),e.close(),e.activeItems=t,Vi(t,t=>{e.setActiveItemClass(t)}))}inputState(){var e=this;e.control.contains(e.control_input)&&(Zi(e.control_input,{placeholder:e.settings.placeholder}),e.activeItems.length>0||!e.isFocused&&e.settings.hidePlaceholder&&e.items.length>0?(e.setTextboxValue(),e.isInputHidden=!0):(e.settings.hidePlaceholder&&e.items.length>0&&Zi(e.control_input,{placeholder:""}),e.isInputHidden=!1),e.wrapper.classList.toggle("input-hidden",e.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var e=this;e.isDisabled||e.isReadOnly||(e.ignoreFocus=!0,e.control_input.offsetWidth?e.control_input.focus():e.focus_node.focus(),setTimeout(()=>{e.ignoreFocus=!1,e.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())}getSearchOptions(){var e=this.settings,t=e.sortField;return"string"==typeof e.sortField&&(t=[{field:e.sortField}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}}search(e){var t,i,s=this,n=this.getSearchOptions();if(s.settings.score&&"function"!=typeof(i=s.settings.score.call(s,e)))throw new Error('Tom Select "score" setting must be a function that returns a function');return e!==s.lastQuery?(s.lastQuery=e,t=s.sifter.search(e,Object.assign(n,{score:i})),s.currentResults=t):t=Object.assign({},s.currentResults),s.settings.hideSelected&&(t.items=t.items.filter(e=>{let t=Li(e.id);return!(t&&-1!==s.items.indexOf(t))})),t}refreshOptions(e=!0){var t,i,s,n,r,o,a,l,c,d;const u={},h=[];var p=this,m=p.inputValue();const f=m===p.lastQuery||""==m&&null==p.lastQuery;var g=p.search(m),y=null,v=p.settings.shouldOpen||!1,b=p.dropdown_content;f&&(y=p.activeOption)&&(c=y.closest("[data-group]")),n=g.items.length,"number"==typeof p.settings.maxOptions&&(n=Math.min(n,p.settings.maxOptions)),n>0&&(v=!0);const _=(e,t)=>{let i=u[e];if(void 0!==i){let e=h[i];if(void 0!==e)return[i,e.fragment]}let s=document.createDocumentFragment();return i=h.length,h.push({fragment:s,order:t,optgroup:e}),[i,s]};for(t=0;t<n;t++){let e=g.items[t];if(!e)continue;let n=e.id,a=p.options[n];if(void 0===a)continue;let l=xi(n),d=p.getOption(l,!0);for(p.settings.hideSelected||d.classList.toggle("selected",p.items.includes(l)),r=a[p.settings.optgroupField]||"",i=0,s=(o=Array.isArray(r)?r:[r])&&o.length;i<s;i++){r=o[i];let e=a.$order,t=p.optgroups[r];void 0===t?r="":e=t.$order;const[s,l]=_(r,e);i>0&&(d=d.cloneNode(!0),Zi(d,{id:a.$id+"-clone-"+i,"aria-selected":null}),d.classList.add("ts-cloned"),zi(d,"active"),p.activeOption&&p.activeOption.dataset.value==n&&c&&c.dataset.group===r.toString()&&(y=d)),l.appendChild(d),""!=r&&(u[r]=s)}}var w;p.settings.lockOptgroupOrder&&h.sort((e,t)=>e.order-t.order),a=document.createDocumentFragment(),Vi(h,e=>{let t=e.fragment,i=e.optgroup;if(!t||!t.children.length)return;let s=p.optgroups[i];if(void 0!==s){let e=document.createDocumentFragment(),i=p.render("optgroup_header",s);Pi(e,i),Pi(e,t);let n=p.render("optgroup",{group:s,options:e});Pi(a,n)}else Pi(a,t)}),b.innerHTML="",Pi(b,a),p.settings.highlight&&(w=b.querySelectorAll("span.highlight"),Array.prototype.forEach.call(w,function(e){var t=e.parentNode;t.replaceChild(e.firstChild,e),t.normalize()}),g.query.length&&g.tokens.length&&Vi(g.tokens,e=>{((e,t)=>{if(null===t)return;if("string"==typeof t){if(!t.length)return;t=new RegExp(t,"i")}const i=e=>3===e.nodeType?(e=>{var i=e.data.match(t);if(i&&e.data.length>0){var s=document.createElement("span");s.className="highlight";var n=e.splitText(i.index);n.splitText(i[0].length);var r=n.cloneNode(!0);return s.appendChild(r),Ji(n,s),1}return 0})(e):((e=>{1!==e.nodeType||!e.childNodes||/(script|style)/i.test(e.tagName)||"highlight"===e.className&&"SPAN"===e.tagName||Array.from(e.childNodes).forEach(e=>{i(e)})})(e),0);i(e)})(b,e.regex)}));var C=e=>{let t=p.render(e,{input:m});return t&&(v=!0,b.insertBefore(t,b.firstChild)),t};if(p.loading?C("loading"):p.settings.shouldLoad.call(p,m)?0===g.items.length&&C("no_results"):C("not_loading"),(l=p.canCreate(m))&&(d=C("option_create")),p.hasOptions=g.items.length>0||l,v){if(g.items.length>0){if(y||"single"!==p.settings.mode||null==p.items[0]||(y=p.getOption(p.items[0])),!b.contains(y)){let e=0;d&&!p.settings.addPrecedence&&(e=1),y=p.selectable()[e]}}else d&&(y=d);e&&!p.isOpen&&(p.open(),p.scrollToOption(y,"auto")),p.setActiveOption(y)}else p.clearActiveOption(),e&&p.isOpen&&p.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(e,t=!1){const i=this;if(Array.isArray(e))return i.addOptions(e,t),!1;const s=Li(e[i.settings.valueField]);return null!==s&&!i.options.hasOwnProperty(s)&&(e.$order=e.$order||++i.order,e.$id=i.inputId+"-opt-"+e.$order,i.options[s]=e,i.lastQuery=null,t&&(i.userOptions[s]=t,i.trigger("option_add",s,e)),s)}addOptions(e,t=!1){Vi(e,e=>{this.addOption(e,t)})}registerOption(e){return this.addOption(e)}registerOptionGroup(e){var t=Li(e[this.settings.optgroupValueField]);return null!==t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)}addOptionGroup(e,t){var i;t[this.settings.optgroupValueField]=e,(i=this.registerOptionGroup(t))&&this.trigger("optgroup_add",i,t)}removeOptionGroup(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.clearCache(),this.trigger("optgroup_remove",e))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(e,t){const i=this;var s,n;const r=Li(e),o=Li(t[i.settings.valueField]);if(null===r)return;const a=i.options[r];if(null==a)return;if("string"!=typeof o)throw new Error("Value must be set in option data");const l=i.getOption(r),c=i.getItem(r);if(t.$order=t.$order||a.$order,delete i.options[r],i.uncacheValue(o),i.options[o]=t,l){if(i.dropdown_content.contains(l)){const e=i._render("option",t);Ji(l,e),i.activeOption===l&&i.setActiveOption(e)}l.remove()}c&&(-1!==(n=i.items.indexOf(r))&&i.items.splice(n,1,o),s=i._render("item",t),c.classList.contains("active")&&Bi(s,"active"),Ji(c,s)),i.lastQuery=null}removeOption(e,t){const i=this;e=xi(e),i.uncacheValue(e),delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)}clearOptions(e){const t=(e||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const i={};Vi(this.options,(e,s)=>{t(e,s)&&(i[s]=e)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(e,t){return this.items.indexOf(t)>=0}getOption(e,t=!1){const i=Li(e);if(null===i)return null;const s=this.options[i];if(null!=s){if(s.$div)return s.$div;if(t)return this._render("option",s)}return null}getAdjacent(e,t,i="option"){var s;if(!e)return null;s="item"==i?this.controlChildren():this.dropdown_content.querySelectorAll("[data-selectable]");for(let i=0;i<s.length;i++)if(s[i]==e)return t>0?s[i+1]:s[i-1];return null}getItem(e){if("object"==typeof e)return e;var t=Li(e);return null!==t?this.control.querySelector(`[data-value="${Ni(t)}"]`):null}addItems(e,t){var i=this,s=Array.isArray(e)?e:[e];const n=(s=s.filter(e=>-1===i.items.indexOf(e)))[s.length-1];s.forEach(e=>{i.isPending=e!==n,i.addItem(e,t)})}addItem(e,t){Ei(this,t?[]:["change","dropdown_close"],()=>{var i,s;const n=this,r=n.settings.mode,o=Li(e);if((!o||-1===n.items.indexOf(o)||("single"===r&&n.close(),"single"!==r&&n.settings.duplicates))&&null!==o&&n.options.hasOwnProperty(o)&&("single"===r&&n.clear(t),"multi"!==r||!n.isFull())){if(i=n._render("item",n.options[o]),n.control.contains(i)&&(i=i.cloneNode(!0)),s=n.isFull(),n.items.splice(n.caretPos,0,o),n.insertAtCaret(i),n.isSetup){if(!n.isPending&&n.settings.hideSelected){let e=n.getOption(o),t=n.getAdjacent(e,1);t&&n.setActiveOption(t)}n.isPending||n.settings.closeAfterSelect||n.refreshOptions(n.isFocused&&"single"!==r),0!=n.settings.closeAfterSelect&&n.isFull()?n.close():n.isPending||n.positionDropdown(),n.trigger("item_add",o,i),n.isPending||n.updateOriginalInput({silent:t})}(!n.isPending||!s&&n.isFull())&&(n.inputState(),n.refreshState())}})}removeItem(e=null,t){const i=this;if(!(e=i.getItem(e)))return;var s,n;const r=e.dataset.value;s=Yi(e),e.remove(),e.classList.contains("active")&&(n=i.activeItems.indexOf(e),i.activeItems.splice(n,1),zi(e,"active")),i.items.splice(s,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(r)&&i.removeOption(r,t),s<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:t}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",r,e)}createItem(e=null,t=()=>{}){3===arguments.length&&(t=arguments[2]),"function"!=typeof t&&(t=()=>{});var i,s=this,n=s.caretPos;if(e=e||s.inputValue(),!s.canCreate(e))return t(),!1;s.lock();var r=!1,o=e=>{if(s.unlock(),!e||"object"!=typeof e)return t();var i=Li(e[s.settings.valueField]);if("string"!=typeof i)return t();s.setTextboxValue(),s.addOption(e,!0),s.setCaret(n),s.addItem(i),t(e),r=!0};return i="function"==typeof s.settings.create?s.settings.create.call(this,e,o):{[s.settings.labelField]:e,[s.settings.valueField]:e},r||o(i),!0}refreshItems(){var e=this;e.lastQuery=null,e.isSetup&&e.addItems(e.items),e.updateOriginalInput(),e.refreshState()}refreshState(){const e=this;e.refreshValidityState();const t=e.isFull(),i=e.isLocked;e.wrapper.classList.toggle("rtl",e.rtl);const s=e.wrapper.classList;var n;s.toggle("focus",e.isFocused),s.toggle("disabled",e.isDisabled),s.toggle("readonly",e.isReadOnly),s.toggle("required",e.isRequired),s.toggle("invalid",!e.isValid),s.toggle("locked",i),s.toggle("full",t),s.toggle("input-active",e.isFocused&&!e.isInputHidden),s.toggle("dropdown-active",e.isOpen),s.toggle("has-options",(n=e.options,0===Object.keys(n).length)),s.toggle("has-items",e.items.length>0)}refreshValidityState(){var e=this;e.input.validity&&(e.isValid=e.input.validity.valid,e.isInvalid=!e.isValid)}isFull(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}updateOriginalInput(e={}){const t=this;var i,s;const n=t.input.querySelector('option[value=""]');if(t.is_select_tag){const r=[],o=t.input.querySelectorAll("option:checked").length;function a(e,i,s){return e||(e=ji('<option value="'+Fi(i)+'">'+Fi(s)+"</option>")),e!=n&&t.input.append(e),r.push(e),(e!=n||o>0)&&(e.selected=!0),e}t.input.querySelectorAll("option:checked").forEach(e=>{e.selected=!1}),0==t.items.length&&"single"==t.settings.mode?a(n,"",""):t.items.forEach(e=>{i=t.options[e],s=i[t.settings.labelField]||"",r.includes(i.$option)?a(t.input.querySelector(`option[value="${Ni(e)}"]:not(:checked)`),e,s):i.$option=a(i.$option,e,s)})}else t.input.value=t.getValue();t.isSetup&&(e.silent||t.trigger("change",t.getValue()))}open(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.isOpen=!0,Zi(e.focus_node,{"aria-expanded":"true"}),e.refreshState(),Hi(e.dropdown,{visibility:"hidden",display:"block"}),e.positionDropdown(),Hi(e.dropdown,{visibility:"visible",display:"block"}),e.focus(),e.trigger("dropdown_open",e.dropdown))}close(e=!0){var t=this,i=t.isOpen;e&&(t.setTextboxValue(),"single"===t.settings.mode&&t.items.length&&t.inputState()),t.isOpen=!1,Zi(t.focus_node,{"aria-expanded":"false"}),Hi(t.dropdown,{display:"none"}),t.settings.hideSelected&&t.clearActiveOption(),t.refreshState(),i&&t.trigger("dropdown_close",t.dropdown)}positionDropdown(){if("body"===this.settings.dropdownParent){var e=this.control,t=e.getBoundingClientRect(),i=e.offsetHeight+t.top+window.scrollY,s=t.left+window.scrollX;Hi(this.dropdown,{width:t.width+"px",top:i+"px",left:s+"px"})}}clear(e){var t=this;if(t.items.length){var i=t.controlChildren();Vi(i,e=>{t.removeItem(e,!0)}),t.inputState(),e||t.updateOriginalInput(),t.trigger("clear")}}insertAtCaret(e){const t=this,i=t.caretPos,s=t.control;s.insertBefore(e,s.children[i]||null),t.setCaret(i+1)}deleteSelection(e){var t,i,s,n,r,o=this;t=e&&8===e.keyCode?-1:1,i={start:(r=o.control_input).selectionStart||0,length:(r.selectionEnd||0)-(r.selectionStart||0)};const a=[];if(o.activeItems.length)n=Wi(o.activeItems,t),s=Yi(n),t>0&&s++,Vi(o.activeItems,e=>a.push(e));else if((o.isFocused||"single"===o.settings.mode)&&o.items.length){const e=o.controlChildren();let s;t<0&&0===i.start&&0===i.length?s=e[o.caretPos-1]:t>0&&i.start===o.inputValue().length&&(s=e[o.caretPos]),void 0!==s&&a.push(s)}if(!o.shouldDelete(a,e))return!1;for(Oi(e,!0),void 0!==s&&o.setCaret(s);a.length;)o.removeItem(a.pop());return o.inputState(),o.positionDropdown(),o.refreshOptions(!1),!0}shouldDelete(e,t){const i=e.map(e=>e.dataset.value);return!(!i.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete(i,t))}advanceSelection(e,t){var i,s,n=this;n.rtl&&(e*=-1),n.inputValue().length||(Mi(Qi,t)||Mi("shiftKey",t)?(s=(i=n.getLastActive(e))?i.classList.contains("active")?n.getAdjacent(i,e,"item"):i:e>0?n.control_input.nextElementSibling:n.control_input.previousElementSibling)&&(s.classList.contains("active")&&n.removeActiveItem(i),n.setActiveItemClass(s)):n.moveCaret(e))}moveCaret(e){}getLastActive(e){let t=this.control.querySelector(".last-active");if(t)return t;var i=this.control.querySelectorAll(".active");return i?Wi(i,e):void 0}setCaret(e){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(e=this.isReadOnly||this.isDisabled){this.isLocked=e,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(e){this.focus_node.tabIndex=e?-1:this.tabIndex,this.isDisabled=e,this.input.disabled=e,this.control_input.disabled=e,this.setLocked()}setReadOnly(e){this.isReadOnly=e,this.input.readOnly=e,this.control_input.readOnly=e,this.setLocked()}destroy(){var e=this,t=e.revertSettings;e.trigger("destroy"),e.off(),e.wrapper.remove(),e.dropdown.remove(),e.input.innerHTML=t.innerHTML,e.input.tabIndex=t.tabIndex,zi(e.input,"tomselected","ts-hidden-accessible"),e._destroy(),delete e.input.tomselect}render(e,t){var i,s;const n=this;if("function"!=typeof this.settings.render[e])return null;if(!(s=n.settings.render[e].call(this,t,Fi)))return null;if(s=ji(s),"option"===e||"option_create"===e?t[n.settings.disabledField]?Zi(s,{"aria-disabled":"true"}):Zi(s,{"data-selectable":""}):"optgroup"===e&&(i=t.group[n.settings.optgroupValueField],Zi(s,{"data-group":i}),t.group[n.settings.disabledField]&&Zi(s,{"data-disabled":""})),"option"===e||"item"===e){const i=xi(t[n.settings.valueField]);Zi(s,{"data-value":i}),"item"===e?(Bi(s,n.settings.itemClass),Zi(s,{"data-ts-item":""})):(Bi(s,n.settings.optionClass),Zi(s,{role:"option",id:t.$id}),t.$div=s,n.options[i]=t)}return s}_render(e,t){const i=this.render(e,t);if(null==i)throw"HTMLElement expected";return i}clearCache(){Vi(this.options,e=>{e.$div&&(e.$div.remove(),delete e.$div)})}uncacheValue(e){const t=this.getOption(e);t&&t.remove()}canCreate(e){return this.settings.create&&e.length>0&&this.settings.createFilter.call(this,e)}hook(e,t,i){var s=this,n=s[t];s[t]=function(){var t,r;return"after"===e&&(t=n.apply(s,arguments)),r=i.apply(s,arguments),"instead"===e?r:("before"===e&&(t=n.apply(s,arguments)),t)}}}const ss=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())},ns=(e,t,i,s)=>{e.addEventListener(t,i,s)},rs=e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(os(e)){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return document.querySelector(e)},os=e=>"string"==typeof e&&e.indexOf("<")>-1,as=(e,t,i,s)=>{e.addEventListener(t,i,s)},ls=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())},cs=(e,t,i,s)=>{e.addEventListener(t,i,s)},ds=e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(us(e)){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return document.querySelector(e)},us=e=>"string"==typeof e&&e.indexOf("<")>-1;is.define("change_listener",function(){var e;e=()=>{this.sync()},this.input.addEventListener("change",e,undefined)}),is.define("checkbox_options",function(e){var t=this,i=t.onOptionSelect;t.settings.hideSelected=!1;const s=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},e);var n=function(e,t){t?(e.checked=!0,s.uncheckedClassNames&&e.classList.remove(...s.uncheckedClassNames),s.checkedClassNames&&e.classList.add(...s.checkedClassNames)):(e.checked=!1,s.checkedClassNames&&e.classList.remove(...s.checkedClassNames),s.uncheckedClassNames&&e.classList.add(...s.uncheckedClassNames))},r=function(e){setTimeout(()=>{var t=e.querySelector("input."+s.className);t instanceof HTMLInputElement&&n(t,e.classList.contains("selected"))},1)};t.hook("after","setupTemplates",()=>{var e=t.settings.render.option;t.settings.render.option=(i,r)=>{var o=(e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if("string"==typeof(i=e)&&i.indexOf("<")>-1){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}var i;return document.querySelector(e)})(e.call(t,i,r)),a=document.createElement("input");s.className&&a.classList.add(s.className),a.addEventListener("click",function(e){ss(e)}),a.type="checkbox";const l=null==(c=i[t.settings.valueField])?null:(e=>"boolean"==typeof e?e?"1":"0":e+"")(c);var c;return n(a,!!(l&&t.items.indexOf(l)>-1)),o.prepend(a),o}}),t.on("item_remove",e=>{var i=t.getOption(e);i&&(i.classList.remove("selected"),r(i))}),t.on("item_add",e=>{var i=t.getOption(e);i&&r(i)}),t.hook("instead","onOptionSelect",(e,s)=>{if(s.classList.contains("selected"))return s.classList.remove("selected"),t.removeItem(s.dataset.value),t.refreshOptions(),void ss(e,!0);i.call(t,e,s),r(s)})}),is.define("clear_button",function(e){const t=this,i=Object.assign({className:"clear-button",title:"Clear All",html:e=>`<div class="${e.className}" title="${e.title}">&#10799;</div>`},e);t.on("initialize",()=>{var e=(e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if("string"==typeof(i=e)&&i.indexOf("<")>-1){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}var i;return document.querySelector(e)})(i.html(i));e.addEventListener("click",e=>{t.isLocked||(t.clear(),"single"===t.settings.mode&&t.settings.allowEmptyOption&&t.addItem(""),e.preventDefault(),e.stopPropagation())}),t.control.appendChild(e)})}),is.define("drag_drop",function(){var e=this;if("multi"!==e.settings.mode)return;var t=e.lock,i=e.unlock;let s,n=!0;e.hook("after","setupTemplates",()=>{var t=e.settings.render.item;e.settings.render.item=(i,r)=>{const o=(e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if("string"==typeof(i=e)&&i.indexOf("<")>-1){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}var i;return document.querySelector(e)})(t.call(e,i,r));var a;a=o,((e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)})({draggable:"true"},(e,t)=>{null==e?a.removeAttribute(t):a.setAttribute(t,""+e)});const l=e=>{e.preventDefault(),o.classList.add("ts-drag-over"),c(o,s)},c=(e,t)=>{var i,s,n;void 0!==t&&(((e,t)=>{do{var i;if(e==(t=null==(i=t)?void 0:i.previousElementSibling))return!0}while(t&&t.previousElementSibling);return!1})(t,o)?(s=t,null==(n=(i=e).parentNode)||n.insertBefore(s,i.nextSibling)):((e,t)=>{var i;null==(i=e.parentNode)||i.insertBefore(t,e)})(e,t))};return ns(o,"mousedown",e=>{n||((e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())})(e),e.stopPropagation()}),ns(o,"dragstart",e=>{s=o,setTimeout(()=>{o.classList.add("ts-dragging")},0)}),ns(o,"dragenter",l),ns(o,"dragover",l),ns(o,"dragleave",()=>{o.classList.remove("ts-drag-over")}),ns(o,"dragend",()=>{var t;document.querySelectorAll(".ts-drag-over").forEach(e=>e.classList.remove("ts-drag-over")),null==(t=s)||t.classList.remove("ts-dragging"),s=void 0;var i=[];e.control.querySelectorAll("[data-value]").forEach(e=>{if(e.dataset.value){let t=e.dataset.value;t&&i.push(t)}}),e.setValue(i)}),o}}),e.hook("instead","lock",()=>(n=!1,t.call(e))),e.hook("instead","unlock",()=>(n=!0,i.call(e)))}),is.define("dropdown_header",function(e){const t=this,i=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:e=>'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a class="'+e.closeClass+'">&times;</a></div></div>'},e);t.on("initialize",()=>{var e=(e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if("string"==typeof(i=e)&&i.indexOf("<")>-1){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}var i;return document.querySelector(e)})(i.html(i)),s=e.querySelector("."+i.closeClass);s&&s.addEventListener("click",e=>{((e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())})(e,!0),t.close()}),t.dropdown.insertBefore(e,t.dropdown.firstChild)})}),is.define("caret_position",function(){var e=this;e.hook("instead","setCaret",t=>{"single"!==e.settings.mode&&e.control.contains(e.control_input)?(t=Math.max(0,Math.min(e.items.length,t)))==e.caretPos||e.isPending||e.controlChildren().forEach((i,s)=>{s<t?e.control_input.insertAdjacentElement("beforebegin",i):e.control.appendChild(i)}):t=e.items.length,e.caretPos=t}),e.hook("instead","moveCaret",t=>{if(!e.isFocused)return;const i=e.getLastActive(t);if(i){const a=((e,t)=>{if(!e)return-1;t=t||e.nodeName;for(var i=0;e=e.previousElementSibling;)e.matches(t)&&i++;return i})(i);e.setCaret(t>0?a+1:a),e.setActiveItem(),n=i,s=[],((e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var i in e)e.hasOwnProperty(i)&&t(e[i])})(["last-active"],e=>{"string"==typeof e&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(s=s.concat(e))}),o=s.filter(Boolean),(r=n,Array.isArray(r)||(r=[r]),n=r).map(e=>{o.map(t=>{e.classList.remove(t)})})}else e.setCaret(e.caretPos+t);var s,n,r,o})}),is.define("dropdown_input",function(){const e=this;e.settings.shouldOpen=!0,e.hook("before","setup",()=>{e.focus_node=e.control,((e,...t)=>{var i,s=(e=>{var t=[];return((e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var i in e)e.hasOwnProperty(i)&&t(e[i])})(e,e=>{"string"==typeof e&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)})(t);(i=e,Array.isArray(i)||(i=[i]),e=i).map(e=>{s.map(t=>{e.classList.add(t)})})})(e.control_input,"dropdown-input");const t=rs('<div class="dropdown-input-wrap">');t.append(e.control_input),e.dropdown.insertBefore(t,e.dropdown.firstChild);const i=rs('<input class="items-placeholder" tabindex="-1" />');i.placeholder=e.settings.placeholder||"",e.control.append(i)}),e.on("initialize",()=>{e.control_input.addEventListener("keydown",t=>{switch(t.keyCode){case 27:return e.isOpen&&(((e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())})(t,!0),e.close()),void e.clearActiveItems();case 9:e.focus_node.tabIndex=-1}return e.onKeyDown.call(e,t)}),e.on("blur",()=>{e.focus_node.tabIndex=e.isDisabled?-1:e.tabIndex}),e.on("dropdown_open",()=>{e.control_input.focus()});const t=e.onBlur;var i;e.hook("instead","onBlur",i=>{if(!i||i.relatedTarget!=e.control_input)return t.call(e)}),i=()=>e.onBlur(),e.control_input.addEventListener("blur",i,undefined),e.hook("before","close",()=>{e.isOpen&&e.focus_node.focus({preventScroll:!0})})})}),is.define("input_autogrow",function(){var e=this;e.on("initialize",()=>{var t=document.createElement("span"),i=e.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",e.wrapper.appendChild(t);for(const e of["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"])t.style[e]=i.style[e];var s=()=>{t.textContent=i.value,i.style.width=t.clientWidth+"px"};s(),e.on("update item_add item_remove",s),as(i,"input",s),as(i,"keyup",s),as(i,"blur",s),as(i,"update",s)})}),is.define("no_backspace_delete",function(){var e=this,t=e.deleteSelection;this.hook("instead","deleteSelection",i=>!!e.activeItems.length&&t.call(e,i))}),is.define("no_active_items",function(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}),is.define("optgroup_columns",function(){var e=this,t=e.onKeyDown;e.hook("instead","onKeyDown",i=>{var s,n,r,o;if(!e.isOpen||37!==i.keyCode&&39!==i.keyCode)return t.call(e,i);e.ignoreHover=!0,o=(e=>{for(;e&&e.matches;){if(e.matches("[data-group]"))return e;e=e.parentNode}})(e.activeOption),s=((e,t)=>{if(!e)return-1;t=t||e.nodeName;for(var i=0;e=e.previousElementSibling;)e.matches(t)&&i++;return i})(e.activeOption,"[data-selectable]"),o&&(o=37===i.keyCode?o.previousSibling:o.nextSibling)&&(n=(r=o.querySelectorAll("[data-selectable]"))[Math.min(r.length-1,s)])&&e.setActiveOption(n)})}),is.define("remove_button",function(e){const t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},e);var i=this;if(t.append){var s='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+(t.title+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'">'+t.label+"</a>";i.hook("after","setupTemplates",()=>{var e=i.settings.render.item;i.settings.render.item=(t,n)=>{var r=ds(e.call(i,t,n)),o=ds(s);return r.appendChild(o),cs(o,"mousedown",e=>{ls(e,!0)}),cs(o,"click",e=>{i.isLocked||(ls(e,!0),i.isLocked||i.shouldDelete([r],e)&&(i.removeItem(r),i.refreshOptions(!1),i.inputState()))}),r}})}}),is.define("restore_on_backspace",function(e){const t=this,i=Object.assign({text:e=>e[t.settings.labelField]},e);t.on("item_remove",function(e){if(t.isFocused&&""===t.control_input.value.trim()){var s=t.options[e];s&&t.setTextboxValue(i.text.call(t,s))}})}),is.define("virtual_scroll",function(){const e=this,t=e.canLoad,i=e.clearActiveOption,s=e.loadCallback;var n,r,o={},a=!1,l=[];if(e.settings.shouldLoadMore||(e.settings.shouldLoadMore=()=>{if(n.clientHeight/(n.scrollHeight-n.scrollTop)>.9)return!0;if(e.activeOption){var t=e.selectable();if(Array.from(t).indexOf(e.activeOption)>=t.length-2)return!0}return!1}),!e.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";e.settings.sortField=[{field:"$order"},{field:"$score"}];const c=t=>!("number"==typeof e.settings.maxOptions&&n.children.length>=e.settings.maxOptions||!(t in o)||!o[t]),d=(t,i)=>e.items.indexOf(i)>=0||l.indexOf(i)>=0;e.setNextUrl=(e,t)=>{o[e]=t},e.getUrl=t=>{if(t in o){const e=o[t];return o[t]=!1,e}return e.clearPagination(),e.settings.firstUrl.call(e,t)},e.clearPagination=()=>{o={}},e.hook("instead","clearActiveOption",()=>{if(!a)return i.call(e)}),e.hook("instead","canLoad",i=>i in o?c(i):t.call(e,i)),e.hook("instead","loadCallback",(t,i)=>{if(a){if(r){const i=t[0];void 0!==i&&(r.dataset.value=i[e.settings.valueField])}}else e.clearOptions(d);s.call(e,t,i),a=!1}),e.hook("after","refreshOptions",()=>{const t=e.lastValue;var i;c(t)?(i=e.render("loading_more",{query:t}))&&(i.setAttribute("data-selectable",""),r=i):t in o&&!n.querySelector(".no-results")&&(i=e.render("no_more_results",{query:t})),i&&(((e,...t)=>{var i,s=(e=>{var t=[];return((e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var i in e)e.hasOwnProperty(i)&&t(e[i])})(e,e=>{"string"==typeof e&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)})(t);(i=e,Array.isArray(i)||(i=[i]),e=i).map(e=>{s.map(t=>{e.classList.add(t)})})})(i,e.settings.optionClass),n.append(i))}),e.on("initialize",()=>{l=Object.keys(e.options),n=e.dropdown_content,e.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},e.settings.render),n.addEventListener("scroll",()=>{e.settings.shouldLoadMore.call(e)&&c(e.lastValue)&&(a||(a=!0,e.load.call(e,e.lastValue)))})})});const hs=is;function ps(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ms,fs;"function"==typeof SuppressedError&&SuppressedError;var gs=(fs||(fs=1,ms=function e(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){if(t.constructor!==i.constructor)return!1;var s,n,r;if(Array.isArray(t)){if((s=t.length)!=i.length)return!1;for(n=s;0!==n--;)if(!e(t[n],i[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===i.source&&t.flags===i.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===i.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===i.toString();if((s=(r=Object.keys(t)).length)!==Object.keys(i).length)return!1;for(n=s;0!==n--;)if(!Object.prototype.hasOwnProperty.call(i,r[n]))return!1;for(n=s;0!==n--;){var o=r[n];if(!e(t[o],i[o]))return!1}return!0}return t!=t&&i!=i}),ms),ys=ps(gs);const vs="__googleMapsScriptId";var bs;!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(bs||(bs={}));class _s{constructor({apiKey:e,authReferrerPolicy:t,channel:i,client:s,id:n=vs,language:r,libraries:o=[],mapIds:a,nonce:l,region:c,retries:d=3,url:u="https://maps.googleapis.com/maps/api/js",version:h}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=i,this.client=s,this.id=n||vs,this.language=r,this.libraries=o,this.mapIds=a,this.nonce=l,this.region=c,this.retries=d,this.url=u,this.version=h,_s.instance){if(!ys(this.options,_s.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(_s.instance.options)}`);return _s.instance}_s.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?bs.FAILURE:this.done?bs.SUCCESS:this.loading?bs.LOADING:bs.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(i=>{i?t(i.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id))return void this.callback();const i={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(i).forEach(e=>!i[e]&&delete i[e]),(null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.maps)||void 0===t?void 0:t.importLibrary)||(e=>{let t,i,s,n="The Google Maps JavaScript API",r="google",o="importLibrary",a="__ib__",l=document,c=window;c=c[r]||(c[r]={});const d=c.maps||(c.maps={}),u=new Set,h=new URLSearchParams,p=()=>t||(t=new Promise((o,c)=>{return p=this,m=void 0,g=function*(){var p;for(s in yield i=l.createElement("script"),i.id=this.id,h.set("libraries",[...u]+""),e)h.set(s.replace(/[A-Z]/g,e=>"_"+e[0].toLowerCase()),e[s]);h.set("callback",r+".maps."+a),i.src=this.url+"?"+h,d[a]=o,i.onerror=()=>t=c(Error(n+" could not load.")),i.nonce=this.nonce||(null===(p=l.querySelector("script[nonce]"))||void 0===p?void 0:p.nonce)||"",l.head.append(i)},new((f=void 0)||(f=Promise))(function(e,t){function i(e){try{n(g.next(e))}catch(e){t(e)}}function s(e){try{n(g.throw(e))}catch(e){t(e)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof f?n:new f(function(e){e(n)})).then(i,s)}n((g=g.apply(p,m||[])).next())});var p,m,f,g}));d[o]?console.warn(n+" only loads once. Ignoring:",e):d[o]=(e,...t)=>u.add(e)&&p().then(()=>d[o](e,...t))})(i);const s=this.libraries.map(e=>this.importLibrary(e));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),e=>{const t=new ErrorEvent("error",{error:e});this.loadErrorCallback(t)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},e)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading=!0,this.setScript()}}}class ws{constructor(){this.context=null,this.element=null,this.mapElement=null,this.mapInstance=null,this.autoCompleteService=null,this.clickListener=null,this.resizeObserver=null,this.isInitialized=!1,this.config={apiKey:"AIzaSyCwC4NmaBu8Zu5ty0imQFxWscn6KYZoKKY",version:"weekly",libraries:["places","marker"],language:"en",region:"US",searchContainerSelector:".formgent-field-single__map-wrap"},this.defaultMapOptions={center:{lat:40.7128,lng:-74.006},zoom:12,streetViewControl:!1,scrollwheel:!1,mapTypeControl:!1,mapId:"DEMO_MAP_ID",gestureHandling:"cooperative",zoomControl:!0,zoomControlOptions:{position:null},fullscreenControl:!0}}async init(){try{return this.setupContext(),this.isInitialized||(await this.loadGoogleMaps(),this.createMapInstance(),this.setupServices(),this.setupEventListeners(),this.isInitialized=!0,this.updateContext(),console.log("Google Map initialized successfully")),this}catch(e){throw e}}setupContext(){this.context=e(),this.element=t();const i=this.element.ref.dataset.apikey;this.config={...this.config,apiKey:i},this.mapElement=this.element.ref,this.context.map||(this.context.map={instance:null,autoComplete:null,suggestions:[],isInitialized:!1,clickListener:null})}updateContext(){this.context.map.instance=this.mapInstance,this.context.map.autoComplete=this.autoCompleteService,this.context.map.isInitialized=this.isInitialized,this.context.map.clickListener=this.clickListener}async loadGoogleMaps(){this.validateApiKey();const e=new _s({apiKey:this.config.apiKey,version:this.config.version,libraries:this.config.libraries,language:this.config.language,region:this.config.region});await e.load()}validateApiKey(){if(!this.config.apiKey||"your-api-key-here"===this.config.apiKey)throw new Error("Google Maps API key is not configured")}createMapInstance(){this.defaultMapOptions.zoomControlOptions.position=google.maps.ControlPosition.RIGHT_CENTER,this.mapInstance=new google.maps.Map(this.mapElement,this.defaultMapOptions),google.maps.event.addListenerOnce(this.mapInstance,"idle",()=>{console.log("Google Map fully loaded and ready")})}setupServices(){this.autoCompleteService=new google.maps.places.AutocompleteService}setupEventListeners(){this.setupOutsideClickHandler()}setupOutsideClickHandler(){this.removeClickListener(),this.clickListener=e=>{!e.target.closest(this.config.searchContainerSelector)&&this.context.map?.suggestions?.length>0&&this.isInitialized&&(this.context.map.suggestions=[])},document.addEventListener("click",this.clickListener,{passive:!0})}setupOutsideClickHandler(){this.removeClickListener(),this.clickListener=e=>{!e.target.closest(this.config.searchContainerSelector)&&this.context.map?.suggestions?.length>0&&this.isInitialized&&(this.context.map.suggestions=[])},document.addEventListener("click",this.clickListener,{passive:!0})}removeClickListener(){this.clickListener&&(document.removeEventListener("click",this.clickListener),this.clickListener=null)}centerMap(e,t=null){if(!this.mapInstance)throw new Error("Map not initialized");this.mapInstance.setCenter(e),null!==t&&this.mapInstance.setZoom(t)}updateConfig(e){this.config={...this.config,...e}}getMapInstance(){return this.mapInstance}getAutoCompleteService(){return this.autoCompleteService}getInitializationStatus(){return this.isInitialized}destroy(){this.removeClickListener(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.mapInstance&&google.maps.event.clearInstanceListeners(this.mapInstance),this.mapInstance=null,this.autoCompleteService=null,this.isInitialized=!1,this.context?.map&&(this.context.map.instance=null,this.context.map.autoComplete=null,this.context.map.isInitialized=!1,this.context.map.clickListener=null),console.log("Google Map destroyed and cleaned up")}}var Cs=o(931),ks=o.n(Cs);const Ss=async e=>{const t=localStorage.getItem("geoip_country_code"),i=localStorage.getItem("geoip_cache_expiry");if(t&&i&&Date.now()<parseInt(i,10))return e(t);try{const t=await fetch("https://ipinfo.io/json"),i=(await t.json()).country||"us";return localStorage.setItem("geoip_country_code",i),localStorage.setItem("geoip_cache_expiry",Date.now()+864e5),e(i)}catch(t){return console.warn("GeoIP Lookup Failed. Using default country:",t),e("us")}};function Ds(e){return(e.classList.contains("formgent-field-single__box")?e:e.querySelector(".formgent-field-single__box")||e.closest(".formgent-field-single__box"))||null}function Is(e,t=!1){const i=e.nextElementSibling;if(!i)return"";if(t){const e=i?.querySelector("span:not(.formgent-field-single__checkbox)");return e?.textContent?.trim()||i?.textContent?.trim()||""}return i?.querySelector("span")?.textContent||""}function Ls(e,t,i){switch(e){case"ArrowUp":case"ArrowLeft":return t>0?t-1:i-1;case"ArrowDown":case"ArrowRight":return t<i-1?t+1:0;default:return null}}function xs(e,t){switch(e){case"Home":return 0;case"End":return t-1;default:return null}}function Fs(e,t){e.forEach((e,i)=>{e.setAttribute("tabindex",i===t?"0":"-1")})}function As(e,t,i,s){i!==t&&i>=0&&i<e.length&&(s(i),e[i].focus())}const{has:Es}=I(),{unescape:Os}=I(),$s=()=>{const t=e().sliderState||{},i="number"==typeof t.min?t.min:0,s="number"==typeof t.max?t.max:100,n="number"==typeof t.value?t.value:i;return{min:i,max:s,value:n,percent:s===i?0:Math.min(100,Math.max(0,(n-i)/(s-i)*100))}};window.formgent=window.formgent||{},window.formgent.utils=a,i("formgent/form",{state:{hideRepeaterTemplateItem:()=>{const{repeater_item:t}=e();return 0===Number(t)},isRepeaterInitialItem:()=>{const{repeater_item:t,repeater_items:i}=e();return 0===Number(t)&&Array.isArray(i)&&1===i.length},isPaymentGatewayChecked:()=>{const t=e();return gt(t)?(t.data.payment_gateway=t.name,!0):t.value===t.data?.payment_gateway},hasSinglePaymentMethod:()=>gt(e()),getValue:fe,isMultiSelectOptionChecked:function(){const t=e(),i=t.name,s=t?.option?.value;if(!s)return!1;if(t.repeater_name){const e=t.data?.[t.repeater_name]?.[t.repeater_item];if(!e)return!1;const n=e[i];return!!n?.[s]&&("object"!=typeof n[s]||n[s].checked)}let n=t.data[i];const r=s;return!!n?.[r]&&("object"!=typeof n[r]||n[r].checked)},isMultiSelectOptionDisabled:Fe,isSingleSelectOptionSelect:function(){const t=e(),{name:i,data:s,option:n,field_type:r,repeater_name:o,repeater_item:a}=t;if(!n?.value)return!1;if(o){const e=s?.[o]?.[a];if(!e)return!1;const t=e[i];return"payment-item"===r&&Array.isArray(t)?t.includes(n.value):t===n.value}const l="object"==typeof s[i]?s[i]:{};return"payment-item"===r?Array.isArray(s[i])?s[i].includes(n.value):s[i]===n.value:Le(l,n.value)},showStep:function(){const t=e();return t.blocks_settings[t.root_parent_name].show},isSubmittingStep:function(){const t=e();return t.blocks_settings[t.root_parent_name]?.is_submitting},stepCounter:function(){const t=e(),i=$();return`${i.indexOf(t.root_parent_name)+1} / ${i.length}`},showPrevButton:function(){const t=e();return 0!==Object.keys(t.blocks_settings).indexOf(t.root_parent_name)},totalStep:function(){return`${$().length} Questions`},timeToComplete:function(){const e=2*$().length,t=10*Math.round(60*e/8/10),i=Math.floor(t/60);return`${i>0?i+" minutes ":""}${t%60} seconds`},showSkipButton:function(){const t=e();return!function e(t){for(const i in t){const s=t[i];if("object"==typeof s&&null!==s){if(!0===s.required)return!0;if(s.children&&"object"==typeof s.children){if(e(s.children))return!0}else if(e(s))return!0}}return!1}(t.blocks_settings[t.root_parent_name].children)},hideField:function(){return wp.hooks.applyFilters("formgent_field_hide",!1)||function(){const t=e();return!!_e(t.parent_name)&&!De(ke(t),t.name||t.repeater_name,t.global?.page)}()||!function(){const t=e(),i=ke(t);if(!i||!i[t.name])return!0;const s=i[t.name].logics;if(ye(s)||ye(s.rules))return!0;const{rules:n,combinator:r="and"}=s;return Se(n,t,r)}()},getMapAddress:()=>{const{name:t,data:i}=e();return i[t].address},getOptionId:()=>{const t=e();if(!t?.name||!t?.option?.id)return"";const i=t.name+t.option.id;return t.repeater_items?"ri_"+i+t.repeater_item:i},getOptionName:()=>{const t=e();return t?.name?t.repeater_items?"repeater_"+t.name+t.repeater_item:"choice_"+t.name:""},getOptionLabel:()=>{var t;const i=e(),s=null!==(t=i?.option?.label)&&void 0!==t?t:"";return me("function"==typeof Os?Os(s):s)},getOtherOptionValue:()=>{var t;const i=e(),{name:s,data:n,repeater_name:r,repeater_item:o}=e();if(!i?.option?.is_other)return"";let a;const l=n[r]?.[o];var c;return a=r&&"number"==typeof o&&"single-choice"!==k(i).field_type?l&&"object"==typeof l[s]?{formgent_other:{checked:!0,value:"object"==typeof l[s].formgent_other?ae(l[s].formgent_other):l[s].formgent_other}}:{}:n[s],"single-choice"===k(i).field_type?null!==(c=a?.formgent_other)&&void 0!==c?c:"":null!==(t=a?.formgent_other?.value)&&void 0!==t?t:""},hasFiles:()=>{const t=e();return 0!==t?.uploadedFiles?.length},hasMultipleRepeaterItem:()=>{const t=e();return t?.repeater_items?.length>1},enableSummary:function(){return e().global.payment.enable_summary},paymentItems:()=>{var t;return null!==(t=e().global.payment.items)&&void 0!==t?t:[]},showPaypalButton:function(){const t=e();return"paypal"===t.data?.payment_gateway},showPaypalNext:{show:!1},showMultiStepPrev:function(){const t=e();return null!==Pe(t.blocks_settings,t.name)},totalPage:Me,getCurrentPageNo:Te,progressWidth:function(){const e=Me();return`${(Te()/e*100).toFixed(2)}%`},isMultiStepCompleted:function(){const t=e(),i=t.name;return!!i&&Ne(t.blocks_settings).filter(e=>"page-break"===t.blocks_settings[e].field_type).indexOf(i)<Te()},pageTitle:function(){const t=e(),i=t.global.page;let s,n;for(const e in t.blocks_settings){const r=t.blocks_settings[e];"page-break"===r.field_type&&(s||(s=r),i!==r.name||(n=r))}return n||(n=s),n?.step_text},getRatingValue:()=>{const t=e(),{name:i,parent_name:s,repeater_name:n,data:r,repeater_item:o}=t;return s&&!n?r[s]?.[i]||0:n?r[n]?.[o]?.[i]||0:r[i]||0},getRatingOptions:()=>{const t=e(),{name:i,parent_name:s,repeater_name:n,data:r,repeater_item:o,rating_limit:a}=t;let l=0;l=s&&!n?r[s]?.[i]||0:n?r[n]?.[o]?.[i]||0:r[i]||0;const c=a||5,d=[];for(let e=1;e<=c;e++)e<=l?d.push({rating:e,normal:!0,solid:!1}):d.push({rating:e,normal:!1,solid:!0});return d},getEmptyStarTabIndex:()=>{const t=e(),i=t.ratingState?.focusedRating||1;return t.item&&t.item.rating===i&&!t.item.normal?"0":"-1"},getSolidStarTabIndex:()=>{const t=e(),i=t.ratingState?.focusedRating||1;return t.item&&t.item.rating===i&&!t.item.solid?"0":"-1"},getDatePickerValue:()=>{const t=e(),{name:i,parent_name:s,repeater_name:n,data:r,repeater_item:o}=t;return r&&i?s&&!n?r[s]?.[i]||"":n?r[n]?.[o]?.[i]||"":r[i]||"":""},getSliderProgress:()=>{const{percent:e}=$s();return`${e}%`},getThumbPosition:()=>{const{percent:e}=$s();return`calc(${e}% - 11px)`},getSliderSubmittedValue:()=>{var t;const i=e().sliderState||{};return void 0!==i.submitValue&&null!==i.submitValue?i.submitValue:null!==(t=i.value)&&void 0!==t?t:""},isRangeOptionActive:()=>{const{value:e}=$s(),i=t();if(!i?.ref?.dataset?.optionIndex)return!1;const s=Number(i.ref.dataset.optionIndex);return Math.round(e)===s},nextButtonText:function(){const t=e(),i=ue(t.blocks_settings,t.name),s=t.blocks_settings[t.name];return i?"Submit":s?.next_button_text||"Next"}},actions:{onChangePaymentGateway:()=>{const t=e();t.data.payment_gateway=t.value},updateMultiSelectSpecify:function(){const i=e(),s=t().ref.value,{name:n,data:r,repeater_name:o,repeater_item:a}=i;let l;if(o&&"number"==typeof a){const e=r[o]?.[a];l=e&&"object"==typeof e[n]?ae(e[n])||e[n]:{}}else l=r[n]||{};"object"!=typeof l&&(l={}),l.formgent_other={checked:!0,value:s},C(l)},getValue:fe,updateInput:async function(){C()},updateNumber:async function(){const i=t(),s=e(),n=k(),{global:r,field_type:o}=s,{format:a,limit:l,min:c,max:d}=n,u=null!=c?Number(c):0,h=null!=d?Number(d):null,p=l?u:"custom-quantity"===o?1:0,m=document.activeElement===i.ref,f=i.ref.value;if(""===f)return"custom-payment-amount"===o&&(r.payment.enable_summary=!1),void C("",i,s);const g=Number(f);if(i.ref.dataset.fgNumberInit||(i.ref.addEventListener("blur",()=>{let e=Number(i.ref.value);e<p&&(e=p),l&&null!==h&&e>h&&(e=h),"decimal"===a||"custom-payment-amount"===o?e=Number(e).toFixed(2):"non_decimal"!==a&&"custom-quantity"!==o||(e=Number(e).toFixed(0)),i.ref.value=e,"custom-payment-amount"===o&&(r.payment.enable_summary=Number(e)>=0),C(Number(e),i,s)}),i.ref.dataset.fgNumberInit="1"),m)return"custom-payment-amount"===o&&(r.payment.enable_summary=g>=0),void C(g,i,s);let y=g;y<p&&(y=p),l&&null!==h&&y>h&&(y=h),"decimal"===a||"custom-payment-amount"===o?y=Number(y).toFixed(2):"non_decimal"!==a&&"custom-quantity"!==o||(y=Number(y).toFixed(0)),i.ref.value=y,"custom-payment-amount"===o&&(r.payment.enable_summary=Number(y)>=0),C(Number(y),i,s)},updateGdpr:function(){const t=e(),i=t.name;let s;s=t?.parent_name?t.data[t.parent_name][i]:t.data[i],C(s&&0!=s?0:1)},updateMultiChoice:async function(){const t=e(),{name:i,option:s,data:n,global:r,field_type:o,field_label:a,repeater_name:l,repeater_item:c}=t,{value:d}=s,u=r.payment.items;if(Fe(d))return;let h;if(l&&"number"==typeof c){const e=n[l]?.[c];h=e&&"object"==typeof e[i]?ae(e[i]):{}}else h="object"==typeof n[i]?n[i]:{};const p="formgent_other"===d;if(!h[d]){if(p&&ne(),h[d]=p?{checked:!0,value:""}:d,"payment-item"===o){const{paymentItems:e,totalAmount:t,enableSummary:n}=yt({name:i,option:s,values:h,paymentItems:u,field_label:a});r.payment.items=e,r.payment.total_amount=t.toFixed(2),r.payment.enable_summary=n}return C(h)}if(!p){if(delete h[d],"payment-item"===o){const{paymentItems:e,totalAmount:t,enableSummary:n}=function({name:e,option:t,paymentItems:i}){const s=i.findIndex(t=>t.label===e);if(-1!==s){const e=i[s];if(e.options=e.options.filter(e=>e.name!==t.label),0===e.options.length)i.splice(s,1);else{const t=e.options.reduce((e,t)=>e+Number(t.price||0),0);e.price=t.toFixed(2),e.line_total=(e.price*e.quantity).toFixed(2)}}const n=i.reduce((e,t)=>e+Number(t.line_total||0),0);return{paymentItems:i,totalAmount:n,enableSummary:i.length>0}}({name:i,option:s,paymentItems:u});r.payment.items=e,r.payment.total_amount=t.toFixed(2),r.payment.enable_summary=n}return C(h)}let m;h[d].checked?(m=!1,se()):(m=!0,ne()),h[d]={...h[d],checked:m},C(h)},updateSingleChoice:async function(){const t=e(),{option:i,validator:s,global:n,name:r,field_type:o,field_label:a,repeater_name:l,repeater_item:c,data:d}=t,u=i.value;let h;if(t.validator=s,"formgent_other"===u?ne():se(),"payment-item"===o){const e=n.payment.items,{paymentItems:t,totalAmount:s,enableSummary:o}=yt({name:r,option:i,values:{[u]:h},paymentItems:e,replace:!0,field_label:a});n.payment.items=t,n.payment.total_amount=s.toFixed(2),n.payment.enable_summary=o}if(l&&"number"==typeof c){const e=d[l]?.[c];return h="formgent_other"===u?e[r]?.formgent_other:{[u]:!0},C(h)}return h="formgent_other"!==u||"",C({[u]:h})},handleSubmitButtonKeydown:function(e){if("Enter"===e?.key||13===e?.keyCode||" "===e?.key||32===e?.keyCode){e.preventDefault();const i=t();i?.ref&&i.ref.click()}},nextStep:nt,skipStep:function(){const t=e(),i=t.root_parent_name;let s=t?.blocks_settings[i],n=S(t?.blocks_settings,i);s.show=!1,n.show=!0,Object.keys(s.children).forEach(e=>{t.data.hasOwnProperty(e)&&(t.data[e]="")})},prevStep:lt,submitConversationalForm:async function(){const i=t(),s=e();if("conversational"!==s.form_type)return;const n=s.root_parent_name;s.blocks_settings[n].validator.revalidate().then(e=>{e&&Xe(s,i)})},updateSingleSelectSpecify:function(){C({formgent_other:t().ref.value})},rangeSliderPointerDown:function(i){if("mouse"===i.pointerType&&0!==i.button)return;const s=e(),n=t(),r=ut(s);i.preventDefault(),n.ref&&document.activeElement!==n.ref&&n.ref.focus(),r.activePointerId=i.pointerId,n.ref.setPointerCapture?.(i.pointerId),ft(i,s,n)},rangeSliderPointerMove:function(i){const s=e(),n=t();ut(s).activePointerId===i.pointerId&&(i.preventDefault(),ft(i,s,n))},rangeSliderPointerUp:function(i){const s=e(),n=t(),r=ut(s);r.activePointerId===i.pointerId&&(n.ref.releasePointerCapture?.(i.pointerId),r.activePointerId=null)},rangeSliderKeyDown:function(i){var s;const n=e(),r=t(),o=ut(n);if(document.activeElement!==r.ref||!o.isFocused)return;const a=ht(r,n),l=null!==(s=o.value)&&void 0!==s?s:"number"===a.sliderType?a.defaultValue:a.defaultIndex;let c=l,d=!1;switch(i.key){case"ArrowLeft":case"ArrowDown":c=l-a.step,d=!0;break;case"ArrowRight":case"ArrowUp":c=l+a.step,d=!0;break;case"Home":c=a.min,d=!0;break;case"End":c=a.max,d=!0;break;case"PageDown":c=l-.1*(a.max-a.min),d=!0;break;case"PageUp":c=l+.1*(a.max-a.min),d=!0}d&&(i.preventDefault(),mt(c,a,n,r),((e,t,i)=>{var s,n;if(!e.ref)return;const r=null!==(s=t.value)&&void 0!==s?s:i.min,o=null!==(n=t.valueLabel)&&void 0!==n?n:pt(r,i);e.ref.setAttribute("aria-valuenow",r),e.ref.setAttribute("aria-valuetext",o)})(r,o,a))},rangeSliderFocus:function(){const i=e(),s=t();ut(i).isFocused=!0,s.ref.classList.add("formgent-slider-wrap--focused")},rangeSliderBlur:function(){const i=e(),s=t();ut(i).isFocused=!1,s.ref.classList.remove("formgent-slider-wrap--focused")},onAddRepeaterItem:ot,handleRepeaterAddKeydown:function(e){pe(e)&&(e.preventDefault(),ot())},onRemoveRepeaterItem:at,handleRepeaterRemoveKeydown:function(e){pe(e)&&(e.preventDefault(),at())},updateLocationInput:function(){Ye.updateLocationInput()},selectMapLocation:function(){Ye.selectMapLocation()},resetLocationInput:function(){Ye.resetLocationInput()},multiStepNext:function(){const t=e(),{showPaypalNext:s}=i("formgent/form").state;let n;for(const e in t.blocks_settings){let i=t.blocks_settings[e];if(n=i,"page-break"!==i.field_type){try{const e=i=>{if(i?.children&&"object"==typeof i.children)for(const t in i.children)e(i.children[t]);const s=`#${O(i.id)}`,n=t.formElement.ref.querySelector(s);if(n){try{t.validator.removeField(n)}catch(e){}try{delete n.dataset.fgValidated}catch(e){}}["single-choice","multiple-choice"].includes(i.field_type)&&t.formElement.ref.querySelectorAll(`.formgent-${i.field_type}-${i.name}`).forEach(e=>{try{t.validator.removeField(e)}catch(e){}try{delete e.dataset.fgValidated}catch(e){}})};e(i)}catch(e){}if(De(t.blocks_settings,e,t.global.page)){if("captcha"===i.field_type&&!t.data?.[i.field_type])return void document.querySelector(`#${O(i.id)}`).nextElementSibling.classList.add("show");E(i,t.formElement,t.validator)}}}t.validator.revalidate().then(async e=>{if(!e)return;let i=((e,t)=>{const i=ce(e),s=i.findIndex(e=>e.key===t);return s>=0&&s<i.length-1?i[s+1].key:null})(t.blocks_settings,t.name);if(!i&&"page-break"===n.field_type){let e;await Xe(t,t.formElement);for(const i in t.blocks_settings)if("page-break"===t.blocks_settings[i].field_type){e=i;break}return void(t.global.page=e)}de(t.blocks_settings,t.name)&&"paypal"===t.data.payment_gateway?s.show=!0:s.show=!1,t.global.page=i,oe(t.formElement.ref.querySelectorAll(".formgent-form-progress-step__item--completed"));const r=t.formElement.ref.closest(".formgent-form");r&&r.scrollIntoView({behavior:"smooth",block:"start"})})},multiStepPrev:function(){const t=e(),{showPaypalNext:s}=i("formgent/form").state;let n=Pe(t.blocks_settings,t.name);if(!n)return;de(t.blocks_settings,t.name)||(s.show=!1),t.global.page=n,oe(t.formElement.ref.querySelectorAll(".formgent-form-progress-step__item--completed"));const r=t.formElement.ref.closest(".formgent-form");r&&r.scrollIntoView({behavior:"smooth",block:"start"})},...c,...l},callbacks:{initClassicForm:async function(){const i=e(),s=t();i.is_form_loaded=!0,i.global.is_form_started=!1,i.global.field_interaction_state={},i.global.response_token=null,wp.hooks.doAction("formgent_form_before_init",i.form_id,i,s),s.ref.querySelectorAll(".display-none").forEach(e=>{e.classList.remove("display-none")}),async function(e){try{await x({path:`formgent/analytics/forms/${e.form_id}/update-view-count`,method:"POST",data:{form_id:e.form_id,type:"+"}})}catch(e){console.log(e)}}(i);const n=`#${s.attributes.id}`,r=new Kt(n,{validateBeforeSubmitting:!0});if(r.onFail(e=>{const t=s.ref.querySelector(".just-validate-error-field");if(t&&"checkbox"===t.type&&t.closest(".formgent-field-single__wrapper--gdpr")){const e=t.closest(".formgent-field");e&&setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},150)}}),!i?.is_multi_step){let e=!0;for(const e in i?.blocks_settings)E(i?.blocks_settings[e],s,r);r.onSuccess(t=>{t.preventDefault();for(const t in i.blocks_settings){const n=i.blocks_settings[t];if("captcha"===n.field_type&&!i.data?.[n.field_type])return void document.querySelector(`#${O(n.id)}`).nextElementSibling.classList.add("show");if(Ut(O(n.id))&&(delete i.data[t],"digital-signature"!==n.field_type&&"file-upload"!==n.field_type||wp.hooks.doAction("formgent_remove_uploaded_file",!0)),"paypal"===n.field_type||"stripe"===n.field_type){const t=s.ref.querySelectorAll('input[name="payment_gateway"]'),i=Array.from(t).some(e=>e.checked);e=i}}e&&Xe(i,s)})}s.ref.querySelectorAll(".formgent-field-single").forEach(e=>{e.querySelector("div.formgent-field-single:not(.formgent-field-single--paypal-button):not(.formgent-page-break)")&&e.closest(".formgent-field").classList.add("formgent-field--has-child")});const o=document.querySelectorAll(".formgent-field"),a=new MutationObserver(e=>{e.forEach(e=>{if("attributes"===e.type&&"hidden"===e.attributeName)for(const e in i?.blocks_settings)E(i?.blocks_settings[e],s,r)})});o.forEach(e=>{a.observe(e,{attributes:!0,attributeFilter:["hidden"]})}),i.validator=r,i.formElement=s,s.ref.addEventListener("formgent-field-validated",e=>{const{fieldElement:t,value:i}=e.detail;if(i&&t)try{r.revalidateField(t)}catch(e){console.warn("Could not revalidate field:",e)}})},initConversationalForm:async function(){const i=e(),s=t();i.global.field_interaction_state={},i.global.response_token=null,setTimeout(()=>{i.global.is_form_started=!1,s.ref.querySelectorAll(".display-none").forEach(e=>{e.classList.remove("display-none")}),i.is_form_loaded=!0,i.is_partial_submitting=!0,wp.hooks.doAction("formgent_form_before_init",i.form_id,i,s)},500)},initConversationalStep:async function(){const i=e(),n=t(),r=((e,t)=>{const{root_parent_name:i}=e,{children:s}=e.blocks_settings[i],n=new Kt(`#${O(i)}`,{validateBeforeSubmitting:!0});return Object.entries(s).forEach(([e,i])=>{E(i,t,n)}),e.blocks_settings[i].validator=n,n})(i,n);((e,t)=>{e.ref.addEventListener("formgent-field-validated",e=>{const{fieldElement:i,value:s}=e.detail;if(s&&i)try{t.revalidateField(i)}catch(e){console.warn("Could not revalidate field:",e)}})})(n,r),(e=>{e.ref.addEventListener("keydown",s(t=>{if(!(e=>"Tab"===e?.key||9===e?.keyCode)(t)||Boolean(document.querySelector(".formgent-modal.open")))return;const{ref:i}=e;if(!i)return;const s=(e=>Array.from(e.querySelectorAll('a[href],button:not([disabled]),input:not([disabled]):not([type="hidden"]),select:not([disabled]),textarea:not([disabled]),[tabindex]:not([tabindex^="-"]),[contenteditable="true"]')).filter(e=>e instanceof HTMLElement&&null!==e.offsetParent))(i);if(0===s.length)return;const n=document.activeElement,[r,...o]=s,a=o.length>0?o[o.length-1]:r;((e,t)=>t&&t instanceof HTMLElement&&e.contains(t))(i,n)&&(t.shiftKey?n!==r&&n||(t.preventDefault(),t.stopPropagation(),lt()):n!==a&&n||(t.preventDefault(),t.stopPropagation(),nt()))}))})(n),T()},initRating:function(){const i=e(),s=t(),n=k(i),{name:r,parent_name:o,repeater_name:a,data:l,repeater_item:c}=i;let d=0;d=o&&!a?l?.[o]?.[r]||0:a?l?.[a]?.[c]?.[r]||0:l?.[r]||0;const u="number"==typeof n?.default_rating?n.default_rating:0,h="number"==typeof n?.rating_limit?n.rating_limit:5;if((!d||d<=0)&&u>0){const e=Math.min(u,h);i.ratingState.rating=e,i.ratingState.focusedRating=e;const t=s.ref.querySelector(".formgent-validate-field-input");return t&&(t.value=e),void C(e,s,i)}i.ratingState.rating=d,i.ratingState.focusedRating=d>0?d:1},initSelectField:function(){const i=t(),s=e(),{single_item_amount:n,field_type:r,name:o,global:a,product_display_type:l,field_label:c}=s;if("single"===l&&"payment-item"===r){const e=n,t=s.global.payment.items;let r=1;const l=t.find(e=>e.name===o);if(e>0)l?(l.price=e.toFixed(2),l.line_total=(e*l.quantity).toFixed(2)):t.push({label:o,name:o,options:[],price:e.toFixed(2),quantity:r,line_total:(e*r).toFixed(2),field_label:c||o});else{const e=t.findIndex(e=>e.name===o);-1!==e&&t.splice(e,1)}const d=t.reduce((e,t)=>e+Number(t.line_total||0),0);s.global.payment.total_amount=d.toFixed(2),a.payment.enable_summary=t.length>0,C(`${n}`,i,s)}},dropdownInit:async function(){const i=t(),s=e(),{options:n,global:r,name:o,field_type:a,field_label:l}=s;if(i.ref.tomselect)return;const c=()=>{const{name:e,parent_name:t,repeater_name:i,data:n,repeater_item:r}=s;return t&&!i?n[t]?.[e]||"":i?n[i]?.[r]?.[e]||"":n[e]||""},d=new hs(i.ref,{placeholder:i.ref.dataset.placeholder,maxOptions:300,openOnFocus:!1,onChange:function(e){if(e){if("payment-item"===a){const t=n.find(t=>t.value===e);if(t){const i={[e]:!0},{paymentItems:s,totalAmount:n,enableSummary:a}=yt({name:o,option:t,values:i,paymentItems:r.payment.items,replace:!0,field_label:l});r.payment.items=s,r.payment.total_amount=n.toFixed(2),r.payment.enable_summary=a}}C(e,i,s)}}});i.ref.tomselect=d;const u=e=>{d.control&&(d.control===e.target||d.control.contains(e.target))&&(d.isOpen||(e.preventDefault(),d.open()))},h=()=>{d.control&&document.activeElement!==d.control&&(d.control.setAttribute("tabindex","0"),d.control.focus())},p=e=>{const{key:t,target:i}=e,s=d.control,n=d.input,r=s&&(s===i||s.contains(i)),o=n&&(n===i||n.contains(i));if(r||o){if(" "===t||"Spacebar"===t||"Enter"===t)return e.preventDefault(),void(d.isOpen?((e,t)=>{const i=e.dropdown?.querySelector(".active[data-selectable]");if(i){const s=i.getAttribute("data-value");if(s)return e.setValue(s),e.close(),setTimeout(t,0),!0}return!1})(d,h)||(d.close(),setTimeout(h,0)):d.open());if(t===vt||t===bt){if(!d.isOpen)return;return e.preventDefault(),void((e,t)=>{const i=e.dropdown;if(!i)return;const s=Array.from(i.querySelectorAll("[data-selectable]"));if(0===s.length)return;const n=i.querySelector(".active[data-selectable]");let r=n?s.indexOf(n):-1;t===bt?r=r<s.length-1?r+1:0:t===vt&&(r=r>0?r-1:s.length-1),s.forEach(e=>e.classList.remove("active")),s[r]&&(s[r].classList.add("active"),s[r].scrollIntoView({block:"nearest"}))})(d,t)}"Escape"!==t&&"Esc"!==t||d.isOpen&&(e.preventDefault(),d.close(),setTimeout(h,0))}},m=()=>{d.control&&d.control.setAttribute("tabindex","0")};setTimeout(()=>{d.control&&(d.control.addEventListener("click",u),d.control.addEventListener("keydown",p),d.control.addEventListener("focus",m),d.control.setAttribute("tabindex","0")),d.input&&d.input!==d.control&&d.input.addEventListener("keydown",p)},0);const f=c();f&&d.setValue(f),wp.hooks.addAction("formgent_form_reset","formgent",function(e){i.ref.closest("form").id===e.id&&(d.clear(!0),setTimeout(h,0))});const g=()=>{const e=c();d.getValue(),e?d.setValue(e,!0):d.clear(!0),setTimeout(h,0)};wp.hooks.addAction("formgent_refresh_repeater_data","formgent",g),document.addEventListener("formgent_repeater_updated",g)},phoneNumberInit:async function(){const i=t(),s=e(),n=k(s);if(!n)return;const r=i.ref,o=()=>{const{name:e,parent_name:t,repeater_name:i,data:n,repeater_item:r}=s;return t&&!i?n[t]?.[e]||"":i?n[i]?.[r]?.[e]||"":n[e]||""};let a={separateDialCode:n.country_code};n.country_auto_detection?(a.initialCountry="auto",a.geoIpLookup=Ss):a.initialCountry="us";const l=ks()(r,a);r.iti=l;const c=o();c&&l.setNumber(c);const d=e=>{const t=l.getSelectedCountryData();let n=e.target.value;const r=n.replace(/[^0-9+]/g,""),o=(r.match(/\+/g)||[]).length;n=o>1?r.replace(/\+/g,""):1===o&&"+"!==r[0]?"+"+r.replace(/\+/g,""):r,e.target.value!==n&&(e.target.value=n),"+"!==n?.[0]&&(n=`+${t.dialCode}${n}`),C(n,i,s)};r.addEventListener("countrychange",d),r.addEventListener("input",d),r.addEventListener("keydown",e=>{const t=e.key;e.ctrlKey||e.metaKey||["0","1","2","3","4","5","6","7","8","9","+","Backspace","Delete","Tab","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(t)&&("+"!==t||0===e.target.selectionStart)||e.preventDefault()}),r.addEventListener("paste",e=>{e.preventDefault();const t=(e.clipboardData||window.clipboardData).getData("text").replace(/[^0-9+]/g,""),i=e.target.selectionStart,s=e.target.selectionEnd,n=e.target.value,r=n.substring(0,i)+t+n.substring(s);e.target.value=r,e.target.setSelectionRange(i+t.length,i+t.length),e.target.dispatchEvent(new Event("input",{bubbles:!0}))});const u=()=>{const e=o();l.getNumber(),e?l.setNumber(e):l.setNumber("")};wp.hooks.addAction("formgent_refresh_repeater_data","formgent",u),document.addEventListener("formgent_repeater_updated",u)},inputMaskInit:async function(){const i=t(),s=e(),n=k(s);if(!n)return;const r=()=>C(null,i,s);"none"!==n.mask_type&&""!==n.mask_type?jQuery(i.ref).mask(n.mask_type,{onChange:r}):i.ref.addEventListener("input",r)},singleChoiceKeyboard:function(){const i=t(),s=e(),n=Ds(i.ref);if(!n)return;const r=Array.from(n.querySelectorAll('input[type="radio"].formgent-field-single__input--radio'));if(!r.length)return;const o=s.name||"";n.setAttribute("role","radiogroup"),n.setAttribute("aria-label",s.label||o);const a=e=>{Fs(r,e)};r.forEach((e,t)=>{const i=Is(e,!1),s=e.checked,n=0===t;e.setAttribute("tabindex",s||n?"0":"-1"),e.setAttribute("role","radio"),e.setAttribute("aria-checked",s?"true":"false"),i&&e.setAttribute("aria-label",i)});const l=e=>{const{key:t,target:i}=e,s=r.indexOf(i);if(-1===s)return;if(" "===t||"Spacebar"===t)return e.preventDefault(),void(i.checked||(i.checked=!0,i.dispatchEvent(new Event("change",{bubbles:!0}))));const n=Ls(t,s,r.length);if(null!==n)return e.preventDefault(),void As(r,s,n,a);const o=xs(t,r.length);return null!==o?(e.preventDefault(),void As(r,s,o,a)):void 0},c=e=>{const t=e.target;r.forEach(e=>{const i=e===t;e.setAttribute("aria-checked",i?"true":"false"),e.setAttribute("tabindex",i?"0":"-1")})},d=e=>{const t=e.target;r.forEach(e=>{e.setAttribute("tabindex",e===t?"0":"-1")})};return r.forEach(e=>{e.addEventListener("keydown",l),e.addEventListener("change",c),e.addEventListener("focus",d)}),()=>{r.forEach(e=>{e.removeEventListener("keydown",l),e.removeEventListener("change",c),e.removeEventListener("focus",d)})}},multipleChoiceKeyboard:function(){const i=t(),s=e(),n=Ds(i.ref);if(!n)return;const r=Array.from(n.querySelectorAll('input[type="checkbox"].formgent-field-single__input--checkbox'));if(!r.length)return;n.setAttribute("role","group"),s.label&&n.setAttribute("aria-label",s.label);const o=e=>{Fs(r,e)};r.forEach((e,t)=>{const i=Is(e,!0);e.setAttribute("tabindex",0===t?"0":"-1"),e.setAttribute("role","checkbox"),e.setAttribute("aria-checked",e.checked?"true":"false"),i&&e.setAttribute("aria-label",i)});const a=e=>{const{key:t,target:i}=e,s=r.indexOf(i);if(-1===s)return;if("Tab"===t||9===e.keyCode)return;if(" "===t||"Spacebar"===t)return e.preventDefault(),i.checked=!i.checked,void i.dispatchEvent(new Event("change",{bubbles:!0}));const n=Ls(t,s,r.length);if(null!==n)return e.preventDefault(),void As(r,s,n,o);const a=xs(t,r.length);return null!==a?(e.preventDefault(),void As(r,s,a,o)):void 0},l=e=>{e.target.setAttribute("aria-checked",e.target.checked?"true":"false")};return r.forEach(e=>{e.addEventListener("keydown",a),e.addEventListener("change",l)}),()=>{r.forEach(e=>{e.removeEventListener("keydown",a),e.removeEventListener("change",l)})}},watchForm:function(){const{blocks_settings:t,form_type:i}=e();if("conversational"===i)for(const e in t){const i=t[e];Es(i,"videoPlayPause")&&(i.show?i.videoPlayPause.play():i.videoPlayPause.pause())}},initGoogleMap:async function(){const e=new ws;return await e.init(),()=>e.destroy()},initDatePicker:function(){const i=e(),s=t(),n=s.ref,r=k(i);if(!r)return;O(r.id);const o=L();n.querySelectorAll("input").forEach(e=>{const{date_format:t,range:a,option:l,allowed_days:c}=r,d=(c||[]).map(Number),u=({date:e,datepicker:t})=>{if(!a||!Array.isArray(d))return!1;const i=t.selectedDates[0];if(i&&1===t.selectedDates.length){const t=[i,e].sort((e,t)=>e-t);let s=o(t[0]);const n=o(t[1]);for(;s.isSameOrBefore(n,"day");){if(!d.includes(s.day()))return!0;s.add(1,"day")}}return!1},h={dateFormat:t,buttons:[{content:"Today",onClick(e){e.isDateDisabled||e.selectDate(new Date)}}],range:Boolean(a),multipleDatesSeparator:" - ",onRenderCell:({date:e,cellType:t})=>{if("day"===t){const t=e.getDay();if(!d.includes(t))return{disabled:!0}}}},p={timepicker:!0,onlyTimepicker:!0,buttons:[{content:"Current Time",onClick(e){e.selectDate(new Date,{updateTime:!0})}}]},m={...h,timepicker:!0};let f=null;new Wt(e,{...{date:h,both:m,time:p}[l],position:"bottom left",autoClose:!0,locale:Yt.A,inline:!1,navTitles:{days:e=>`${e.formatDate(new Date(e.viewDate),"MMM yyyy")}`},onBeforeSelect:({date:e,datepicker:t})=>!u({date:e,datepicker:t}),onFocus({date:e,datepicker:t}){u({date:e,datepicker:t})?t.$datepicker.classList.add("-disabled-range-"):t.$datepicker.classList.remove("-disabled-range-")},onSelect:function(t){if(e.value){let r;n.querySelector(".formgent-date-close")?.remove(),f=document.createElement("span"),f.classList.add("formgent-date-close"),e.closest(".formgent-suffix").appendChild(f),r="object"==typeof t.formattedDate?`${t.formattedDate[0]} - ${t.formattedDate[1]}`:t.formattedDate,C(r,s,i);const o=new CustomEvent("formgent-field-validated",{detail:{fieldElement:e,fieldType:"date",value:r}}),a=e.closest("form");a&&a.dispatchEvent(o),C(r,s,i)}}}),n.querySelector(".formgent-suffix")?.addEventListener("click",t=>{t.target.classList.contains("formgent-date-close")&&(n.querySelector(".formgent-date-close")?.remove(),f=null,e.value="",C("",s,i))}),wp.hooks.addAction("formgent_form_reset","formgent",()=>{n.querySelector(".formgent-date-close")?.remove(),f=null});const g=()=>{const t=(()=>{const{name:e,parent_name:t,repeater_name:s,data:n,repeater_item:r}=i;return t&&!s?n[t]?.[e]||"":s?n[s]?.[r]?.[e]||"":n[e]||""})(),s=n.querySelector(".formgent-date-close");t&&!s?(f=document.createElement("span"),f.classList.add("formgent-date-close"),e.closest(".formgent-suffix").appendChild(f)):!t&&s&&(s.remove(),f=null)};g(),wp.hooks.addAction("formgent_refresh_repeater_data","formgent",g),document.addEventListener("formgent_repeater_updated",g)})},initCaptcha:function(){const i=e(),s=t();let n;switch(k(i).captcha){case"google_recaptcha":n="formgent/captcha/google";break;case"cloudflare_turnstile":n="formgent/captcha/turnstile";break;default:n="formgent/captcha/hcaptcha"}wp.hooks.addAction(i.captcha_hook,"formgent",async function(e){try{await x({path:n,method:"post",data:{response:e}}),C(!0,s,i)}catch(e){console.log(e)}})},initHtmlBlock:()=>{const i=e(),s=t(),n=i.html||"",r=i.data||{},o=i.preset_values||{},a=i.blocks_settings||{},l=Ze(n,r,o,a);s.ref&&(s.ref.innerHTML=l)},updateHtmlBlock:()=>{const i=e(),s=t(),n=i.html||"",r=i.data||{},o=i.preset_values||{},a=i.blocks_settings||{},l=Ze(n,r,o,a);s.ref&&(s.ref.innerHTML=l)},initRangeSlider:function(){const i=e(),s=t().ref.querySelector(".formgent-slider-wrap");s&&((e,t)=>{const i=ht(t,e),s=(e=>{const{data:t,name:i,parent_name:s,repeater_name:n,repeater_item:r}=e;if(n&&"number"==typeof r){const e=t?.[n]?.[r];if(!e)return;return s?e?.[s]?.[i]:e?.[i]}return s?t?.[s]?.[i]:t?.[i]})(e);let n;if("number"===i.sliderType){var r;n="number"==typeof s&&Number.isFinite(s)?s:null!==(r=i.defaultValue)&&void 0!==r?r:i.min}else{const e=((e,t)=>{if(null==e)return null;if("number"==typeof e&&Number.isFinite(e))return ct(Math.round(e),t.min,t.max);if("string"==typeof e&&t.textOptions.length){const i=t.textOptions.findIndex(t=>t.value===e||t.label===e||String(t.value)===e);return-1!==i?i:null}return null})(s,i);n=null!==e?e:i.defaultIndex}mt(n,i,e,t)})(i,{ref:s})},initRepeater:function(){const t=e();t.__fg_repeater_inited||(t.__fg_repeater_inited=!0,Array.isArray(t.repeater_items)?queueMicrotask(()=>{try{t.repeater_items=[...t.repeater_items]}catch(e){}}):t.repeater_items=[0])}}});